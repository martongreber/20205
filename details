root@7ac971934531:/apache/dev/git/kudu/build/tsan# git diff
diff --git a/src/kudu/tools/kudu-tool-test.cc b/src/kudu/tools/kudu-tool-test.cc
index cfd331a84..c3dcb1eed 100644
--- a/src/kudu/tools/kudu-tool-test.cc
+++ b/src/kudu/tools/kudu-tool-test.cc
@@ -9439,6 +9439,7 @@ TEST_P(DownloadSuperblockInBatchTest, TestDownloadSuperblockInBatch) {
   // So it is easy to make the size of superblock over the value of rpc_max_message_size.
   FLAGS_rpc_max_message_size = kSuperblockSize / 4;
   ASSERT_OK(src_tserver->Restart());
+  ASSERT_OK(src_tserver->WaitStarted());
 
   string source_tserver_rpc_addr = src_tserver->bound_rpc_addr().ToString();
   string wal_dir = dst_tserver->options()->fs_opts.wal_root;
@@ -9449,30 +9450,32 @@ TEST_P(DownloadSuperblockInBatchTest, TestDownloadSuperblockInBatch) {
   StringVectorSink capture_logs;
   ScopedRegisterSink reg(&capture_logs);
   string stderr;
-  RunActionStdoutStderrString(
-      Substitute("local_replica copy_from_remote $0 $1 "
-                 "-fs_data_dirs=$2 -fs_wal_dir=$3 "
-                 "--tablet_copy_support_download_superblock_in_batch=$4 "
-                 // Disable --rpc_max_message_size_enable_validation, so
-                 // --rpc_max_message_size can be set a small value.
-                 "--rpc_max_message_size_enable_validation=false "
-                 // Set --rpc_max_message_size very small, so it is easy for the size of
-                 // superblock over --rpc_max_message_size. It is used to repeat the network
-                 // error, see line 9477.
-                 "--rpc_max_message_size=$5 "
-                 // This flag and --rpc_max_message_size are in a group flag validator, so
-                 // it is also should be set a small value.
-                 "--consensus_max_batch_size_bytes=$6 "
-                 "--encrypt_data_at_rest=$7 "
-                 "--tablet_copy_transfer_chunk_size_bytes=50",
-                 tablet_id_to_copy,
-                 source_tserver_rpc_addr,
-                 data_dirs,
-                 wal_dir,
-                 FLAGS_tablet_copy_support_download_superblock_in_batch,
-                 (kSuperblockSize / 4),
-                 (kSuperblockSize / 8),
-                 FLAGS_encrypt_data_at_rest), nullptr, &stderr);
+  {
+    RunActionStdoutStderrString(
+        Substitute("local_replica copy_from_remote $0 $1 "
+                  "-fs_data_dirs=$2 -fs_wal_dir=$3 "
+                  "--tablet_copy_support_download_superblock_in_batch=$4 "
+                  // Disable --rpc_max_message_size_enable_validation, so
+                  // --rpc_max_message_size can be set a small value.
+                  "--rpc_max_message_size_enable_validation=false "
+                  // Set --rpc_max_message_size very small, so it is easy for the size of
+                  // superblock over --rpc_max_message_size. It is used to repeat the network
+                  // error, see line 9477.
+                  "--rpc_max_message_size=$5 "
+                  // This flag and --rpc_max_message_size are in a group flag validator, so
+                  // it is also should be set a small value.
+                  "--consensus_max_batch_size_bytes=$6 "
+                  "--encrypt_data_at_rest=$7 "
+                  "--tablet_copy_transfer_chunk_size_bytes=50",
+                  tablet_id_to_copy,
+                  source_tserver_rpc_addr,
+                  data_dirs,
+                  wal_dir,
+                  FLAGS_tablet_copy_support_download_superblock_in_batch,
+                  (kSuperblockSize / 4),
+                  (kSuperblockSize / 8),
+                  FLAGS_encrypt_data_at_rest), nullptr, &stderr);
+  }
   // The size of superblock is larger than rpc_max_message_size, it will cause a network error.
   // Downloading superblock will fail.
   if (!FLAGS_tablet_copy_support_download_superblock_in_batch) {

CMD:
root@7ac971934531:/apache/dev/git/kudu/build/tsan# ./bin/kudu-tool-test --gtest_filter=*TestDownloadSuperblockInBatch/3* 2>&1 | tee /tmp/test.log

TSAN log:

LLVMSymbolizer: error reading file: No such file or directory
==================
WARNING: ThreadSanitizer: data race (pid=66319)
  Read of size 8 at 0x7ffeba6aba90 by main thread:
    #0 std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::begin() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1528:30 (kudu-tool-test+0x604f09)
    #1 void JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:168:34 (kudu-tool-test+0x6bc3d6)
    #2 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&) ../src/kudu/gutil/strings/join.h:175:3 (kudu-tool-test+0x608cf1)
    #3 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9485:5 (kudu-tool-test+0x5dc37d)
    #4 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #5 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #6 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #7 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #8 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #9 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #10 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #11 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #12 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #13 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #14 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

  Previous write of size 8 at 0x7ffeba6aba90 by thread T152 (mutexes: write M179, read M183):
    #0 std::__1::enable_if<(is_move_constructible<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*>::value) && (is_move_assignable<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*>::value), void>::type std::__1::swap<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*>(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:4076:9 (kudu-tool-test+0x648330)
    #1 std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::__swap_out_circular_buffer(std::__1::__split_buffer<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&>&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:956:5 (kudu-tool-test+0x647d79)
    #2 void std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::__push_back_slow_path<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1631:5 (kudu-tool-test+0x6b50bc)
    #3 std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::push_back(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1659:9 (kudu-tool-test+0x60ad41)
    #4 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:18 (kudu-tool-test+0x69d0e9)
    #5 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #6 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #7 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #8 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #9 kudu::rpc::Connection::ReadHandler(ev::io&, int) ../src/kudu/rpc/connection.cc (libkrpc.so+0x14277c)
    #10 void ev::base<ev_io, ev::io>::method_thunk<kudu::rpc::Connection, &(kudu::rpc::Connection::ReadHandler(ev::io&, int))>(ev_loop*, ev_io*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x14dc6a)
    #11 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #12 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #13 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #14 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #15 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #16 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #17 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #18 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #19 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #20 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #21 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #22 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #23 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Location is stack of main thread.

  Location is global '??' at 0x7ffeba68d000 ([stack]+0x00000001ea90)

  Mutex M179 (0x7ff8f97c3968) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xdde9)
    #2 __cxx_global_var_init.152 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:396:14 (libglog.so.1+0xdde9)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xdde9)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Mutex M183 (0x7ff8f97c3a08) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xded2)
    #2 __cxx_global_var_init.160 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:623:23 (libglog.so.1+0xded2)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xded2)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Thread T152 'rpc reactor-666' (tid=66682, running) created by main thread at:
    #0 pthread_create /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:966 (kudu-tool-test+0x4a52b5)
    #1 kudu::Thread::StartThread(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, unsigned long, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.cc:635:15 (libkudu_util.so+0x42d70a)
    #2 kudu::Thread::Create(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.h:146:12 (libmaster.so+0x2cf9b9)
    #3 kudu::rpc::ReactorThread::Init() ../src/kudu/rpc/reactor.cc:193:10 (libkrpc.so+0x18c03e)
    #4 kudu::rpc::Reactor::Init() ../src/kudu/rpc/reactor.cc:773:18 (libkrpc.so+0x1907c0)
    #5 kudu::rpc::Messenger::Init() ../src/kudu/rpc/messenger.cc:360:5 (libkrpc.so+0x160d6d)
    #6 kudu::rpc::MessengerBuilder::Build(std::__1::shared_ptr<kudu::rpc::Messenger>*) ../src/kudu/rpc/messenger.cc:107:3 (libkrpc.so+0x16082c)
    #7 kudu::server::ServerBase::Init() ../src/kudu/server/server_base.cc:851:3 (libserver_process.so+0x13ed4a)
    #8 kudu::kserver::KuduServer::Init() ../src/kudu/kserver/kserver.cc:144:3 (libkserver.so+0x12eb1)
    #9 kudu::tserver::TabletServer::Init() ../src/kudu/tserver/tablet_server.cc:106:3 (libtserver.so+0x25d062)
    #10 kudu::tserver::MiniTabletServer::Start() ../src/kudu/tserver/mini_tablet_server.cc:106:3 (libtserver.so+0x1e886b)
    #11 kudu::tserver::MiniTabletServer::Restart() ../src/kudu/tserver/mini_tablet_server.cc:131:10 (libtserver.so+0x1e8b08)
    #12 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9441:3 (kudu-tool-test+0x5dbe5b)
    #13 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #14 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #15 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #16 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #17 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #18 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #19 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #20 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #21 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #22 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #23 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

SUMMARY: ThreadSanitizer: data race /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1528:30 in std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::begin() const
==================
==================
WARNING: ThreadSanitizer: data race (pid=66319)
  Read of size 8 at 0x7ffeba6aba98 by main thread:
    #0 std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::end() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1544:30 (kudu-tool-test+0x604f4a)
    #1 void JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:168:54 (kudu-tool-test+0x6bc3e2)
    #2 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&) ../src/kudu/gutil/strings/join.h:175:3 (kudu-tool-test+0x608cf1)
    #3 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9485:5 (kudu-tool-test+0x5dc37d)
    #4 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #5 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #6 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #7 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #8 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #9 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #10 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #11 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #12 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #13 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #14 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

  Previous write of size 8 at 0x7ffeba6aba98 by thread T11 (mutexes: write M179, read M183):
    #0 std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::_ConstructTransaction::~_ConstructTransaction() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:905:19 (kudu-tool-test+0x634853)
    #1 void std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::__construct_one_at_end<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:929:3 (kudu-tool-test+0x6b4ff7)
    #2 std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::push_back(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1656:9 (kudu-tool-test+0x60ad34)
    #3 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:18 (kudu-tool-test+0x69d0e9)
    #4 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #5 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #6 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #7 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #8 kudu::master::RetryingTSRpcTask::RpcCallback() ../src/kudu/master/catalog_manager.cc:4567:5 (libmaster.so+0x32a1bc)
    #9 kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()::operator()() const ../src/kudu/master/catalog_manager.cc:4937:50 (libmaster.so+0x3874d1)
    #10 decltype(std::__1::forward<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()&>(fp)()) std::__1::__invoke<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()&>(kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libmaster.so+0x387461)
    #11 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()&>(kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libmaster.so+0x3873f1)
    #12 std::__1::__function::__alloc_func<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'(), std::__1::allocator<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libmaster.so+0x3873b1)
    #13 std::__1::__function::__func<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'(), std::__1::allocator<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libmaster.so+0x38604d)
    #14 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #15 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #16 kudu::rpc::OutboundCall::CallCallback() ../src/kudu/rpc/outbound_call.cc:309:5 (libkrpc.so+0x17a2d4)
    #17 kudu::rpc::OutboundCall::SetFailed(kudu::Status, kudu::rpc::OutboundCall::Phase, std::__1::unique_ptr<kudu::rpc::ErrorStatusPB, std::__1::default_delete<kudu::rpc::ErrorStatusPB> >) ../src/kudu/rpc/outbound_call.cc:400:3 (libkrpc.so+0x17a889)
    #18 kudu::rpc::Connection::Shutdown(kudu::Status const&, std::__1::unique_ptr<kudu::rpc::ErrorStatusPB, std::__1::default_delete<kudu::rpc::ErrorStatusPB> >) ../src/kudu/rpc/connection.cc:311:16 (libkrpc.so+0x140516)
    #19 kudu::rpc::ReactorThread::DestroyConnection(kudu::rpc::Connection*, kudu::Status const&, std::__1::unique_ptr<kudu::rpc::ErrorStatusPB, std::__1::default_delete<kudu::rpc::ErrorStatusPB> >) ../src/kudu/rpc/reactor.cc:694:9 (libkrpc.so+0x18dacb)
    #20 kudu::rpc::Connection::ReadHandler(ev::io&, int) ../src/kudu/rpc/connection.cc:672:24 (libkrpc.so+0x1427aa)
    #21 void ev::base<ev_io, ev::io>::method_thunk<kudu::rpc::Connection, &(kudu::rpc::Connection::ReadHandler(ev::io&, int))>(ev_loop*, ev_io*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x14dc6a)
    #22 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #23 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #24 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #25 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #26 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #27 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #28 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #29 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #30 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #31 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #32 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #33 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #34 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Location is stack of main thread.

  Location is global '??' at 0x7ffeba68d000 ([stack]+0x00000001ea98)

  Mutex M179 (0x7ff8f97c3968) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xdde9)
    #2 __cxx_global_var_init.152 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:396:14 (libglog.so.1+0xdde9)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xdde9)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Mutex M183 (0x7ff8f97c3a08) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xded2)
    #2 __cxx_global_var_init.160 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:623:23 (libglog.so.1+0xded2)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xded2)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Thread T11 'rpc reactor-663' (tid=66354, running) created by main thread at:
    #0 pthread_create /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:966 (kudu-tool-test+0x4a52b5)
    #1 kudu::Thread::StartThread(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, unsigned long, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.cc:635:15 (libkudu_util.so+0x42d70a)
    #2 kudu::Thread::Create(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.h:146:12 (libmaster.so+0x2cf9b9)
    #3 kudu::rpc::ReactorThread::Init() ../src/kudu/rpc/reactor.cc:193:10 (libkrpc.so+0x18c03e)
    #4 kudu::rpc::Reactor::Init() ../src/kudu/rpc/reactor.cc:773:18 (libkrpc.so+0x1907c0)
    #5 kudu::rpc::Messenger::Init() ../src/kudu/rpc/messenger.cc:360:5 (libkrpc.so+0x160d6d)
    #6 kudu::rpc::MessengerBuilder::Build(std::__1::shared_ptr<kudu::rpc::Messenger>*) ../src/kudu/rpc/messenger.cc:107:3 (libkrpc.so+0x16082c)
    #7 kudu::server::ServerBase::Init() ../src/kudu/server/server_base.cc:851:3 (libserver_process.so+0x13ed4a)
    #8 kudu::kserver::KuduServer::Init() ../src/kudu/kserver/kserver.cc:144:3 (libkserver.so+0x12eb1)
    #9 kudu::master::Master::Init() ../src/kudu/master/master.cc:291:3 (libmaster.so+0x3f3b40)
    #10 kudu::master::MiniMaster::Start() ../src/kudu/master/mini_master.cc:95:3 (libmaster.so+0x4469b0)
    #11 kudu::cluster::InternalMiniCluster::StartMasters() ../src/kudu/mini-cluster/internal_mini_cluster.cc:176:5 (libmini_cluster.so+0xd18ef)
    #12 kudu::cluster::InternalMiniCluster::Start() ../src/kudu/mini-cluster/internal_mini_cluster.cc:107:3 (libmini_cluster.so+0xd111b)
    #13 kudu::tools::ToolTest::StartMiniCluster(kudu::cluster::InternalMiniClusterOptions) ../src/kudu/tools/kudu-tool-test.cc:1280:3 (kudu-tool-test+0x522eed)
    #14 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9375:3 (kudu-tool-test+0x5db096)
    #15 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #16 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #17 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #18 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #19 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #20 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #21 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #22 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #23 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #24 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #25 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

SUMMARY: ThreadSanitizer: data race /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1544:30 in std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::end() const
==================
==================
WARNING: ThreadSanitizer: data race (pid=66319)
  Read of size 1 at 0x7b6800026a00 by main thread:
    #0 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__is_long() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:1423:39 (kudu-tool-test+0x633aa4)
    #1 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::size() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:947:17 (kudu-tool-test+0x6339e9)
    #2 void JoinStringsIterator<std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> >(std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:209:23 (kudu-tool-test+0x6bc4df)
    #3 void JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:168:3 (kudu-tool-test+0x6bc3f9)
    #4 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&) ../src/kudu/gutil/strings/join.h:175:3 (kudu-tool-test+0x608cf1)
    #5 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9485:5 (kudu-tool-test+0x5dc37d)
    #6 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #7 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #8 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #9 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #10 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #11 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #12 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #13 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #14 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #15 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #16 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

  Previous write of size 8 at 0x7b6800026a00 by thread T152 (mutexes: write M179, read M183):
    #0 operator new(unsigned long) /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cpp:64 (kudu-tool-test+0x520ca7)
    #1 std::__1::__libcpp_allocate(unsigned long, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/new:253:10 (kudu-tool-test+0x627ce6)
    #2 std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >::allocate(unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1789:34 (kudu-tool-test+0x6345f2)
    #3 std::__1::allocator_traits<std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::allocate(std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1525:21 (kudu-tool-test+0x6343e0)
    #4 std::__1::__split_buffer<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&>::__split_buffer(unsigned long, unsigned long, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__split_buffer:318:29 (kudu-tool-test+0x647be4)
    #5 void std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::__push_back_slow_path<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1627:49 (kudu-tool-test+0x6b5089)
    #6 std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::push_back(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1659:9 (kudu-tool-test+0x60ad41)
    #7 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:18 (kudu-tool-test+0x69d0e9)
    #8 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #9 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #10 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #11 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #12 kudu::rpc::Connection::ReadHandler(ev::io&, int) ../src/kudu/rpc/connection.cc (libkrpc.so+0x14277c)
    #13 void ev::base<ev_io, ev::io>::method_thunk<kudu::rpc::Connection, &(kudu::rpc::Connection::ReadHandler(ev::io&, int))>(ev_loop*, ev_io*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x14dc6a)
    #14 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #15 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #16 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #17 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #18 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #19 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #20 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #21 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #22 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #23 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #24 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #25 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #26 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Location is heap block of size 1536 at 0x7b6800026a00 allocated by thread T152:
    #0 operator new(unsigned long) /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cpp:64 (kudu-tool-test+0x520ca7)
    #1 std::__1::__libcpp_allocate(unsigned long, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/new:253:10 (kudu-tool-test+0x627ce6)
    #2 std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >::allocate(unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1789:34 (kudu-tool-test+0x6345f2)
    #3 std::__1::allocator_traits<std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::allocate(std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1525:21 (kudu-tool-test+0x6343e0)
    #4 std::__1::__split_buffer<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&>::__split_buffer(unsigned long, unsigned long, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__split_buffer:318:29 (kudu-tool-test+0x647be4)
    #5 void std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::__push_back_slow_path<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1627:49 (kudu-tool-test+0x6b5089)
    #6 std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::push_back(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1659:9 (kudu-tool-test+0x60ad41)
    #7 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:18 (kudu-tool-test+0x69d0e9)
    #8 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #9 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #10 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #11 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #12 kudu::rpc::Connection::ReadHandler(ev::io&, int) ../src/kudu/rpc/connection.cc (libkrpc.so+0x14277c)
    #13 void ev::base<ev_io, ev::io>::method_thunk<kudu::rpc::Connection, &(kudu::rpc::Connection::ReadHandler(ev::io&, int))>(ev_loop*, ev_io*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x14dc6a)
    #14 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #15 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #16 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #17 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #18 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #19 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #20 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #21 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #22 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #23 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #24 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #25 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #26 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Mutex M179 (0x7ff8f97c3968) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xdde9)
    #2 __cxx_global_var_init.152 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:396:14 (libglog.so.1+0xdde9)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xdde9)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Mutex M183 (0x7ff8f97c3a08) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xded2)
    #2 __cxx_global_var_init.160 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:623:23 (libglog.so.1+0xded2)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xded2)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Thread T152 'rpc reactor-666' (tid=66682, running) created by main thread at:
    #0 pthread_create /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:966 (kudu-tool-test+0x4a52b5)
    #1 kudu::Thread::StartThread(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, unsigned long, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.cc:635:15 (libkudu_util.so+0x42d70a)
    #2 kudu::Thread::Create(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.h:146:12 (libmaster.so+0x2cf9b9)
    #3 kudu::rpc::ReactorThread::Init() ../src/kudu/rpc/reactor.cc:193:10 (libkrpc.so+0x18c03e)
    #4 kudu::rpc::Reactor::Init() ../src/kudu/rpc/reactor.cc:773:18 (libkrpc.so+0x1907c0)
    #5 kudu::rpc::Messenger::Init() ../src/kudu/rpc/messenger.cc:360:5 (libkrpc.so+0x160d6d)
    #6 kudu::rpc::MessengerBuilder::Build(std::__1::shared_ptr<kudu::rpc::Messenger>*) ../src/kudu/rpc/messenger.cc:107:3 (libkrpc.so+0x16082c)
    #7 kudu::server::ServerBase::Init() ../src/kudu/server/server_base.cc:851:3 (libserver_process.so+0x13ed4a)
    #8 kudu::kserver::KuduServer::Init() ../src/kudu/kserver/kserver.cc:144:3 (libkserver.so+0x12eb1)
    #9 kudu::tserver::TabletServer::Init() ../src/kudu/tserver/tablet_server.cc:106:3 (libtserver.so+0x25d062)
    #10 kudu::tserver::MiniTabletServer::Start() ../src/kudu/tserver/mini_tablet_server.cc:106:3 (libtserver.so+0x1e886b)
    #11 kudu::tserver::MiniTabletServer::Restart() ../src/kudu/tserver/mini_tablet_server.cc:131:10 (libtserver.so+0x1e8b08)
    #12 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9441:3 (kudu-tool-test+0x5dbe5b)
    #13 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #14 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #15 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #16 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #17 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #18 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #19 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #20 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #21 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #22 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #23 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

SUMMARY: ThreadSanitizer: data race /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:1423:39 in std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__is_long() const
==================
==================
WARNING: ThreadSanitizer: data race (pid=66319)
  Read of size 8 at 0x7b6800026a08 by main thread:
    #0 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__get_long_size() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:1485:34 (kudu-tool-test+0x633c25)
    #1 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::size() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:947:31 (kudu-tool-test+0x6339f5)
    #2 void JoinStringsIterator<std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> >(std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:209:23 (kudu-tool-test+0x6bc4df)
    #3 void JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:168:3 (kudu-tool-test+0x6bc3f9)
    #4 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&) ../src/kudu/gutil/strings/join.h:175:3 (kudu-tool-test+0x608cf1)
    #5 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9485:5 (kudu-tool-test+0x5dc37d)
    #6 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #7 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #8 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #9 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #10 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #11 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #12 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #13 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #14 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #15 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #16 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

  Previous write of size 8 at 0x7b6800026a08 by thread T152 (mutexes: write M179, read M183):
    #0 operator new(unsigned long) /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cpp:64 (kudu-tool-test+0x520ca7)
    #1 std::__1::__libcpp_allocate(unsigned long, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/new:253:10 (kudu-tool-test+0x627ce6)
    #2 std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >::allocate(unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1789:34 (kudu-tool-test+0x6345f2)
    #3 std::__1::allocator_traits<std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::allocate(std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1525:21 (kudu-tool-test+0x6343e0)
    #4 std::__1::__split_buffer<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&>::__split_buffer(unsigned long, unsigned long, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__split_buffer:318:29 (kudu-tool-test+0x647be4)
    #5 void std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::__push_back_slow_path<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1627:49 (kudu-tool-test+0x6b5089)
    #6 std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::push_back(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1659:9 (kudu-tool-test+0x60ad41)
    #7 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:18 (kudu-tool-test+0x69d0e9)
    #8 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #9 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #10 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #11 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #12 kudu::rpc::Connection::ReadHandler(ev::io&, int) ../src/kudu/rpc/connection.cc (libkrpc.so+0x14277c)
    #13 void ev::base<ev_io, ev::io>::method_thunk<kudu::rpc::Connection, &(kudu::rpc::Connection::ReadHandler(ev::io&, int))>(ev_loop*, ev_io*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x14dc6a)
    #14 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #15 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #16 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #17 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #18 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #19 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #20 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #21 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #22 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #23 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #24 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #25 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #26 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Location is heap block of size 1536 at 0x7b6800026a00 allocated by thread T152:
    #0 operator new(unsigned long) /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cpp:64 (kudu-tool-test+0x520ca7)
    #1 std::__1::__libcpp_allocate(unsigned long, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/new:253:10 (kudu-tool-test+0x627ce6)
    #2 std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >::allocate(unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1789:34 (kudu-tool-test+0x6345f2)
    #3 std::__1::allocator_traits<std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::allocate(std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1525:21 (kudu-tool-test+0x6343e0)
    #4 std::__1::__split_buffer<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&>::__split_buffer(unsigned long, unsigned long, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__split_buffer:318:29 (kudu-tool-test+0x647be4)
    #5 void std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::__push_back_slow_path<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1627:49 (kudu-tool-test+0x6b5089)
    #6 std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::push_back(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1659:9 (kudu-tool-test+0x60ad41)
    #7 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:18 (kudu-tool-test+0x69d0e9)
    #8 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #9 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #10 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #11 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #12 kudu::rpc::Connection::ReadHandler(ev::io&, int) ../src/kudu/rpc/connection.cc (libkrpc.so+0x14277c)
    #13 void ev::base<ev_io, ev::io>::method_thunk<kudu::rpc::Connection, &(kudu::rpc::Connection::ReadHandler(ev::io&, int))>(ev_loop*, ev_io*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x14dc6a)
    #14 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #15 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #16 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #17 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #18 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #19 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #20 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #21 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #22 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #23 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #24 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #25 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #26 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Mutex M179 (0x7ff8f97c3968) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xdde9)
    #2 __cxx_global_var_init.152 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:396:14 (libglog.so.1+0xdde9)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xdde9)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Mutex M183 (0x7ff8f97c3a08) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xded2)
    #2 __cxx_global_var_init.160 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:623:23 (libglog.so.1+0xded2)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xded2)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Thread T152 'rpc reactor-666' (tid=66682, running) created by main thread at:
    #0 pthread_create /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:966 (kudu-tool-test+0x4a52b5)
    #1 kudu::Thread::StartThread(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, unsigned long, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.cc:635:15 (libkudu_util.so+0x42d70a)
    #2 kudu::Thread::Create(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.h:146:12 (libmaster.so+0x2cf9b9)
    #3 kudu::rpc::ReactorThread::Init() ../src/kudu/rpc/reactor.cc:193:10 (libkrpc.so+0x18c03e)
    #4 kudu::rpc::Reactor::Init() ../src/kudu/rpc/reactor.cc:773:18 (libkrpc.so+0x1907c0)
    #5 kudu::rpc::Messenger::Init() ../src/kudu/rpc/messenger.cc:360:5 (libkrpc.so+0x160d6d)
    #6 kudu::rpc::MessengerBuilder::Build(std::__1::shared_ptr<kudu::rpc::Messenger>*) ../src/kudu/rpc/messenger.cc:107:3 (libkrpc.so+0x16082c)
    #7 kudu::server::ServerBase::Init() ../src/kudu/server/server_base.cc:851:3 (libserver_process.so+0x13ed4a)
    #8 kudu::kserver::KuduServer::Init() ../src/kudu/kserver/kserver.cc:144:3 (libkserver.so+0x12eb1)
    #9 kudu::tserver::TabletServer::Init() ../src/kudu/tserver/tablet_server.cc:106:3 (libtserver.so+0x25d062)
    #10 kudu::tserver::MiniTabletServer::Start() ../src/kudu/tserver/mini_tablet_server.cc:106:3 (libtserver.so+0x1e886b)
    #11 kudu::tserver::MiniTabletServer::Restart() ../src/kudu/tserver/mini_tablet_server.cc:131:10 (libtserver.so+0x1e8b08)
    #12 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9441:3 (kudu-tool-test+0x5dbe5b)
    #13 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #14 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #15 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #16 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #17 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #18 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #19 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #20 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #21 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #22 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #23 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

SUMMARY: ThreadSanitizer: data race /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:1485:34 in std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__get_long_size() const
==================
==================
WARNING: ThreadSanitizer: data race (pid=66319)
  Read of size 1 at 0x7b6800026d18 by main thread:
    #0 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__is_long() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:1423:39 (kudu-tool-test+0x633aa4)
    #1 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::size() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:947:17 (kudu-tool-test+0x6339e9)
    #2 void JoinStringsIterator<std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> >(std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:209:23 (kudu-tool-test+0x6bc4df)
    #3 void JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:168:3 (kudu-tool-test+0x6bc3f9)
    #4 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&) ../src/kudu/gutil/strings/join.h:175:3 (kudu-tool-test+0x608cf1)
    #5 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9485:5 (kudu-tool-test+0x5dc37d)
    #6 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #7 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #8 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #9 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #10 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #11 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #12 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #13 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #14 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #15 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #16 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

  Previous write of size 8 at 0x7b6800026d18 by thread T152 (mutexes: write M179, read M183):
    #0 memcpy sanitizer_common/sanitizer_common_interceptors.inc:808 (kudu-tool-test+0x4a916c)
    #1 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::basic_string(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:1936:7 (kudu-tool-test+0x62ea0d)
    #2 void std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >::construct<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1809:31 (kudu-tool-test+0x648498)
    #3 void std::__1::allocator_traits<std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::__construct<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::integral_constant<bool, true>, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1687:21 (kudu-tool-test+0x648451)
    #4 void std::__1::allocator_traits<std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::construct<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1538:14 (kudu-tool-test+0x6483c1)
    #5 void std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::__construct_one_at_end<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:926:5 (kudu-tool-test+0x6b4fe9)
    #6 std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::push_back(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1656:9 (kudu-tool-test+0x60ad34)
    #7 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:18 (kudu-tool-test+0x69d0e9)
    #8 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #9 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #10 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #11 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #12 kudu::rpc::Connection::Shutdown(kudu::Status const&, std::__1::unique_ptr<kudu::rpc::ErrorStatusPB, std::__1::default_delete<kudu::rpc::ErrorStatusPB> >) ../src/kudu/rpc/connection.cc:295:5 (libkrpc.so+0x1403c2)
    #13 kudu::rpc::ReactorThread::DestroyConnection(kudu::rpc::Connection*, kudu::Status const&, std::__1::unique_ptr<kudu::rpc::ErrorStatusPB, std::__1::default_delete<kudu::rpc::ErrorStatusPB> >) ../src/kudu/rpc/reactor.cc:694:9 (libkrpc.so+0x18dacb)
    #14 kudu::rpc::Connection::ReadHandler(ev::io&, int) ../src/kudu/rpc/connection.cc:672:24 (libkrpc.so+0x1427aa)
    #15 void ev::base<ev_io, ev::io>::method_thunk<kudu::rpc::Connection, &(kudu::rpc::Connection::ReadHandler(ev::io&, int))>(ev_loop*, ev_io*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x14dc6a)
    #16 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #17 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #18 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #19 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #20 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #21 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #22 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #23 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #24 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #25 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #26 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #27 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #28 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Location is heap block of size 1536 at 0x7b6800026a00 allocated by thread T152:
    #0 operator new(unsigned long) /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cpp:64 (kudu-tool-test+0x520ca7)
    #1 std::__1::__libcpp_allocate(unsigned long, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/new:253:10 (kudu-tool-test+0x627ce6)
    #2 std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >::allocate(unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1789:34 (kudu-tool-test+0x6345f2)
    #3 std::__1::allocator_traits<std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::allocate(std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1525:21 (kudu-tool-test+0x6343e0)
    #4 std::__1::__split_buffer<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&>::__split_buffer(unsigned long, unsigned long, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__split_buffer:318:29 (kudu-tool-test+0x647be4)
    #5 void std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::__push_back_slow_path<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1627:49 (kudu-tool-test+0x6b5089)
    #6 std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::push_back(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1659:9 (kudu-tool-test+0x60ad41)
    #7 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:18 (kudu-tool-test+0x69d0e9)
    #8 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #9 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #10 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #11 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #12 kudu::rpc::Connection::ReadHandler(ev::io&, int) ../src/kudu/rpc/connection.cc (libkrpc.so+0x14277c)
    #13 void ev::base<ev_io, ev::io>::method_thunk<kudu::rpc::Connection, &(kudu::rpc::Connection::ReadHandler(ev::io&, int))>(ev_loop*, ev_io*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x14dc6a)
    #14 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #15 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #16 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #17 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #18 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #19 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #20 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #21 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #22 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #23 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #24 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #25 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #26 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Mutex M179 (0x7ff8f97c3968) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xdde9)
    #2 __cxx_global_var_init.152 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:396:14 (libglog.so.1+0xdde9)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xdde9)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Mutex M183 (0x7ff8f97c3a08) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xded2)
    #2 __cxx_global_var_init.160 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:623:23 (libglog.so.1+0xded2)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xded2)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Thread T152 'rpc reactor-666' (tid=66682, running) created by main thread at:
    #0 pthread_create /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:966 (kudu-tool-test+0x4a52b5)
    #1 kudu::Thread::StartThread(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, unsigned long, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.cc:635:15 (libkudu_util.so+0x42d70a)
    #2 kudu::Thread::Create(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.h:146:12 (libmaster.so+0x2cf9b9)
    #3 kudu::rpc::ReactorThread::Init() ../src/kudu/rpc/reactor.cc:193:10 (libkrpc.so+0x18c03e)
    #4 kudu::rpc::Reactor::Init() ../src/kudu/rpc/reactor.cc:773:18 (libkrpc.so+0x1907c0)
    #5 kudu::rpc::Messenger::Init() ../src/kudu/rpc/messenger.cc:360:5 (libkrpc.so+0x160d6d)
    #6 kudu::rpc::MessengerBuilder::Build(std::__1::shared_ptr<kudu::rpc::Messenger>*) ../src/kudu/rpc/messenger.cc:107:3 (libkrpc.so+0x16082c)
    #7 kudu::server::ServerBase::Init() ../src/kudu/server/server_base.cc:851:3 (libserver_process.so+0x13ed4a)
    #8 kudu::kserver::KuduServer::Init() ../src/kudu/kserver/kserver.cc:144:3 (libkserver.so+0x12eb1)
    #9 kudu::tserver::TabletServer::Init() ../src/kudu/tserver/tablet_server.cc:106:3 (libtserver.so+0x25d062)
    #10 kudu::tserver::MiniTabletServer::Start() ../src/kudu/tserver/mini_tablet_server.cc:106:3 (libtserver.so+0x1e886b)
    #11 kudu::tserver::MiniTabletServer::Restart() ../src/kudu/tserver/mini_tablet_server.cc:131:10 (libtserver.so+0x1e8b08)
    #12 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9441:3 (kudu-tool-test+0x5dbe5b)
    #13 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #14 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #15 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #16 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #17 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #18 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #19 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #20 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #21 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #22 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #23 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

SUMMARY: ThreadSanitizer: data race /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:1423:39 in std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__is_long() const
==================
==================
WARNING: ThreadSanitizer: data race (pid=66319)
  Read of size 8 at 0x7b6800026d20 by main thread:
    #0 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__get_long_size() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:1485:34 (kudu-tool-test+0x633c25)
    #1 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::size() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:947:31 (kudu-tool-test+0x6339f5)
    #2 void JoinStringsIterator<std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> >(std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:209:23 (kudu-tool-test+0x6bc4df)
    #3 void JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:168:3 (kudu-tool-test+0x6bc3f9)
    #4 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&) ../src/kudu/gutil/strings/join.h:175:3 (kudu-tool-test+0x608cf1)
    #5 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9485:5 (kudu-tool-test+0x5dc37d)
    #6 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #7 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #8 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #9 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #10 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #11 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #12 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #13 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #14 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #15 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #16 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

  Previous write of size 8 at 0x7b6800026d20 by thread T152 (mutexes: write M179, read M183):
    #0 memcpy sanitizer_common/sanitizer_common_interceptors.inc:808 (kudu-tool-test+0x4a916c)
    #1 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::basic_string(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:1936:7 (kudu-tool-test+0x62ea0d)
    #2 void std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >::construct<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1809:31 (kudu-tool-test+0x648498)
    #3 void std::__1::allocator_traits<std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::__construct<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::integral_constant<bool, true>, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1687:21 (kudu-tool-test+0x648451)
    #4 void std::__1::allocator_traits<std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::construct<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1538:14 (kudu-tool-test+0x6483c1)
    #5 void std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::__construct_one_at_end<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:926:5 (kudu-tool-test+0x6b4fe9)
    #6 std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::push_back(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1656:9 (kudu-tool-test+0x60ad34)
    #7 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:18 (kudu-tool-test+0x69d0e9)
    #8 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #9 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #10 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #11 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #12 kudu::rpc::Connection::Shutdown(kudu::Status const&, std::__1::unique_ptr<kudu::rpc::ErrorStatusPB, std::__1::default_delete<kudu::rpc::ErrorStatusPB> >) ../src/kudu/rpc/connection.cc:295:5 (libkrpc.so+0x1403c2)
    #13 kudu::rpc::ReactorThread::DestroyConnection(kudu::rpc::Connection*, kudu::Status const&, std::__1::unique_ptr<kudu::rpc::ErrorStatusPB, std::__1::default_delete<kudu::rpc::ErrorStatusPB> >) ../src/kudu/rpc/reactor.cc:694:9 (libkrpc.so+0x18dacb)
    #14 kudu::rpc::Connection::ReadHandler(ev::io&, int) ../src/kudu/rpc/connection.cc:672:24 (libkrpc.so+0x1427aa)
    #15 void ev::base<ev_io, ev::io>::method_thunk<kudu::rpc::Connection, &(kudu::rpc::Connection::ReadHandler(ev::io&, int))>(ev_loop*, ev_io*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x14dc6a)
    #16 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #17 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #18 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #19 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #20 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #21 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #22 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #23 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #24 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #25 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #26 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #27 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #28 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Location is heap block of size 1536 at 0x7b6800026a00 allocated by thread T152:
    #0 operator new(unsigned long) /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cpp:64 (kudu-tool-test+0x520ca7)
    #1 std::__1::__libcpp_allocate(unsigned long, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/new:253:10 (kudu-tool-test+0x627ce6)
    #2 std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >::allocate(unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1789:34 (kudu-tool-test+0x6345f2)
    #3 std::__1::allocator_traits<std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::allocate(std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1525:21 (kudu-tool-test+0x6343e0)
    #4 std::__1::__split_buffer<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&>::__split_buffer(unsigned long, unsigned long, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__split_buffer:318:29 (kudu-tool-test+0x647be4)
    #5 void std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::__push_back_slow_path<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1627:49 (kudu-tool-test+0x6b5089)
    #6 std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::push_back(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1659:9 (kudu-tool-test+0x60ad41)
    #7 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:18 (kudu-tool-test+0x69d0e9)
    #8 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #9 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #10 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #11 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #12 kudu::rpc::Connection::ReadHandler(ev::io&, int) ../src/kudu/rpc/connection.cc (libkrpc.so+0x14277c)
    #13 void ev::base<ev_io, ev::io>::method_thunk<kudu::rpc::Connection, &(kudu::rpc::Connection::ReadHandler(ev::io&, int))>(ev_loop*, ev_io*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x14dc6a)
    #14 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #15 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #16 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #17 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #18 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #19 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #20 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #21 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #22 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #23 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #24 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #25 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #26 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Mutex M179 (0x7ff8f97c3968) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xdde9)
    #2 __cxx_global_var_init.152 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:396:14 (libglog.so.1+0xdde9)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xdde9)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Mutex M183 (0x7ff8f97c3a08) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xded2)
    #2 __cxx_global_var_init.160 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:623:23 (libglog.so.1+0xded2)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xded2)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Thread T152 'rpc reactor-666' (tid=66682, running) created by main thread at:
    #0 pthread_create /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:966 (kudu-tool-test+0x4a52b5)
    #1 kudu::Thread::StartThread(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, unsigned long, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.cc:635:15 (libkudu_util.so+0x42d70a)
    #2 kudu::Thread::Create(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.h:146:12 (libmaster.so+0x2cf9b9)
    #3 kudu::rpc::ReactorThread::Init() ../src/kudu/rpc/reactor.cc:193:10 (libkrpc.so+0x18c03e)
    #4 kudu::rpc::Reactor::Init() ../src/kudu/rpc/reactor.cc:773:18 (libkrpc.so+0x1907c0)
    #5 kudu::rpc::Messenger::Init() ../src/kudu/rpc/messenger.cc:360:5 (libkrpc.so+0x160d6d)
    #6 kudu::rpc::MessengerBuilder::Build(std::__1::shared_ptr<kudu::rpc::Messenger>*) ../src/kudu/rpc/messenger.cc:107:3 (libkrpc.so+0x16082c)
    #7 kudu::server::ServerBase::Init() ../src/kudu/server/server_base.cc:851:3 (libserver_process.so+0x13ed4a)
    #8 kudu::kserver::KuduServer::Init() ../src/kudu/kserver/kserver.cc:144:3 (libkserver.so+0x12eb1)
    #9 kudu::tserver::TabletServer::Init() ../src/kudu/tserver/tablet_server.cc:106:3 (libtserver.so+0x25d062)
    #10 kudu::tserver::MiniTabletServer::Start() ../src/kudu/tserver/mini_tablet_server.cc:106:3 (libtserver.so+0x1e886b)
    #11 kudu::tserver::MiniTabletServer::Restart() ../src/kudu/tserver/mini_tablet_server.cc:131:10 (libtserver.so+0x1e8b08)
    #12 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9441:3 (kudu-tool-test+0x5dbe5b)
    #13 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #14 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #15 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #16 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #17 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #18 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #19 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #20 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #21 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #22 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #23 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

SUMMARY: ThreadSanitizer: data race /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:1485:34 in std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__get_long_size() const
==================
==================
WARNING: ThreadSanitizer: data race (pid=66319)
  Read of size 1 at 0x7b6800026d30 by main thread:
    #0 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__is_long() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:1423:39 (kudu-tool-test+0x633aa4)
    #1 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::size() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:947:17 (kudu-tool-test+0x6339e9)
    #2 void JoinStringsIterator<std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> >(std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:209:23 (kudu-tool-test+0x6bc4df)
    #3 void JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:168:3 (kudu-tool-test+0x6bc3f9)
    #4 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&) ../src/kudu/gutil/strings/join.h:175:3 (kudu-tool-test+0x608cf1)
    #5 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9485:5 (kudu-tool-test+0x5dc37d)
    #6 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #7 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #8 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #9 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #10 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #11 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #12 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #13 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #14 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #15 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #16 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

  Previous write of size 8 at 0x7b6800026d30 by thread T11 (mutexes: write M179, read M183):
    #0 memcpy sanitizer_common/sanitizer_common_interceptors.inc:808 (kudu-tool-test+0x4a916c)
    #1 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::basic_string(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:1936:7 (kudu-tool-test+0x62ea0d)
    #2 void std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >::construct<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1809:31 (kudu-tool-test+0x648498)
    #3 void std::__1::allocator_traits<std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::__construct<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::integral_constant<bool, true>, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1687:21 (kudu-tool-test+0x648451)
    #4 void std::__1::allocator_traits<std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::construct<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1538:14 (kudu-tool-test+0x6483c1)
    #5 void std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::__construct_one_at_end<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:926:5 (kudu-tool-test+0x6b4fe9)
    #6 std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::push_back(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1656:9 (kudu-tool-test+0x60ad34)
    #7 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:18 (kudu-tool-test+0x69d0e9)
    #8 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #9 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #10 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #11 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #12 kudu::rpc::Connection::ReadHandler(ev::io&, int) ../src/kudu/rpc/connection.cc (libkrpc.so+0x14277c)
    #13 void ev::base<ev_io, ev::io>::method_thunk<kudu::rpc::Connection, &(kudu::rpc::Connection::ReadHandler(ev::io&, int))>(ev_loop*, ev_io*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x14dc6a)
    #14 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #15 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #16 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #17 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #18 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #19 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #20 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #21 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #22 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #23 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #24 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #25 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #26 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Location is heap block of size 1536 at 0x7b6800026a00 allocated by thread T152:
    #0 operator new(unsigned long) /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cpp:64 (kudu-tool-test+0x520ca7)
    #1 std::__1::__libcpp_allocate(unsigned long, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/new:253:10 (kudu-tool-test+0x627ce6)
    #2 std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >::allocate(unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1789:34 (kudu-tool-test+0x6345f2)
    #3 std::__1::allocator_traits<std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::allocate(std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1525:21 (kudu-tool-test+0x6343e0)
    #4 std::__1::__split_buffer<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&>::__split_buffer(unsigned long, unsigned long, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__split_buffer:318:29 (kudu-tool-test+0x647be4)
    #5 void std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::__push_back_slow_path<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1627:49 (kudu-tool-test+0x6b5089)
    #6 std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::push_back(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1659:9 (kudu-tool-test+0x60ad41)
    #7 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:18 (kudu-tool-test+0x69d0e9)
    #8 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #9 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #10 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #11 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #12 kudu::rpc::Connection::ReadHandler(ev::io&, int) ../src/kudu/rpc/connection.cc (libkrpc.so+0x14277c)
    #13 void ev::base<ev_io, ev::io>::method_thunk<kudu::rpc::Connection, &(kudu::rpc::Connection::ReadHandler(ev::io&, int))>(ev_loop*, ev_io*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x14dc6a)
    #14 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #15 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #16 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #17 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #18 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #19 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #20 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #21 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #22 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #23 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #24 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #25 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #26 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Mutex M179 (0x7ff8f97c3968) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xdde9)
    #2 __cxx_global_var_init.152 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:396:14 (libglog.so.1+0xdde9)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xdde9)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Mutex M183 (0x7ff8f97c3a08) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xded2)
    #2 __cxx_global_var_init.160 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:623:23 (libglog.so.1+0xded2)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xded2)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Thread T11 'rpc reactor-663' (tid=66354, running) created by main thread at:
    #0 pthread_create /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:966 (kudu-tool-test+0x4a52b5)
    #1 kudu::Thread::StartThread(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, unsigned long, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.cc:635:15 (libkudu_util.so+0x42d70a)
    #2 kudu::Thread::Create(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.h:146:12 (libmaster.so+0x2cf9b9)
    #3 kudu::rpc::ReactorThread::Init() ../src/kudu/rpc/reactor.cc:193:10 (libkrpc.so+0x18c03e)
    #4 kudu::rpc::Reactor::Init() ../src/kudu/rpc/reactor.cc:773:18 (libkrpc.so+0x1907c0)
    #5 kudu::rpc::Messenger::Init() ../src/kudu/rpc/messenger.cc:360:5 (libkrpc.so+0x160d6d)
    #6 kudu::rpc::MessengerBuilder::Build(std::__1::shared_ptr<kudu::rpc::Messenger>*) ../src/kudu/rpc/messenger.cc:107:3 (libkrpc.so+0x16082c)
    #7 kudu::server::ServerBase::Init() ../src/kudu/server/server_base.cc:851:3 (libserver_process.so+0x13ed4a)
    #8 kudu::kserver::KuduServer::Init() ../src/kudu/kserver/kserver.cc:144:3 (libkserver.so+0x12eb1)
    #9 kudu::master::Master::Init() ../src/kudu/master/master.cc:291:3 (libmaster.so+0x3f3b40)
    #10 kudu::master::MiniMaster::Start() ../src/kudu/master/mini_master.cc:95:3 (libmaster.so+0x4469b0)
    #11 kudu::cluster::InternalMiniCluster::StartMasters() ../src/kudu/mini-cluster/internal_mini_cluster.cc:176:5 (libmini_cluster.so+0xd18ef)
    #12 kudu::cluster::InternalMiniCluster::Start() ../src/kudu/mini-cluster/internal_mini_cluster.cc:107:3 (libmini_cluster.so+0xd111b)
    #13 kudu::tools::ToolTest::StartMiniCluster(kudu::cluster::InternalMiniClusterOptions) ../src/kudu/tools/kudu-tool-test.cc:1280:3 (kudu-tool-test+0x522eed)
    #14 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9375:3 (kudu-tool-test+0x5db096)
    #15 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #16 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #17 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #18 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #19 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #20 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #21 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #22 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #23 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #24 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #25 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

  Thread T152 'rpc reactor-666' (tid=66682, running) created by main thread at:
    #0 pthread_create /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:966 (kudu-tool-test+0x4a52b5)
    #1 kudu::Thread::StartThread(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, unsigned long, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.cc:635:15 (libkudu_util.so+0x42d70a)
    #2 kudu::Thread::Create(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.h:146:12 (libmaster.so+0x2cf9b9)
    #3 kudu::rpc::ReactorThread::Init() ../src/kudu/rpc/reactor.cc:193:10 (libkrpc.so+0x18c03e)
    #4 kudu::rpc::Reactor::Init() ../src/kudu/rpc/reactor.cc:773:18 (libkrpc.so+0x1907c0)
    #5 kudu::rpc::Messenger::Init() ../src/kudu/rpc/messenger.cc:360:5 (libkrpc.so+0x160d6d)
    #6 kudu::rpc::MessengerBuilder::Build(std::__1::shared_ptr<kudu::rpc::Messenger>*) ../src/kudu/rpc/messenger.cc:107:3 (libkrpc.so+0x16082c)
    #7 kudu::server::ServerBase::Init() ../src/kudu/server/server_base.cc:851:3 (libserver_process.so+0x13ed4a)
    #8 kudu::kserver::KuduServer::Init() ../src/kudu/kserver/kserver.cc:144:3 (libkserver.so+0x12eb1)
    #9 kudu::tserver::TabletServer::Init() ../src/kudu/tserver/tablet_server.cc:106:3 (libtserver.so+0x25d062)
    #10 kudu::tserver::MiniTabletServer::Start() ../src/kudu/tserver/mini_tablet_server.cc:106:3 (libtserver.so+0x1e886b)
    #11 kudu::tserver::MiniTabletServer::Restart() ../src/kudu/tserver/mini_tablet_server.cc:131:10 (libtserver.so+0x1e8b08)
    #12 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9441:3 (kudu-tool-test+0x5dbe5b)
    #13 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #14 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #15 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #16 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #17 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #18 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #19 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #20 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #21 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #22 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #23 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

SUMMARY: ThreadSanitizer: data race /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:1423:39 in std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__is_long() const
==================
==================
WARNING: ThreadSanitizer: data race (pid=66319)
  Read of size 8 at 0x7b6800026d38 by main thread:
    #0 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__get_long_size() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:1485:34 (kudu-tool-test+0x633c25)
    #1 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::size() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:947:31 (kudu-tool-test+0x6339f5)
    #2 void JoinStringsIterator<std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> >(std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:209:23 (kudu-tool-test+0x6bc4df)
    #3 void JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:168:3 (kudu-tool-test+0x6bc3f9)
    #4 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&) ../src/kudu/gutil/strings/join.h:175:3 (kudu-tool-test+0x608cf1)
    #5 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9485:5 (kudu-tool-test+0x5dc37d)
    #6 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #7 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #8 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #9 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #10 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #11 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #12 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #13 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #14 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #15 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #16 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

  Previous write of size 8 at 0x7b6800026d38 by thread T11 (mutexes: write M179, read M183):
    #0 memcpy sanitizer_common/sanitizer_common_interceptors.inc:808 (kudu-tool-test+0x4a916c)
    #1 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::basic_string(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:1936:7 (kudu-tool-test+0x62ea0d)
    #2 void std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >::construct<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1809:31 (kudu-tool-test+0x648498)
    #3 void std::__1::allocator_traits<std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::__construct<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::integral_constant<bool, true>, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1687:21 (kudu-tool-test+0x648451)
    #4 void std::__1::allocator_traits<std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::construct<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1538:14 (kudu-tool-test+0x6483c1)
    #5 void std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::__construct_one_at_end<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:926:5 (kudu-tool-test+0x6b4fe9)
    #6 std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::push_back(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1656:9 (kudu-tool-test+0x60ad34)
    #7 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:18 (kudu-tool-test+0x69d0e9)
    #8 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #9 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #10 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #11 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #12 kudu::rpc::Connection::ReadHandler(ev::io&, int) ../src/kudu/rpc/connection.cc (libkrpc.so+0x14277c)
    #13 void ev::base<ev_io, ev::io>::method_thunk<kudu::rpc::Connection, &(kudu::rpc::Connection::ReadHandler(ev::io&, int))>(ev_loop*, ev_io*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x14dc6a)
    #14 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #15 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #16 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #17 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #18 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #19 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #20 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #21 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #22 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #23 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #24 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #25 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #26 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Location is heap block of size 1536 at 0x7b6800026a00 allocated by thread T152:
    #0 operator new(unsigned long) /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cpp:64 (kudu-tool-test+0x520ca7)
    #1 std::__1::__libcpp_allocate(unsigned long, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/new:253:10 (kudu-tool-test+0x627ce6)
    #2 std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >::allocate(unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1789:34 (kudu-tool-test+0x6345f2)
    #3 std::__1::allocator_traits<std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::allocate(std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1525:21 (kudu-tool-test+0x6343e0)
    #4 std::__1::__split_buffer<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&>::__split_buffer(unsigned long, unsigned long, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__split_buffer:318:29 (kudu-tool-test+0x647be4)
    #5 void std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::__push_back_slow_path<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1627:49 (kudu-tool-test+0x6b5089)
    #6 std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::push_back(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1659:9 (kudu-tool-test+0x60ad41)
    #7 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:18 (kudu-tool-test+0x69d0e9)
    #8 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #9 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #10 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #11 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #12 kudu::rpc::Connection::ReadHandler(ev::io&, int) ../src/kudu/rpc/connection.cc (libkrpc.so+0x14277c)
    #13 void ev::base<ev_io, ev::io>::method_thunk<kudu::rpc::Connection, &(kudu::rpc::Connection::ReadHandler(ev::io&, int))>(ev_loop*, ev_io*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x14dc6a)
    #14 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #15 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #16 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #17 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #18 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #19 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #20 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #21 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #22 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #23 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #24 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #25 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #26 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Mutex M179 (0x7ff8f97c3968) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xdde9)
    #2 __cxx_global_var_init.152 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:396:14 (libglog.so.1+0xdde9)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xdde9)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Mutex M183 (0x7ff8f97c3a08) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xded2)
    #2 __cxx_global_var_init.160 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:623:23 (libglog.so.1+0xded2)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xded2)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Thread T11 'rpc reactor-663' (tid=66354, running) created by main thread at:
    #0 pthread_create /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:966 (kudu-tool-test+0x4a52b5)
    #1 kudu::Thread::StartThread(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, unsigned long, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.cc:635:15 (libkudu_util.so+0x42d70a)
    #2 kudu::Thread::Create(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.h:146:12 (libmaster.so+0x2cf9b9)
    #3 kudu::rpc::ReactorThread::Init() ../src/kudu/rpc/reactor.cc:193:10 (libkrpc.so+0x18c03e)
    #4 kudu::rpc::Reactor::Init() ../src/kudu/rpc/reactor.cc:773:18 (libkrpc.so+0x1907c0)
    #5 kudu::rpc::Messenger::Init() ../src/kudu/rpc/messenger.cc:360:5 (libkrpc.so+0x160d6d)
    #6 kudu::rpc::MessengerBuilder::Build(std::__1::shared_ptr<kudu::rpc::Messenger>*) ../src/kudu/rpc/messenger.cc:107:3 (libkrpc.so+0x16082c)
    #7 kudu::server::ServerBase::Init() ../src/kudu/server/server_base.cc:851:3 (libserver_process.so+0x13ed4a)
    #8 kudu::kserver::KuduServer::Init() ../src/kudu/kserver/kserver.cc:144:3 (libkserver.so+0x12eb1)
    #9 kudu::master::Master::Init() ../src/kudu/master/master.cc:291:3 (libmaster.so+0x3f3b40)
    #10 kudu::master::MiniMaster::Start() ../src/kudu/master/mini_master.cc:95:3 (libmaster.so+0x4469b0)
    #11 kudu::cluster::InternalMiniCluster::StartMasters() ../src/kudu/mini-cluster/internal_mini_cluster.cc:176:5 (libmini_cluster.so+0xd18ef)
    #12 kudu::cluster::InternalMiniCluster::Start() ../src/kudu/mini-cluster/internal_mini_cluster.cc:107:3 (libmini_cluster.so+0xd111b)
    #13 kudu::tools::ToolTest::StartMiniCluster(kudu::cluster::InternalMiniClusterOptions) ../src/kudu/tools/kudu-tool-test.cc:1280:3 (kudu-tool-test+0x522eed)
    #14 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9375:3 (kudu-tool-test+0x5db096)
    #15 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #16 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #17 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #18 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #19 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #20 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #21 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #22 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #23 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #24 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #25 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

  Thread T152 'rpc reactor-666' (tid=66682, running) created by main thread at:
    #0 pthread_create /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:966 (kudu-tool-test+0x4a52b5)
    #1 kudu::Thread::StartThread(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, unsigned long, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.cc:635:15 (libkudu_util.so+0x42d70a)
    #2 kudu::Thread::Create(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.h:146:12 (libmaster.so+0x2cf9b9)
    #3 kudu::rpc::ReactorThread::Init() ../src/kudu/rpc/reactor.cc:193:10 (libkrpc.so+0x18c03e)
    #4 kudu::rpc::Reactor::Init() ../src/kudu/rpc/reactor.cc:773:18 (libkrpc.so+0x1907c0)
    #5 kudu::rpc::Messenger::Init() ../src/kudu/rpc/messenger.cc:360:5 (libkrpc.so+0x160d6d)
    #6 kudu::rpc::MessengerBuilder::Build(std::__1::shared_ptr<kudu::rpc::Messenger>*) ../src/kudu/rpc/messenger.cc:107:3 (libkrpc.so+0x16082c)
    #7 kudu::server::ServerBase::Init() ../src/kudu/server/server_base.cc:851:3 (libserver_process.so+0x13ed4a)
    #8 kudu::kserver::KuduServer::Init() ../src/kudu/kserver/kserver.cc:144:3 (libkserver.so+0x12eb1)
    #9 kudu::tserver::TabletServer::Init() ../src/kudu/tserver/tablet_server.cc:106:3 (libtserver.so+0x25d062)
    #10 kudu::tserver::MiniTabletServer::Start() ../src/kudu/tserver/mini_tablet_server.cc:106:3 (libtserver.so+0x1e886b)
    #11 kudu::tserver::MiniTabletServer::Restart() ../src/kudu/tserver/mini_tablet_server.cc:131:10 (libtserver.so+0x1e8b08)
    #12 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9441:3 (kudu-tool-test+0x5dbe5b)
    #13 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #14 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #15 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #16 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #17 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #18 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #19 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #20 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #21 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #22 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #23 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

SUMMARY: ThreadSanitizer: data race /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:1485:34 in std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__get_long_size() const
==================
==================
WARNING: ThreadSanitizer: data race (pid=66319)
  Read of size 1 at 0x7b6800026d48 by main thread:
    #0 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__is_long() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:1423:39 (kudu-tool-test+0x633aa4)
    #1 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::size() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:947:17 (kudu-tool-test+0x6339e9)
    #2 void JoinStringsIterator<std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> >(std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:209:23 (kudu-tool-test+0x6bc4df)
    #3 void JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:168:3 (kudu-tool-test+0x6bc3f9)
    #4 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&) ../src/kudu/gutil/strings/join.h:175:3 (kudu-tool-test+0x608cf1)
    #5 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9485:5 (kudu-tool-test+0x5dc37d)
    #6 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #7 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #8 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #9 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #10 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #11 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #12 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #13 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #14 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #15 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #16 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

  Previous write of size 8 at 0x7b6800026d48 by thread T11 (mutexes: write M179, read M183):
    #0 memcpy sanitizer_common/sanitizer_common_interceptors.inc:808 (kudu-tool-test+0x4a916c)
    #1 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::basic_string(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:1936:7 (kudu-tool-test+0x62ea0d)
    #2 void std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >::construct<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1809:31 (kudu-tool-test+0x648498)
    #3 void std::__1::allocator_traits<std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::__construct<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::integral_constant<bool, true>, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1687:21 (kudu-tool-test+0x648451)
    #4 void std::__1::allocator_traits<std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::construct<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1538:14 (kudu-tool-test+0x6483c1)
    #5 void std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::__construct_one_at_end<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:926:5 (kudu-tool-test+0x6b4fe9)
    #6 std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::push_back(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1656:9 (kudu-tool-test+0x60ad34)
    #7 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:18 (kudu-tool-test+0x69d0e9)
    #8 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #9 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #10 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #11 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #12 kudu::master::RetryingTSRpcTask::RpcCallback() ../src/kudu/master/catalog_manager.cc:4567:5 (libmaster.so+0x32a1bc)
    #13 kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()::operator()() const ../src/kudu/master/catalog_manager.cc:4937:50 (libmaster.so+0x3874d1)
    #14 decltype(std::__1::forward<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()&>(fp)()) std::__1::__invoke<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()&>(kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libmaster.so+0x387461)
    #15 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()&>(kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libmaster.so+0x3873f1)
    #16 std::__1::__function::__alloc_func<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'(), std::__1::allocator<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libmaster.so+0x3873b1)
    #17 std::__1::__function::__func<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'(), std::__1::allocator<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libmaster.so+0x38604d)
    #18 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #19 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #20 kudu::rpc::OutboundCall::CallCallback() ../src/kudu/rpc/outbound_call.cc:309:5 (libkrpc.so+0x17a2d4)
    #21 kudu::rpc::OutboundCall::SetFailed(kudu::Status, kudu::rpc::OutboundCall::Phase, std::__1::unique_ptr<kudu::rpc::ErrorStatusPB, std::__1::default_delete<kudu::rpc::ErrorStatusPB> >) ../src/kudu/rpc/outbound_call.cc:400:3 (libkrpc.so+0x17a889)
    #22 kudu::rpc::Connection::Shutdown(kudu::Status const&, std::__1::unique_ptr<kudu::rpc::ErrorStatusPB, std::__1::default_delete<kudu::rpc::ErrorStatusPB> >) ../src/kudu/rpc/connection.cc:311:16 (libkrpc.so+0x140516)
    #23 kudu::rpc::ReactorThread::DestroyConnection(kudu::rpc::Connection*, kudu::Status const&, std::__1::unique_ptr<kudu::rpc::ErrorStatusPB, std::__1::default_delete<kudu::rpc::ErrorStatusPB> >) ../src/kudu/rpc/reactor.cc:694:9 (libkrpc.so+0x18dacb)
    #24 kudu::rpc::Connection::ReadHandler(ev::io&, int) ../src/kudu/rpc/connection.cc:672:24 (libkrpc.so+0x1427aa)
    #25 void ev::base<ev_io, ev::io>::method_thunk<kudu::rpc::Connection, &(kudu::rpc::Connection::ReadHandler(ev::io&, int))>(ev_loop*, ev_io*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x14dc6a)
    #26 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #27 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #28 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #29 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #30 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #31 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #32 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #33 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #34 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #35 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #36 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #37 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #38 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Location is heap block of size 1536 at 0x7b6800026a00 allocated by thread T152:
    #0 operator new(unsigned long) /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cpp:64 (kudu-tool-test+0x520ca7)
    #1 std::__1::__libcpp_allocate(unsigned long, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/new:253:10 (kudu-tool-test+0x627ce6)
    #2 std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >::allocate(unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1789:34 (kudu-tool-test+0x6345f2)
    #3 std::__1::allocator_traits<std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::allocate(std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1525:21 (kudu-tool-test+0x6343e0)
    #4 std::__1::__split_buffer<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&>::__split_buffer(unsigned long, unsigned long, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__split_buffer:318:29 (kudu-tool-test+0x647be4)
    #5 void std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::__push_back_slow_path<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1627:49 (kudu-tool-test+0x6b5089)
    #6 std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::push_back(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1659:9 (kudu-tool-test+0x60ad41)
    #7 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:18 (kudu-tool-test+0x69d0e9)
    #8 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #9 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #10 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #11 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #12 kudu::rpc::Connection::ReadHandler(ev::io&, int) ../src/kudu/rpc/connection.cc (libkrpc.so+0x14277c)
    #13 void ev::base<ev_io, ev::io>::method_thunk<kudu::rpc::Connection, &(kudu::rpc::Connection::ReadHandler(ev::io&, int))>(ev_loop*, ev_io*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x14dc6a)
    #14 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #15 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #16 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #17 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #18 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #19 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #20 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #21 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #22 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #23 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #24 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #25 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #26 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Mutex M179 (0x7ff8f97c3968) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xdde9)
    #2 __cxx_global_var_init.152 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:396:14 (libglog.so.1+0xdde9)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xdde9)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Mutex M183 (0x7ff8f97c3a08) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xded2)
    #2 __cxx_global_var_init.160 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:623:23 (libglog.so.1+0xded2)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xded2)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Thread T11 'rpc reactor-663' (tid=66354, running) created by main thread at:
    #0 pthread_create /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:966 (kudu-tool-test+0x4a52b5)
    #1 kudu::Thread::StartThread(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, unsigned long, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.cc:635:15 (libkudu_util.so+0x42d70a)
    #2 kudu::Thread::Create(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.h:146:12 (libmaster.so+0x2cf9b9)
    #3 kudu::rpc::ReactorThread::Init() ../src/kudu/rpc/reactor.cc:193:10 (libkrpc.so+0x18c03e)
    #4 kudu::rpc::Reactor::Init() ../src/kudu/rpc/reactor.cc:773:18 (libkrpc.so+0x1907c0)
    #5 kudu::rpc::Messenger::Init() ../src/kudu/rpc/messenger.cc:360:5 (libkrpc.so+0x160d6d)
    #6 kudu::rpc::MessengerBuilder::Build(std::__1::shared_ptr<kudu::rpc::Messenger>*) ../src/kudu/rpc/messenger.cc:107:3 (libkrpc.so+0x16082c)
    #7 kudu::server::ServerBase::Init() ../src/kudu/server/server_base.cc:851:3 (libserver_process.so+0x13ed4a)
    #8 kudu::kserver::KuduServer::Init() ../src/kudu/kserver/kserver.cc:144:3 (libkserver.so+0x12eb1)
    #9 kudu::master::Master::Init() ../src/kudu/master/master.cc:291:3 (libmaster.so+0x3f3b40)
    #10 kudu::master::MiniMaster::Start() ../src/kudu/master/mini_master.cc:95:3 (libmaster.so+0x4469b0)
    #11 kudu::cluster::InternalMiniCluster::StartMasters() ../src/kudu/mini-cluster/internal_mini_cluster.cc:176:5 (libmini_cluster.so+0xd18ef)
    #12 kudu::cluster::InternalMiniCluster::Start() ../src/kudu/mini-cluster/internal_mini_cluster.cc:107:3 (libmini_cluster.so+0xd111b)
    #13 kudu::tools::ToolTest::StartMiniCluster(kudu::cluster::InternalMiniClusterOptions) ../src/kudu/tools/kudu-tool-test.cc:1280:3 (kudu-tool-test+0x522eed)
    #14 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9375:3 (kudu-tool-test+0x5db096)
    #15 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #16 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #17 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #18 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #19 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #20 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #21 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #22 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #23 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #24 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #25 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

  Thread T152 'rpc reactor-666' (tid=66682, running) created by main thread at:
    #0 pthread_create /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:966 (kudu-tool-test+0x4a52b5)
    #1 kudu::Thread::StartThread(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, unsigned long, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.cc:635:15 (libkudu_util.so+0x42d70a)
    #2 kudu::Thread::Create(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.h:146:12 (libmaster.so+0x2cf9b9)
    #3 kudu::rpc::ReactorThread::Init() ../src/kudu/rpc/reactor.cc:193:10 (libkrpc.so+0x18c03e)
    #4 kudu::rpc::Reactor::Init() ../src/kudu/rpc/reactor.cc:773:18 (libkrpc.so+0x1907c0)
    #5 kudu::rpc::Messenger::Init() ../src/kudu/rpc/messenger.cc:360:5 (libkrpc.so+0x160d6d)
    #6 kudu::rpc::MessengerBuilder::Build(std::__1::shared_ptr<kudu::rpc::Messenger>*) ../src/kudu/rpc/messenger.cc:107:3 (libkrpc.so+0x16082c)
    #7 kudu::server::ServerBase::Init() ../src/kudu/server/server_base.cc:851:3 (libserver_process.so+0x13ed4a)
    #8 kudu::kserver::KuduServer::Init() ../src/kudu/kserver/kserver.cc:144:3 (libkserver.so+0x12eb1)
    #9 kudu::tserver::TabletServer::Init() ../src/kudu/tserver/tablet_server.cc:106:3 (libtserver.so+0x25d062)
    #10 kudu::tserver::MiniTabletServer::Start() ../src/kudu/tserver/mini_tablet_server.cc:106:3 (libtserver.so+0x1e886b)
    #11 kudu::tserver::MiniTabletServer::Restart() ../src/kudu/tserver/mini_tablet_server.cc:131:10 (libtserver.so+0x1e8b08)
    #12 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9441:3 (kudu-tool-test+0x5dbe5b)
    #13 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #14 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #15 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #16 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #17 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #18 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #19 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #20 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #21 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #22 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #23 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

SUMMARY: ThreadSanitizer: data race /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:1423:39 in std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__is_long() const
==================
==================
WARNING: ThreadSanitizer: data race (pid=66319)
  Read of size 8 at 0x7b6800026d50 by main thread:
    #0 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__get_long_size() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:1485:34 (kudu-tool-test+0x633c25)
    #1 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::size() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:947:31 (kudu-tool-test+0x6339f5)
    #2 void JoinStringsIterator<std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> >(std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:209:23 (kudu-tool-test+0x6bc4df)
    #3 void JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:168:3 (kudu-tool-test+0x6bc3f9)
    #4 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&) ../src/kudu/gutil/strings/join.h:175:3 (kudu-tool-test+0x608cf1)
    #5 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9485:5 (kudu-tool-test+0x5dc37d)
    #6 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #7 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #8 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #9 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #10 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #11 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #12 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #13 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #14 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #15 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #16 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

  Previous write of size 8 at 0x7b6800026d50 by thread T11 (mutexes: write M179, read M183):
    #0 memcpy sanitizer_common/sanitizer_common_interceptors.inc:808 (kudu-tool-test+0x4a916c)
    #1 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::basic_string(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:1936:7 (kudu-tool-test+0x62ea0d)
    #2 void std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >::construct<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1809:31 (kudu-tool-test+0x648498)
    #3 void std::__1::allocator_traits<std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::__construct<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::integral_constant<bool, true>, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1687:21 (kudu-tool-test+0x648451)
    #4 void std::__1::allocator_traits<std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::construct<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1538:14 (kudu-tool-test+0x6483c1)
    #5 void std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::__construct_one_at_end<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:926:5 (kudu-tool-test+0x6b4fe9)
    #6 std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::push_back(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1656:9 (kudu-tool-test+0x60ad34)
    #7 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:18 (kudu-tool-test+0x69d0e9)
    #8 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #9 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #10 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #11 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #12 kudu::master::RetryingTSRpcTask::RpcCallback() ../src/kudu/master/catalog_manager.cc:4567:5 (libmaster.so+0x32a1bc)
    #13 kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()::operator()() const ../src/kudu/master/catalog_manager.cc:4937:50 (libmaster.so+0x3874d1)
    #14 decltype(std::__1::forward<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()&>(fp)()) std::__1::__invoke<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()&>(kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libmaster.so+0x387461)
    #15 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()&>(kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libmaster.so+0x3873f1)
    #16 std::__1::__function::__alloc_func<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'(), std::__1::allocator<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libmaster.so+0x3873b1)
    #17 std::__1::__function::__func<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'(), std::__1::allocator<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libmaster.so+0x38604d)
    #18 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #19 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #20 kudu::rpc::OutboundCall::CallCallback() ../src/kudu/rpc/outbound_call.cc:309:5 (libkrpc.so+0x17a2d4)
    #21 kudu::rpc::OutboundCall::SetFailed(kudu::Status, kudu::rpc::OutboundCall::Phase, std::__1::unique_ptr<kudu::rpc::ErrorStatusPB, std::__1::default_delete<kudu::rpc::ErrorStatusPB> >) ../src/kudu/rpc/outbound_call.cc:400:3 (libkrpc.so+0x17a889)
    #22 kudu::rpc::Connection::Shutdown(kudu::Status const&, std::__1::unique_ptr<kudu::rpc::ErrorStatusPB, std::__1::default_delete<kudu::rpc::ErrorStatusPB> >) ../src/kudu/rpc/connection.cc:311:16 (libkrpc.so+0x140516)
    #23 kudu::rpc::ReactorThread::DestroyConnection(kudu::rpc::Connection*, kudu::Status const&, std::__1::unique_ptr<kudu::rpc::ErrorStatusPB, std::__1::default_delete<kudu::rpc::ErrorStatusPB> >) ../src/kudu/rpc/reactor.cc:694:9 (libkrpc.so+0x18dacb)
    #24 kudu::rpc::Connection::ReadHandler(ev::io&, int) ../src/kudu/rpc/connection.cc:672:24 (libkrpc.so+0x1427aa)
    #25 void ev::base<ev_io, ev::io>::method_thunk<kudu::rpc::Connection, &(kudu::rpc::Connection::ReadHandler(ev::io&, int))>(ev_loop*, ev_io*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x14dc6a)
    #26 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #27 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #28 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #29 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #30 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #31 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #32 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #33 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #34 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #35 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #36 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #37 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #38 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Location is heap block of size 1536 at 0x7b6800026a00 allocated by thread T152:
    #0 operator new(unsigned long) /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cpp:64 (kudu-tool-test+0x520ca7)
    #1 std::__1::__libcpp_allocate(unsigned long, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/new:253:10 (kudu-tool-test+0x627ce6)
    #2 std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >::allocate(unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1789:34 (kudu-tool-test+0x6345f2)
    #3 std::__1::allocator_traits<std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::allocate(std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1525:21 (kudu-tool-test+0x6343e0)
    #4 std::__1::__split_buffer<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&>::__split_buffer(unsigned long, unsigned long, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__split_buffer:318:29 (kudu-tool-test+0x647be4)
    #5 void std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::__push_back_slow_path<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1627:49 (kudu-tool-test+0x6b5089)
    #6 std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::push_back(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1659:9 (kudu-tool-test+0x60ad41)
    #7 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:18 (kudu-tool-test+0x69d0e9)
    #8 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #9 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #10 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #11 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #12 kudu::rpc::Connection::ReadHandler(ev::io&, int) ../src/kudu/rpc/connection.cc (libkrpc.so+0x14277c)
    #13 void ev::base<ev_io, ev::io>::method_thunk<kudu::rpc::Connection, &(kudu::rpc::Connection::ReadHandler(ev::io&, int))>(ev_loop*, ev_io*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x14dc6a)
    #14 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #15 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #16 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #17 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #18 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #19 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #20 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #21 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #22 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #23 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #24 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #25 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #26 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Mutex M179 (0x7ff8f97c3968) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xdde9)
    #2 __cxx_global_var_init.152 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:396:14 (libglog.so.1+0xdde9)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xdde9)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Mutex M183 (0x7ff8f97c3a08) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xded2)
    #2 __cxx_global_var_init.160 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:623:23 (libglog.so.1+0xded2)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xded2)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Thread T11 'rpc reactor-663' (tid=66354, running) created by main thread at:
    #0 pthread_create /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:966 (kudu-tool-test+0x4a52b5)
    #1 kudu::Thread::StartThread(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, unsigned long, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.cc:635:15 (libkudu_util.so+0x42d70a)
    #2 kudu::Thread::Create(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.h:146:12 (libmaster.so+0x2cf9b9)
    #3 kudu::rpc::ReactorThread::Init() ../src/kudu/rpc/reactor.cc:193:10 (libkrpc.so+0x18c03e)
    #4 kudu::rpc::Reactor::Init() ../src/kudu/rpc/reactor.cc:773:18 (libkrpc.so+0x1907c0)
    #5 kudu::rpc::Messenger::Init() ../src/kudu/rpc/messenger.cc:360:5 (libkrpc.so+0x160d6d)
    #6 kudu::rpc::MessengerBuilder::Build(std::__1::shared_ptr<kudu::rpc::Messenger>*) ../src/kudu/rpc/messenger.cc:107:3 (libkrpc.so+0x16082c)
    #7 kudu::server::ServerBase::Init() ../src/kudu/server/server_base.cc:851:3 (libserver_process.so+0x13ed4a)
    #8 kudu::kserver::KuduServer::Init() ../src/kudu/kserver/kserver.cc:144:3 (libkserver.so+0x12eb1)
    #9 kudu::master::Master::Init() ../src/kudu/master/master.cc:291:3 (libmaster.so+0x3f3b40)
    #10 kudu::master::MiniMaster::Start() ../src/kudu/master/mini_master.cc:95:3 (libmaster.so+0x4469b0)
    #11 kudu::cluster::InternalMiniCluster::StartMasters() ../src/kudu/mini-cluster/internal_mini_cluster.cc:176:5 (libmini_cluster.so+0xd18ef)
    #12 kudu::cluster::InternalMiniCluster::Start() ../src/kudu/mini-cluster/internal_mini_cluster.cc:107:3 (libmini_cluster.so+0xd111b)
    #13 kudu::tools::ToolTest::StartMiniCluster(kudu::cluster::InternalMiniClusterOptions) ../src/kudu/tools/kudu-tool-test.cc:1280:3 (kudu-tool-test+0x522eed)
    #14 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9375:3 (kudu-tool-test+0x5db096)
    #15 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #16 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #17 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #18 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #19 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #20 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #21 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #22 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #23 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #24 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #25 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

  Thread T152 'rpc reactor-666' (tid=66682, running) created by main thread at:
    #0 pthread_create /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:966 (kudu-tool-test+0x4a52b5)
    #1 kudu::Thread::StartThread(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, unsigned long, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.cc:635:15 (libkudu_util.so+0x42d70a)
    #2 kudu::Thread::Create(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.h:146:12 (libmaster.so+0x2cf9b9)
    #3 kudu::rpc::ReactorThread::Init() ../src/kudu/rpc/reactor.cc:193:10 (libkrpc.so+0x18c03e)
    #4 kudu::rpc::Reactor::Init() ../src/kudu/rpc/reactor.cc:773:18 (libkrpc.so+0x1907c0)
    #5 kudu::rpc::Messenger::Init() ../src/kudu/rpc/messenger.cc:360:5 (libkrpc.so+0x160d6d)
    #6 kudu::rpc::MessengerBuilder::Build(std::__1::shared_ptr<kudu::rpc::Messenger>*) ../src/kudu/rpc/messenger.cc:107:3 (libkrpc.so+0x16082c)
    #7 kudu::server::ServerBase::Init() ../src/kudu/server/server_base.cc:851:3 (libserver_process.so+0x13ed4a)
    #8 kudu::kserver::KuduServer::Init() ../src/kudu/kserver/kserver.cc:144:3 (libkserver.so+0x12eb1)
    #9 kudu::tserver::TabletServer::Init() ../src/kudu/tserver/tablet_server.cc:106:3 (libtserver.so+0x25d062)
    #10 kudu::tserver::MiniTabletServer::Start() ../src/kudu/tserver/mini_tablet_server.cc:106:3 (libtserver.so+0x1e886b)
    #11 kudu::tserver::MiniTabletServer::Restart() ../src/kudu/tserver/mini_tablet_server.cc:131:10 (libtserver.so+0x1e8b08)
    #12 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9441:3 (kudu-tool-test+0x5dbe5b)
    #13 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #14 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #15 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #16 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #17 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #18 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #19 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #20 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #21 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #22 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #23 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

SUMMARY: ThreadSanitizer: data race /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:1485:34 in std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__get_long_size() const
==================
==================
WARNING: ThreadSanitizer: data race (pid=66319)
  Read of size 8 at 0x7b6800026a10 by main thread:
    #0 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__get_long_pointer() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:1505:34 (kudu-tool-test+0x633ae5)
    #1 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__get_pointer() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:1517:31 (kudu-tool-test+0x633a65)
    #2 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::data() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:1245:75 (kudu-tool-test+0x6339a9)
    #3 void JoinStringsIterator<std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> >(std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:219:26 (kudu-tool-test+0x6bc580)
    #4 void JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:168:3 (kudu-tool-test+0x6bc3f9)
    #5 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&) ../src/kudu/gutil/strings/join.h:175:3 (kudu-tool-test+0x608cf1)
    #6 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9485:5 (kudu-tool-test+0x5dc37d)
    #7 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #8 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #9 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #10 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #11 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #12 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #13 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #14 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #15 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #16 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #17 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

  Previous write of size 8 at 0x7b6800026a10 by thread T152 (mutexes: write M179, read M183):
    #0 operator new(unsigned long) /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cpp:64 (kudu-tool-test+0x520ca7)
    #1 std::__1::__libcpp_allocate(unsigned long, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/new:253:10 (kudu-tool-test+0x627ce6)
    #2 std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >::allocate(unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1789:34 (kudu-tool-test+0x6345f2)
    #3 std::__1::allocator_traits<std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::allocate(std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1525:21 (kudu-tool-test+0x6343e0)
    #4 std::__1::__split_buffer<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&>::__split_buffer(unsigned long, unsigned long, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__split_buffer:318:29 (kudu-tool-test+0x647be4)
    #5 void std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::__push_back_slow_path<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1627:49 (kudu-tool-test+0x6b5089)
    #6 std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::push_back(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1659:9 (kudu-tool-test+0x60ad41)
    #7 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:18 (kudu-tool-test+0x69d0e9)
    #8 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #9 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #10 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #11 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #12 kudu::rpc::Connection::ReadHandler(ev::io&, int) ../src/kudu/rpc/connection.cc (libkrpc.so+0x14277c)
    #13 void ev::base<ev_io, ev::io>::method_thunk<kudu::rpc::Connection, &(kudu::rpc::Connection::ReadHandler(ev::io&, int))>(ev_loop*, ev_io*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x14dc6a)
    #14 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #15 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #16 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #17 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #18 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #19 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #20 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #21 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #22 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #23 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #24 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #25 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #26 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Location is heap block of size 1536 at 0x7b6800026a00 allocated by thread T152:
    #0 operator new(unsigned long) /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cpp:64 (kudu-tool-test+0x520ca7)
    #1 std::__1::__libcpp_allocate(unsigned long, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/new:253:10 (kudu-tool-test+0x627ce6)
    #2 std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >::allocate(unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1789:34 (kudu-tool-test+0x6345f2)
    #3 std::__1::allocator_traits<std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::allocate(std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1525:21 (kudu-tool-test+0x6343e0)
    #4 std::__1::__split_buffer<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&>::__split_buffer(unsigned long, unsigned long, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__split_buffer:318:29 (kudu-tool-test+0x647be4)
    #5 void std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::__push_back_slow_path<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1627:49 (kudu-tool-test+0x6b5089)
    #6 std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::push_back(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1659:9 (kudu-tool-test+0x60ad41)
    #7 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:18 (kudu-tool-test+0x69d0e9)
    #8 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #9 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #10 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #11 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #12 kudu::rpc::Connection::ReadHandler(ev::io&, int) ../src/kudu/rpc/connection.cc (libkrpc.so+0x14277c)
    #13 void ev::base<ev_io, ev::io>::method_thunk<kudu::rpc::Connection, &(kudu::rpc::Connection::ReadHandler(ev::io&, int))>(ev_loop*, ev_io*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x14dc6a)
    #14 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #15 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #16 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #17 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #18 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #19 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #20 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #21 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #22 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #23 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #24 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #25 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #26 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Mutex M179 (0x7ff8f97c3968) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xdde9)
    #2 __cxx_global_var_init.152 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:396:14 (libglog.so.1+0xdde9)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xdde9)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Mutex M183 (0x7ff8f97c3a08) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xded2)
    #2 __cxx_global_var_init.160 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:623:23 (libglog.so.1+0xded2)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xded2)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Thread T152 'rpc reactor-666' (tid=66682, running) created by main thread at:
    #0 pthread_create /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:966 (kudu-tool-test+0x4a52b5)
    #1 kudu::Thread::StartThread(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, unsigned long, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.cc:635:15 (libkudu_util.so+0x42d70a)
    #2 kudu::Thread::Create(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.h:146:12 (libmaster.so+0x2cf9b9)
    #3 kudu::rpc::ReactorThread::Init() ../src/kudu/rpc/reactor.cc:193:10 (libkrpc.so+0x18c03e)
    #4 kudu::rpc::Reactor::Init() ../src/kudu/rpc/reactor.cc:773:18 (libkrpc.so+0x1907c0)
    #5 kudu::rpc::Messenger::Init() ../src/kudu/rpc/messenger.cc:360:5 (libkrpc.so+0x160d6d)
    #6 kudu::rpc::MessengerBuilder::Build(std::__1::shared_ptr<kudu::rpc::Messenger>*) ../src/kudu/rpc/messenger.cc:107:3 (libkrpc.so+0x16082c)
    #7 kudu::server::ServerBase::Init() ../src/kudu/server/server_base.cc:851:3 (libserver_process.so+0x13ed4a)
    #8 kudu::kserver::KuduServer::Init() ../src/kudu/kserver/kserver.cc:144:3 (libkserver.so+0x12eb1)
    #9 kudu::tserver::TabletServer::Init() ../src/kudu/tserver/tablet_server.cc:106:3 (libtserver.so+0x25d062)
    #10 kudu::tserver::MiniTabletServer::Start() ../src/kudu/tserver/mini_tablet_server.cc:106:3 (libtserver.so+0x1e886b)
    #11 kudu::tserver::MiniTabletServer::Restart() ../src/kudu/tserver/mini_tablet_server.cc:131:10 (libtserver.so+0x1e8b08)
    #12 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9441:3 (kudu-tool-test+0x5dbe5b)
    #13 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #14 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #15 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #16 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #17 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #18 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #19 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #20 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #21 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #22 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #23 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

SUMMARY: ThreadSanitizer: data race /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:1505:34 in std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__get_long_pointer() const
==================
==================
WARNING: ThreadSanitizer: data race (pid=66319)
  Read of size 8 at 0x7b3c0002ea40 by main thread:
    #0 memcpy sanitizer_common/sanitizer_common_interceptors.inc:808 (kudu-tool-test+0x4a916c)
    #1 copy /apache/dev/git/kudu/thirdparty/build/llvm-11.0.0.libcxx.tsan/include/c++/v1/__string:386:56 (libc++.so.1+0xc7ad9)
    #2 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::append(char const*, unsigned long) /apache/dev/git/kudu/thirdparty/build/llvm-11.0.0.libcxx.tsan/include/c++/v1/string:2524:13 (libc++.so.1+0xc7ad9)
    #3 void JoinStringsIterator<std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> >(std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:219:13 (kudu-tool-test+0x6bc5a1)
    #4 void JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:168:3 (kudu-tool-test+0x6bc3f9)
    #5 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&) ../src/kudu/gutil/strings/join.h:175:3 (kudu-tool-test+0x608cf1)
    #6 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9485:5 (kudu-tool-test+0x5dc37d)
    #7 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #8 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #9 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #10 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #11 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #12 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #13 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #14 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #15 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #16 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #17 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

  Previous write of size 8 at 0x7b3c0002ea40 by thread T11 (mutexes: write M179, read M183):
    #0 operator new(unsigned long) /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cpp:64 (kudu-tool-test+0x520ca7)
    #1 std::__1::__libcpp_allocate(unsigned long, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/new:253:10 (kudu-tool-test+0x627ce6)
    #2 std::__1::allocator<char>::allocate(unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1789:34 (kudu-tool-test+0x635b6e)
    #3 std::__1::allocator_traits<std::__1::allocator<char> >::allocate(std::__1::allocator<char>&, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1525:21 (kudu-tool-test+0x6357c0)
    #4 std::__1::_MetaBase<__is_cpp17_forward_iterator<char*>::value>::_EnableIfImpl<void> std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__init<char*>(char*, char*) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2127:15 (kudu-tool-test+0x656a1c)
    #5 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::basic_string<char*, void>(char*, char*, std::__1::allocator<char> const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2156:5 (kudu-tool-test+0x666360)
    #6 std::__1::basic_stringbuf<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:444:16 (kudu-tool-test+0x66628b)
    #7 std::__1::basic_ostringstream<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:852:18 (libglog.so.1+0x1b3e7)
    #8 google::LogSink::ToString(int, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:2135:17 (libglog.so.1+0x1b3e7)
    #9 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:28 (kudu-tool-test+0x69d0d9)
    #10 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #11 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #12 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #13 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #14 kudu::rpc::serialization::SerializeMessage(google::protobuf::MessageLite const&, kudu::faststring*, int, bool) ../src/kudu/rpc/serialization.cc:72:5 (libkrpc.so+0x1d45fe)
    #15 kudu::rpc::RequestPayload::PopulateRequestPayload(google::protobuf::Message const&, std::__1::vector<std::__1::unique_ptr<kudu::rpc::RpcSidecar, std::__1::default_delete<kudu::rpc::RpcSidecar> >, std::__1::allocator<std::__1::unique_ptr<kudu::rpc::RpcSidecar, std::__1::default_delete<kudu::rpc::RpcSidecar> > > >&&) ../src/kudu/rpc/outbound_call.cc:187:3 (libkrpc.so+0x1795f8)
    #16 kudu::rpc::RequestPayload::CreateRequestPayload(kudu::rpc::RemoteMethod const&, google::protobuf::Message const&, std::__1::vector<std::__1::unique_ptr<kudu::rpc::RpcSidecar, std::__1::default_delete<kudu::rpc::RpcSidecar> >, std::__1::allocator<std::__1::unique_ptr<kudu::rpc::RpcSidecar, std::__1::default_delete<kudu::rpc::RpcSidecar> > > >&&) ../src/kudu/rpc/outbound_call.cc:164:12 (libkrpc.so+0x1792fe)
    #17 kudu::rpc::Proxy::AsyncRequest(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, google::protobuf::Message const&, google::protobuf::Message*, kudu::rpc::RpcController*, std::__1::function<void ()> const&) ../src/kudu/rpc/proxy.cc:201:22 (libkrpc.so+0x18396d)
    #18 kudu::tserver::TabletServerAdminServiceProxy::AlterSchemaAsync(kudu::tserver::AlterSchemaRequestPB const&, kudu::tserver::AlterSchemaResponsePB*, kudu::rpc::RpcController*, std::__1::function<void ()> const&) /apache/dev/git/kudu/build/tsan/src/kudu/tserver/tserver_admin.proxy.cc:90:3 (libtserver_admin_proto.so+0x7dd4b)
    #19 kudu::master::AsyncAlterTable::SendRequest(int) ../src/kudu/master/catalog_manager.cc:4936:16 (libmaster.so+0x384dfb)
    #20 kudu::master::RetryingTSRpcTask::Run() ../src/kudu/master/catalog_manager.cc:4551:9 (libmaster.so+0x329600)
    #21 kudu::master::RetryingTSRpcTask::RunDelayedTask(kudu::Status const&) ../src/kudu/master/catalog_manager.cc:4620:14 (libmaster.so+0x32a33f)
    #22 kudu::master::RetryingTSRpcTask::RescheduleWithBackoffDelay()::$_31::operator()(kudu::Status const&) const ../src/kudu/master/catalog_manager.cc:4606:39 (libmaster.so+0x349b68)
    #23 decltype(std::__1::forward<kudu::master::RetryingTSRpcTask::RescheduleWithBackoffDelay()::$_31&>(fp)(std::__1::forward<kudu::Status const&>(fp0))) std::__1::__invoke<kudu::master::RetryingTSRpcTask::RescheduleWithBackoffDelay()::$_31&, kudu::Status const&>(kudu::master::RetryingTSRpcTask::RescheduleWithBackoffDelay()::$_31&, kudu::Status const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libmaster.so+0x349b18)
    #24 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::master::RetryingTSRpcTask::RescheduleWithBackoffDelay()::$_31&, kudu::Status const&>(kudu::master::RetryingTSRpcTask::RescheduleWithBackoffDelay()::$_31&, kudu::Status const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libmaster.so+0x349a98)
    #25 std::__1::__function::__alloc_func<kudu::master::RetryingTSRpcTask::RescheduleWithBackoffDelay()::$_31, std::__1::allocator<kudu::master::RetryingTSRpcTask::RescheduleWithBackoffDelay()::$_31>, void (kudu::Status const&)>::operator()(kudu::Status const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libmaster.so+0x349a53)
    #26 std::__1::__function::__func<kudu::master::RetryingTSRpcTask::RescheduleWithBackoffDelay()::$_31, std::__1::allocator<kudu::master::RetryingTSRpcTask::RescheduleWithBackoffDelay()::$_31>, void (kudu::Status const&)>::operator()(kudu::Status const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libmaster.so+0x348d3c)
    #27 std::__1::__function::__value_func<void (kudu::Status const&)>::operator()(kudu::Status const&) const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (libmaster.so+0x3e6916)
    #28 std::__1::function<void (kudu::Status const&)>::operator()(kudu::Status const&) const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (libmaster.so+0x3deec8)
    #29 kudu::rpc::DelayedTask::TimerHandler(ev::timer&, int) ../src/kudu/rpc/reactor.cc:756:5 (libkrpc.so+0x190423)
    #30 void ev::base<ev_timer, ev::timer>::method_thunk<kudu::rpc::DelayedTask, &(kudu::rpc::DelayedTask::TimerHandler(ev::timer&, int))>(ev_loop*, ev_timer*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x19f71a)
    #31 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #32 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #33 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #34 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #35 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #36 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #37 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #38 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #39 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #40 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #41 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #42 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #43 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Location is heap block of size 240 at 0x7b3c0002ea40 allocated by thread T11:
    #0 operator new(unsigned long) /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cpp:64 (kudu-tool-test+0x520ca7)
    #1 std::__1::__libcpp_allocate(unsigned long, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/new:253:10 (kudu-tool-test+0x627ce6)
    #2 std::__1::allocator<char>::allocate(unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1789:34 (kudu-tool-test+0x635b6e)
    #3 std::__1::allocator_traits<std::__1::allocator<char> >::allocate(std::__1::allocator<char>&, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1525:21 (kudu-tool-test+0x6357c0)
    #4 std::__1::_MetaBase<__is_cpp17_forward_iterator<char*>::value>::_EnableIfImpl<void> std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__init<char*>(char*, char*) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2127:15 (kudu-tool-test+0x656a1c)
    #5 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::basic_string<char*, void>(char*, char*, std::__1::allocator<char> const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2156:5 (kudu-tool-test+0x666360)
    #6 std::__1::basic_stringbuf<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:444:16 (kudu-tool-test+0x66628b)
    #7 std::__1::basic_ostringstream<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:852:18 (libglog.so.1+0x1b3e7)
    #8 google::LogSink::ToString(int, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:2135:17 (libglog.so.1+0x1b3e7)
    #9 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:28 (kudu-tool-test+0x69d0d9)
    #10 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #11 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #12 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #13 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #14 kudu::rpc::serialization::SerializeMessage(google::protobuf::MessageLite const&, kudu::faststring*, int, bool) ../src/kudu/rpc/serialization.cc:72:5 (libkrpc.so+0x1d45fe)
    #15 kudu::rpc::RequestPayload::PopulateRequestPayload(google::protobuf::Message const&, std::__1::vector<std::__1::unique_ptr<kudu::rpc::RpcSidecar, std::__1::default_delete<kudu::rpc::RpcSidecar> >, std::__1::allocator<std::__1::unique_ptr<kudu::rpc::RpcSidecar, std::__1::default_delete<kudu::rpc::RpcSidecar> > > >&&) ../src/kudu/rpc/outbound_call.cc:187:3 (libkrpc.so+0x1795f8)
    #16 kudu::rpc::RequestPayload::CreateRequestPayload(kudu::rpc::RemoteMethod const&, google::protobuf::Message const&, std::__1::vector<std::__1::unique_ptr<kudu::rpc::RpcSidecar, std::__1::default_delete<kudu::rpc::RpcSidecar> >, std::__1::allocator<std::__1::unique_ptr<kudu::rpc::RpcSidecar, std::__1::default_delete<kudu::rpc::RpcSidecar> > > >&&) ../src/kudu/rpc/outbound_call.cc:164:12 (libkrpc.so+0x1792fe)
    #17 kudu::rpc::Proxy::AsyncRequest(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, google::protobuf::Message const&, google::protobuf::Message*, kudu::rpc::RpcController*, std::__1::function<void ()> const&) ../src/kudu/rpc/proxy.cc:201:22 (libkrpc.so+0x18396d)
    #18 kudu::tserver::TabletServerAdminServiceProxy::AlterSchemaAsync(kudu::tserver::AlterSchemaRequestPB const&, kudu::tserver::AlterSchemaResponsePB*, kudu::rpc::RpcController*, std::__1::function<void ()> const&) /apache/dev/git/kudu/build/tsan/src/kudu/tserver/tserver_admin.proxy.cc:90:3 (libtserver_admin_proto.so+0x7dd4b)
    #19 kudu::master::AsyncAlterTable::SendRequest(int) ../src/kudu/master/catalog_manager.cc:4936:16 (libmaster.so+0x384dfb)
    #20 kudu::master::RetryingTSRpcTask::Run() ../src/kudu/master/catalog_manager.cc:4551:9 (libmaster.so+0x329600)
    #21 kudu::master::RetryingTSRpcTask::RunDelayedTask(kudu::Status const&) ../src/kudu/master/catalog_manager.cc:4620:14 (libmaster.so+0x32a33f)
    #22 kudu::master::RetryingTSRpcTask::RescheduleWithBackoffDelay()::$_31::operator()(kudu::Status const&) const ../src/kudu/master/catalog_manager.cc:4606:39 (libmaster.so+0x349b68)
    #23 decltype(std::__1::forward<kudu::master::RetryingTSRpcTask::RescheduleWithBackoffDelay()::$_31&>(fp)(std::__1::forward<kudu::Status const&>(fp0))) std::__1::__invoke<kudu::master::RetryingTSRpcTask::RescheduleWithBackoffDelay()::$_31&, kudu::Status const&>(kudu::master::RetryingTSRpcTask::RescheduleWithBackoffDelay()::$_31&, kudu::Status const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libmaster.so+0x349b18)
    #24 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::master::RetryingTSRpcTask::RescheduleWithBackoffDelay()::$_31&, kudu::Status const&>(kudu::master::RetryingTSRpcTask::RescheduleWithBackoffDelay()::$_31&, kudu::Status const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libmaster.so+0x349a98)
    #25 std::__1::__function::__alloc_func<kudu::master::RetryingTSRpcTask::RescheduleWithBackoffDelay()::$_31, std::__1::allocator<kudu::master::RetryingTSRpcTask::RescheduleWithBackoffDelay()::$_31>, void (kudu::Status const&)>::operator()(kudu::Status const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libmaster.so+0x349a53)
    #26 std::__1::__function::__func<kudu::master::RetryingTSRpcTask::RescheduleWithBackoffDelay()::$_31, std::__1::allocator<kudu::master::RetryingTSRpcTask::RescheduleWithBackoffDelay()::$_31>, void (kudu::Status const&)>::operator()(kudu::Status const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libmaster.so+0x348d3c)
    #27 std::__1::__function::__value_func<void (kudu::Status const&)>::operator()(kudu::Status const&) const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (libmaster.so+0x3e6916)
    #28 std::__1::function<void (kudu::Status const&)>::operator()(kudu::Status const&) const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (libmaster.so+0x3deec8)
    #29 kudu::rpc::DelayedTask::TimerHandler(ev::timer&, int) ../src/kudu/rpc/reactor.cc:756:5 (libkrpc.so+0x190423)
    #30 void ev::base<ev_timer, ev::timer>::method_thunk<kudu::rpc::DelayedTask, &(kudu::rpc::DelayedTask::TimerHandler(ev::timer&, int))>(ev_loop*, ev_timer*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x19f71a)
    #31 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #32 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #33 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #34 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #35 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #36 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #37 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #38 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #39 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #40 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #41 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #42 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #43 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Mutex M179 (0x7ff8f97c3968) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xdde9)
    #2 __cxx_global_var_init.152 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:396:14 (libglog.so.1+0xdde9)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xdde9)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Mutex M183 (0x7ff8f97c3a08) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xded2)
    #2 __cxx_global_var_init.160 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:623:23 (libglog.so.1+0xded2)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xded2)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Thread T11 'rpc reactor-663' (tid=66354, running) created by main thread at:
    #0 pthread_create /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:966 (kudu-tool-test+0x4a52b5)
    #1 kudu::Thread::StartThread(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, unsigned long, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.cc:635:15 (libkudu_util.so+0x42d70a)
    #2 kudu::Thread::Create(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.h:146:12 (libmaster.so+0x2cf9b9)
    #3 kudu::rpc::ReactorThread::Init() ../src/kudu/rpc/reactor.cc:193:10 (libkrpc.so+0x18c03e)
    #4 kudu::rpc::Reactor::Init() ../src/kudu/rpc/reactor.cc:773:18 (libkrpc.so+0x1907c0)
    #5 kudu::rpc::Messenger::Init() ../src/kudu/rpc/messenger.cc:360:5 (libkrpc.so+0x160d6d)
    #6 kudu::rpc::MessengerBuilder::Build(std::__1::shared_ptr<kudu::rpc::Messenger>*) ../src/kudu/rpc/messenger.cc:107:3 (libkrpc.so+0x16082c)
    #7 kudu::server::ServerBase::Init() ../src/kudu/server/server_base.cc:851:3 (libserver_process.so+0x13ed4a)
    #8 kudu::kserver::KuduServer::Init() ../src/kudu/kserver/kserver.cc:144:3 (libkserver.so+0x12eb1)
    #9 kudu::master::Master::Init() ../src/kudu/master/master.cc:291:3 (libmaster.so+0x3f3b40)
    #10 kudu::master::MiniMaster::Start() ../src/kudu/master/mini_master.cc:95:3 (libmaster.so+0x4469b0)
    #11 kudu::cluster::InternalMiniCluster::StartMasters() ../src/kudu/mini-cluster/internal_mini_cluster.cc:176:5 (libmini_cluster.so+0xd18ef)
    #12 kudu::cluster::InternalMiniCluster::Start() ../src/kudu/mini-cluster/internal_mini_cluster.cc:107:3 (libmini_cluster.so+0xd111b)
    #13 kudu::tools::ToolTest::StartMiniCluster(kudu::cluster::InternalMiniClusterOptions) ../src/kudu/tools/kudu-tool-test.cc:1280:3 (kudu-tool-test+0x522eed)
    #14 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9375:3 (kudu-tool-test+0x5db096)
    #15 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #16 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #17 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #18 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #19 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #20 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #21 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #22 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #23 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #24 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #25 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

SUMMARY: ThreadSanitizer: data race /apache/dev/git/kudu/thirdparty/build/llvm-11.0.0.libcxx.tsan/include/c++/v1/__string:386:56 in copy
==================
==================
WARNING: ThreadSanitizer: data race (pid=66319)
  Read of size 8 at 0x7b3c0002eae8 by main thread:
    #0 memcpy sanitizer_common/sanitizer_common_interceptors.inc:808 (kudu-tool-test+0x4a916c)
    #1 copy /apache/dev/git/kudu/thirdparty/build/llvm-11.0.0.libcxx.tsan/include/c++/v1/__string:386:56 (libc++.so.1+0xc7ad9)
    #2 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::append(char const*, unsigned long) /apache/dev/git/kudu/thirdparty/build/llvm-11.0.0.libcxx.tsan/include/c++/v1/string:2524:13 (libc++.so.1+0xc7ad9)
    #3 void JoinStringsIterator<std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> >(std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:219:13 (kudu-tool-test+0x6bc5a1)
    #4 void JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:168:3 (kudu-tool-test+0x6bc3f9)
    #5 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&) ../src/kudu/gutil/strings/join.h:175:3 (kudu-tool-test+0x608cf1)
    #6 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9485:5 (kudu-tool-test+0x5dc37d)
    #7 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #8 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #9 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #10 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #11 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #12 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #13 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #14 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #15 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #16 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #17 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

  Previous write of size 1 at 0x7b3c0002eaef by thread T11 (mutexes: write M179, read M183):
    #0 std::__1::char_traits<char>::assign(char&, char const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__string:361:73 (kudu-tool-test+0x635997)
    #1 std::__1::_MetaBase<__is_cpp17_forward_iterator<char*>::value>::_EnableIfImpl<void> std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__init<char*>(char*, char*) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2133:9 (kudu-tool-test+0x6569ba)
    #2 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::basic_string<char*, void>(char*, char*, std::__1::allocator<char> const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2156:5 (kudu-tool-test+0x666360)
    #3 std::__1::basic_stringbuf<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:444:16 (kudu-tool-test+0x66628b)
    #4 std::__1::basic_ostringstream<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:852:18 (libglog.so.1+0x1b3e7)
    #5 google::LogSink::ToString(int, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:2135:17 (libglog.so.1+0x1b3e7)
    #6 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:28 (kudu-tool-test+0x69d0d9)
    #7 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #8 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #9 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #10 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #11 kudu::rpc::serialization::SerializeMessage(google::protobuf::MessageLite const&, kudu::faststring*, int, bool) ../src/kudu/rpc/serialization.cc:72:5 (libkrpc.so+0x1d45fe)
    #12 kudu::rpc::RequestPayload::PopulateRequestPayload(google::protobuf::Message const&, std::__1::vector<std::__1::unique_ptr<kudu::rpc::RpcSidecar, std::__1::default_delete<kudu::rpc::RpcSidecar> >, std::__1::allocator<std::__1::unique_ptr<kudu::rpc::RpcSidecar, std::__1::default_delete<kudu::rpc::RpcSidecar> > > >&&) ../src/kudu/rpc/outbound_call.cc:187:3 (libkrpc.so+0x1795f8)
    #13 kudu::rpc::RequestPayload::CreateRequestPayload(kudu::rpc::RemoteMethod const&, google::protobuf::Message const&, std::__1::vector<std::__1::unique_ptr<kudu::rpc::RpcSidecar, std::__1::default_delete<kudu::rpc::RpcSidecar> >, std::__1::allocator<std::__1::unique_ptr<kudu::rpc::RpcSidecar, std::__1::default_delete<kudu::rpc::RpcSidecar> > > >&&) ../src/kudu/rpc/outbound_call.cc:164:12 (libkrpc.so+0x1792fe)
    #14 kudu::rpc::Proxy::AsyncRequest(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, google::protobuf::Message const&, google::protobuf::Message*, kudu::rpc::RpcController*, std::__1::function<void ()> const&) ../src/kudu/rpc/proxy.cc:201:22 (libkrpc.so+0x18396d)
    #15 kudu::tserver::TabletServerAdminServiceProxy::AlterSchemaAsync(kudu::tserver::AlterSchemaRequestPB const&, kudu::tserver::AlterSchemaResponsePB*, kudu::rpc::RpcController*, std::__1::function<void ()> const&) /apache/dev/git/kudu/build/tsan/src/kudu/tserver/tserver_admin.proxy.cc:90:3 (libtserver_admin_proto.so+0x7dd4b)
    #16 kudu::master::AsyncAlterTable::SendRequest(int) ../src/kudu/master/catalog_manager.cc:4936:16 (libmaster.so+0x384dfb)
    #17 kudu::master::RetryingTSRpcTask::Run() ../src/kudu/master/catalog_manager.cc:4551:9 (libmaster.so+0x329600)
    #18 kudu::master::RetryingTSRpcTask::RunDelayedTask(kudu::Status const&) ../src/kudu/master/catalog_manager.cc:4620:14 (libmaster.so+0x32a33f)
    #19 kudu::master::RetryingTSRpcTask::RescheduleWithBackoffDelay()::$_31::operator()(kudu::Status const&) const ../src/kudu/master/catalog_manager.cc:4606:39 (libmaster.so+0x349b68)
    #20 decltype(std::__1::forward<kudu::master::RetryingTSRpcTask::RescheduleWithBackoffDelay()::$_31&>(fp)(std::__1::forward<kudu::Status const&>(fp0))) std::__1::__invoke<kudu::master::RetryingTSRpcTask::RescheduleWithBackoffDelay()::$_31&, kudu::Status const&>(kudu::master::RetryingTSRpcTask::RescheduleWithBackoffDelay()::$_31&, kudu::Status const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libmaster.so+0x349b18)
    #21 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::master::RetryingTSRpcTask::RescheduleWithBackoffDelay()::$_31&, kudu::Status const&>(kudu::master::RetryingTSRpcTask::RescheduleWithBackoffDelay()::$_31&, kudu::Status const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libmaster.so+0x349a98)
    #22 std::__1::__function::__alloc_func<kudu::master::RetryingTSRpcTask::RescheduleWithBackoffDelay()::$_31, std::__1::allocator<kudu::master::RetryingTSRpcTask::RescheduleWithBackoffDelay()::$_31>, void (kudu::Status const&)>::operator()(kudu::Status const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libmaster.so+0x349a53)
    #23 std::__1::__function::__func<kudu::master::RetryingTSRpcTask::RescheduleWithBackoffDelay()::$_31, std::__1::allocator<kudu::master::RetryingTSRpcTask::RescheduleWithBackoffDelay()::$_31>, void (kudu::Status const&)>::operator()(kudu::Status const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libmaster.so+0x348d3c)
    #24 std::__1::__function::__value_func<void (kudu::Status const&)>::operator()(kudu::Status const&) const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (libmaster.so+0x3e6916)
    #25 std::__1::function<void (kudu::Status const&)>::operator()(kudu::Status const&) const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (libmaster.so+0x3deec8)
    #26 kudu::rpc::DelayedTask::TimerHandler(ev::timer&, int) ../src/kudu/rpc/reactor.cc:756:5 (libkrpc.so+0x190423)
    #27 void ev::base<ev_timer, ev::timer>::method_thunk<kudu::rpc::DelayedTask, &(kudu::rpc::DelayedTask::TimerHandler(ev::timer&, int))>(ev_loop*, ev_timer*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x19f71a)
    #28 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #29 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #30 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #31 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #32 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #33 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #34 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #35 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #36 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #37 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #38 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #39 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #40 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Location is heap block of size 240 at 0x7b3c0002ea40 allocated by thread T11:
    #0 operator new(unsigned long) /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cpp:64 (kudu-tool-test+0x520ca7)
    #1 std::__1::__libcpp_allocate(unsigned long, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/new:253:10 (kudu-tool-test+0x627ce6)
    #2 std::__1::allocator<char>::allocate(unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1789:34 (kudu-tool-test+0x635b6e)
    #3 std::__1::allocator_traits<std::__1::allocator<char> >::allocate(std::__1::allocator<char>&, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1525:21 (kudu-tool-test+0x6357c0)
    #4 std::__1::_MetaBase<__is_cpp17_forward_iterator<char*>::value>::_EnableIfImpl<void> std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__init<char*>(char*, char*) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2127:15 (kudu-tool-test+0x656a1c)
    #5 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::basic_string<char*, void>(char*, char*, std::__1::allocator<char> const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2156:5 (kudu-tool-test+0x666360)
    #6 std::__1::basic_stringbuf<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:444:16 (kudu-tool-test+0x66628b)
    #7 std::__1::basic_ostringstream<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:852:18 (libglog.so.1+0x1b3e7)
    #8 google::LogSink::ToString(int, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:2135:17 (libglog.so.1+0x1b3e7)
    #9 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:28 (kudu-tool-test+0x69d0d9)
    #10 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #11 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #12 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #13 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #14 kudu::rpc::serialization::SerializeMessage(google::protobuf::MessageLite const&, kudu::faststring*, int, bool) ../src/kudu/rpc/serialization.cc:72:5 (libkrpc.so+0x1d45fe)
    #15 kudu::rpc::RequestPayload::PopulateRequestPayload(google::protobuf::Message const&, std::__1::vector<std::__1::unique_ptr<kudu::rpc::RpcSidecar, std::__1::default_delete<kudu::rpc::RpcSidecar> >, std::__1::allocator<std::__1::unique_ptr<kudu::rpc::RpcSidecar, std::__1::default_delete<kudu::rpc::RpcSidecar> > > >&&) ../src/kudu/rpc/outbound_call.cc:187:3 (libkrpc.so+0x1795f8)
    #16 kudu::rpc::RequestPayload::CreateRequestPayload(kudu::rpc::RemoteMethod const&, google::protobuf::Message const&, std::__1::vector<std::__1::unique_ptr<kudu::rpc::RpcSidecar, std::__1::default_delete<kudu::rpc::RpcSidecar> >, std::__1::allocator<std::__1::unique_ptr<kudu::rpc::RpcSidecar, std::__1::default_delete<kudu::rpc::RpcSidecar> > > >&&) ../src/kudu/rpc/outbound_call.cc:164:12 (libkrpc.so+0x1792fe)
    #17 kudu::rpc::Proxy::AsyncRequest(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, google::protobuf::Message const&, google::protobuf::Message*, kudu::rpc::RpcController*, std::__1::function<void ()> const&) ../src/kudu/rpc/proxy.cc:201:22 (libkrpc.so+0x18396d)
    #18 kudu::tserver::TabletServerAdminServiceProxy::AlterSchemaAsync(kudu::tserver::AlterSchemaRequestPB const&, kudu::tserver::AlterSchemaResponsePB*, kudu::rpc::RpcController*, std::__1::function<void ()> const&) /apache/dev/git/kudu/build/tsan/src/kudu/tserver/tserver_admin.proxy.cc:90:3 (libtserver_admin_proto.so+0x7dd4b)
    #19 kudu::master::AsyncAlterTable::SendRequest(int) ../src/kudu/master/catalog_manager.cc:4936:16 (libmaster.so+0x384dfb)
    #20 kudu::master::RetryingTSRpcTask::Run() ../src/kudu/master/catalog_manager.cc:4551:9 (libmaster.so+0x329600)
    #21 kudu::master::RetryingTSRpcTask::RunDelayedTask(kudu::Status const&) ../src/kudu/master/catalog_manager.cc:4620:14 (libmaster.so+0x32a33f)
    #22 kudu::master::RetryingTSRpcTask::RescheduleWithBackoffDelay()::$_31::operator()(kudu::Status const&) const ../src/kudu/master/catalog_manager.cc:4606:39 (libmaster.so+0x349b68)
    #23 decltype(std::__1::forward<kudu::master::RetryingTSRpcTask::RescheduleWithBackoffDelay()::$_31&>(fp)(std::__1::forward<kudu::Status const&>(fp0))) std::__1::__invoke<kudu::master::RetryingTSRpcTask::RescheduleWithBackoffDelay()::$_31&, kudu::Status const&>(kudu::master::RetryingTSRpcTask::RescheduleWithBackoffDelay()::$_31&, kudu::Status const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libmaster.so+0x349b18)
    #24 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::master::RetryingTSRpcTask::RescheduleWithBackoffDelay()::$_31&, kudu::Status const&>(kudu::master::RetryingTSRpcTask::RescheduleWithBackoffDelay()::$_31&, kudu::Status const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libmaster.so+0x349a98)
    #25 std::__1::__function::__alloc_func<kudu::master::RetryingTSRpcTask::RescheduleWithBackoffDelay()::$_31, std::__1::allocator<kudu::master::RetryingTSRpcTask::RescheduleWithBackoffDelay()::$_31>, void (kudu::Status const&)>::operator()(kudu::Status const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libmaster.so+0x349a53)
    #26 std::__1::__function::__func<kudu::master::RetryingTSRpcTask::RescheduleWithBackoffDelay()::$_31, std::__1::allocator<kudu::master::RetryingTSRpcTask::RescheduleWithBackoffDelay()::$_31>, void (kudu::Status const&)>::operator()(kudu::Status const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libmaster.so+0x348d3c)
    #27 std::__1::__function::__value_func<void (kudu::Status const&)>::operator()(kudu::Status const&) const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (libmaster.so+0x3e6916)
    #28 std::__1::function<void (kudu::Status const&)>::operator()(kudu::Status const&) const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (libmaster.so+0x3deec8)
    #29 kudu::rpc::DelayedTask::TimerHandler(ev::timer&, int) ../src/kudu/rpc/reactor.cc:756:5 (libkrpc.so+0x190423)
    #30 void ev::base<ev_timer, ev::timer>::method_thunk<kudu::rpc::DelayedTask, &(kudu::rpc::DelayedTask::TimerHandler(ev::timer&, int))>(ev_loop*, ev_timer*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x19f71a)
    #31 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #32 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #33 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #34 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #35 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #36 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #37 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #38 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #39 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #40 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #41 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #42 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #43 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Mutex M179 (0x7ff8f97c3968) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xdde9)
    #2 __cxx_global_var_init.152 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:396:14 (libglog.so.1+0xdde9)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xdde9)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Mutex M183 (0x7ff8f97c3a08) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xded2)
    #2 __cxx_global_var_init.160 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:623:23 (libglog.so.1+0xded2)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xded2)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Thread T11 'rpc reactor-663' (tid=66354, running) created by main thread at:
    #0 pthread_create /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:966 (kudu-tool-test+0x4a52b5)
    #1 kudu::Thread::StartThread(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, unsigned long, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.cc:635:15 (libkudu_util.so+0x42d70a)
    #2 kudu::Thread::Create(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.h:146:12 (libmaster.so+0x2cf9b9)
    #3 kudu::rpc::ReactorThread::Init() ../src/kudu/rpc/reactor.cc:193:10 (libkrpc.so+0x18c03e)
    #4 kudu::rpc::Reactor::Init() ../src/kudu/rpc/reactor.cc:773:18 (libkrpc.so+0x1907c0)
    #5 kudu::rpc::Messenger::Init() ../src/kudu/rpc/messenger.cc:360:5 (libkrpc.so+0x160d6d)
    #6 kudu::rpc::MessengerBuilder::Build(std::__1::shared_ptr<kudu::rpc::Messenger>*) ../src/kudu/rpc/messenger.cc:107:3 (libkrpc.so+0x16082c)
    #7 kudu::server::ServerBase::Init() ../src/kudu/server/server_base.cc:851:3 (libserver_process.so+0x13ed4a)
    #8 kudu::kserver::KuduServer::Init() ../src/kudu/kserver/kserver.cc:144:3 (libkserver.so+0x12eb1)
    #9 kudu::master::Master::Init() ../src/kudu/master/master.cc:291:3 (libmaster.so+0x3f3b40)
    #10 kudu::master::MiniMaster::Start() ../src/kudu/master/mini_master.cc:95:3 (libmaster.so+0x4469b0)
    #11 kudu::cluster::InternalMiniCluster::StartMasters() ../src/kudu/mini-cluster/internal_mini_cluster.cc:176:5 (libmini_cluster.so+0xd18ef)
    #12 kudu::cluster::InternalMiniCluster::Start() ../src/kudu/mini-cluster/internal_mini_cluster.cc:107:3 (libmini_cluster.so+0xd111b)
    #13 kudu::tools::ToolTest::StartMiniCluster(kudu::cluster::InternalMiniClusterOptions) ../src/kudu/tools/kudu-tool-test.cc:1280:3 (kudu-tool-test+0x522eed)
    #14 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9375:3 (kudu-tool-test+0x5db096)
    #15 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #16 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #17 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #18 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #19 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #20 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #21 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #22 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #23 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #24 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #25 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

SUMMARY: ThreadSanitizer: data race /apache/dev/git/kudu/thirdparty/build/llvm-11.0.0.libcxx.tsan/include/c++/v1/__string:386:56 in copy
==================
==================
WARNING: ThreadSanitizer: data race (pid=66319)
  Read of size 8 at 0x7b340002ffd0 by main thread:
    #0 memcpy sanitizer_common/sanitizer_common_interceptors.inc:808 (kudu-tool-test+0x4a916c)
    #1 copy /apache/dev/git/kudu/thirdparty/build/llvm-11.0.0.libcxx.tsan/include/c++/v1/__string:386:56 (libc++.so.1+0xc7ad9)
    #2 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::append(char const*, unsigned long) /apache/dev/git/kudu/thirdparty/build/llvm-11.0.0.libcxx.tsan/include/c++/v1/string:2524:13 (libc++.so.1+0xc7ad9)
    #3 void JoinStringsIterator<std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> >(std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:219:13 (kudu-tool-test+0x6bc5a1)
    #4 void JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:168:3 (kudu-tool-test+0x6bc3f9)
    #5 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&) ../src/kudu/gutil/strings/join.h:175:3 (kudu-tool-test+0x608cf1)
    #6 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9485:5 (kudu-tool-test+0x5dc37d)
    #7 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #8 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #9 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #10 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #11 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #12 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #13 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #14 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #15 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #16 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #17 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

  Previous write of size 8 at 0x7b340002ffd0 by thread T152:
    [failed to restore the stack]

  Location is heap block of size 208 at 0x7b340002ffd0 allocated by thread T152:
    #0 operator new(unsigned long) /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cpp:64 (kudu-tool-test+0x520ca7)
    #1 std::__1::__libcpp_allocate(unsigned long, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/new:253:10 (kudu-tool-test+0x627ce6)
    #2 std::__1::allocator<char>::allocate(unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1789:34 (kudu-tool-test+0x635b6e)
    #3 std::__1::allocator_traits<std::__1::allocator<char> >::allocate(std::__1::allocator<char>&, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1525:21 (kudu-tool-test+0x6357c0)
    #4 std::__1::_MetaBase<__is_cpp17_forward_iterator<char*>::value>::_EnableIfImpl<void> std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__init<char*>(char*, char*) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2127:15 (kudu-tool-test+0x656a1c)
    #5 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::basic_string<char*, void>(char*, char*, std::__1::allocator<char> const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2156:5 (kudu-tool-test+0x666360)
    #6 std::__1::basic_stringbuf<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:444:16 (kudu-tool-test+0x66628b)
    #7 std::__1::basic_ostringstream<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:852:18 (libglog.so.1+0x1b3e7)
    #8 google::LogSink::ToString(int, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:2135:17 (libglog.so.1+0x1b3e7)
    #9 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:28 (kudu-tool-test+0x69d0d9)
    #10 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #11 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #12 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #13 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #14 kudu::rpc::Connection::ReadHandler(ev::io&, int) ../src/kudu/rpc/connection.cc (libkrpc.so+0x14277c)
    #15 void ev::base<ev_io, ev::io>::method_thunk<kudu::rpc::Connection, &(kudu::rpc::Connection::ReadHandler(ev::io&, int))>(ev_loop*, ev_io*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x14dc6a)
    #16 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #17 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #18 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #19 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #20 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #21 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #22 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #23 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #24 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #25 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #26 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #27 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #28 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Thread T152 'rpc reactor-666' (tid=66682, running) created by main thread at:
    #0 pthread_create /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:966 (kudu-tool-test+0x4a52b5)
    #1 kudu::Thread::StartThread(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, unsigned long, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.cc:635:15 (libkudu_util.so+0x42d70a)
    #2 kudu::Thread::Create(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.h:146:12 (libmaster.so+0x2cf9b9)
    #3 kudu::rpc::ReactorThread::Init() ../src/kudu/rpc/reactor.cc:193:10 (libkrpc.so+0x18c03e)
    #4 kudu::rpc::Reactor::Init() ../src/kudu/rpc/reactor.cc:773:18 (libkrpc.so+0x1907c0)
    #5 kudu::rpc::Messenger::Init() ../src/kudu/rpc/messenger.cc:360:5 (libkrpc.so+0x160d6d)
    #6 kudu::rpc::MessengerBuilder::Build(std::__1::shared_ptr<kudu::rpc::Messenger>*) ../src/kudu/rpc/messenger.cc:107:3 (libkrpc.so+0x16082c)
    #7 kudu::server::ServerBase::Init() ../src/kudu/server/server_base.cc:851:3 (libserver_process.so+0x13ed4a)
    #8 kudu::kserver::KuduServer::Init() ../src/kudu/kserver/kserver.cc:144:3 (libkserver.so+0x12eb1)
    #9 kudu::tserver::TabletServer::Init() ../src/kudu/tserver/tablet_server.cc:106:3 (libtserver.so+0x25d062)
    #10 kudu::tserver::MiniTabletServer::Start() ../src/kudu/tserver/mini_tablet_server.cc:106:3 (libtserver.so+0x1e886b)
    #11 kudu::tserver::MiniTabletServer::Restart() ../src/kudu/tserver/mini_tablet_server.cc:131:10 (libtserver.so+0x1e8b08)
    #12 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9441:3 (kudu-tool-test+0x5dbe5b)
    #13 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #14 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #15 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #16 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #17 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #18 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #19 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #20 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #21 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #22 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #23 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

SUMMARY: ThreadSanitizer: data race /apache/dev/git/kudu/thirdparty/build/llvm-11.0.0.libcxx.tsan/include/c++/v1/__string:386:56 in copy
==================
==================
WARNING: ThreadSanitizer: data race (pid=66319)
  Read of size 8 at 0x7b3400026bf0 by main thread:
    #0 memcpy sanitizer_common/sanitizer_common_interceptors.inc:808 (kudu-tool-test+0x4a916c)
    #1 copy /apache/dev/git/kudu/thirdparty/build/llvm-11.0.0.libcxx.tsan/include/c++/v1/__string:386:56 (libc++.so.1+0xc7ad9)
    #2 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::append(char const*, unsigned long) /apache/dev/git/kudu/thirdparty/build/llvm-11.0.0.libcxx.tsan/include/c++/v1/string:2524:13 (libc++.so.1+0xc7ad9)
    #3 void JoinStringsIterator<std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> >(std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:219:13 (kudu-tool-test+0x6bc5a1)
    #4 void JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:168:3 (kudu-tool-test+0x6bc3f9)
    #5 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&) ../src/kudu/gutil/strings/join.h:175:3 (kudu-tool-test+0x608cf1)
    #6 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9485:5 (kudu-tool-test+0x5dc37d)
    #7 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #8 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #9 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #10 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #11 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #12 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #13 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #14 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #15 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #16 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #17 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

  Previous write of size 8 at 0x7b3400026bf0 by thread T11 (mutexes: write M179, read M183):
    #0 operator new(unsigned long) /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cpp:64 (kudu-tool-test+0x520ca7)
    #1 std::__1::__libcpp_allocate(unsigned long, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/new:253:10 (kudu-tool-test+0x627ce6)
    #2 std::__1::allocator<char>::allocate(unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1789:34 (kudu-tool-test+0x635b6e)
    #3 std::__1::allocator_traits<std::__1::allocator<char> >::allocate(std::__1::allocator<char>&, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1525:21 (kudu-tool-test+0x6357c0)
    #4 std::__1::_MetaBase<__is_cpp17_forward_iterator<char*>::value>::_EnableIfImpl<void> std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__init<char*>(char*, char*) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2127:15 (kudu-tool-test+0x656a1c)
    #5 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::basic_string<char*, void>(char*, char*, std::__1::allocator<char> const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2156:5 (kudu-tool-test+0x666360)
    #6 std::__1::basic_stringbuf<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:444:16 (kudu-tool-test+0x66628b)
    #7 std::__1::basic_ostringstream<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:852:18 (libglog.so.1+0x1b3e7)
    #8 google::LogSink::ToString(int, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:2135:17 (libglog.so.1+0x1b3e7)
    #9 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:28 (kudu-tool-test+0x69d0d9)
    #10 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #11 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #12 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #13 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #14 kudu::rpc::Connection::ReadHandler(ev::io&, int) ../src/kudu/rpc/connection.cc (libkrpc.so+0x14277c)
    #15 void ev::base<ev_io, ev::io>::method_thunk<kudu::rpc::Connection, &(kudu::rpc::Connection::ReadHandler(ev::io&, int))>(ev_loop*, ev_io*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x14dc6a)
    #16 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #17 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #18 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #19 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #20 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #21 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #22 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #23 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #24 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #25 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #26 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #27 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #28 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Location is heap block of size 208 at 0x7b3400026bf0 allocated by thread T11:
    #0 operator new(unsigned long) /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cpp:64 (kudu-tool-test+0x520ca7)
    #1 std::__1::__libcpp_allocate(unsigned long, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/new:253:10 (kudu-tool-test+0x627ce6)
    #2 std::__1::allocator<char>::allocate(unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1789:34 (kudu-tool-test+0x635b6e)
    #3 std::__1::allocator_traits<std::__1::allocator<char> >::allocate(std::__1::allocator<char>&, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1525:21 (kudu-tool-test+0x6357c0)
    #4 std::__1::_MetaBase<__is_cpp17_forward_iterator<char*>::value>::_EnableIfImpl<void> std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__init<char*>(char*, char*) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2127:15 (kudu-tool-test+0x656a1c)
    #5 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::basic_string<char*, void>(char*, char*, std::__1::allocator<char> const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2156:5 (kudu-tool-test+0x666360)
    #6 std::__1::basic_stringbuf<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:444:16 (kudu-tool-test+0x66628b)
    #7 std::__1::basic_ostringstream<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:852:18 (libglog.so.1+0x1b3e7)
    #8 google::LogSink::ToString(int, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:2135:17 (libglog.so.1+0x1b3e7)
    #9 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:28 (kudu-tool-test+0x69d0d9)
    #10 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #11 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #12 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #13 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #14 kudu::rpc::Connection::ReadHandler(ev::io&, int) ../src/kudu/rpc/connection.cc (libkrpc.so+0x14277c)
    #15 void ev::base<ev_io, ev::io>::method_thunk<kudu::rpc::Connection, &(kudu::rpc::Connection::ReadHandler(ev::io&, int))>(ev_loop*, ev_io*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x14dc6a)
    #16 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #17 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #18 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #19 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #20 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #21 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #22 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #23 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #24 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #25 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #26 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #27 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #28 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Mutex M179 (0x7ff8f97c3968) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xdde9)
    #2 __cxx_global_var_init.152 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:396:14 (libglog.so.1+0xdde9)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xdde9)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Mutex M183 (0x7ff8f97c3a08) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xded2)
    #2 __cxx_global_var_init.160 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:623:23 (libglog.so.1+0xded2)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xded2)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Thread T11 'rpc reactor-663' (tid=66354, running) created by main thread at:
    #0 pthread_create /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:966 (kudu-tool-test+0x4a52b5)
    #1 kudu::Thread::StartThread(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, unsigned long, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.cc:635:15 (libkudu_util.so+0x42d70a)
    #2 kudu::Thread::Create(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.h:146:12 (libmaster.so+0x2cf9b9)
    #3 kudu::rpc::ReactorThread::Init() ../src/kudu/rpc/reactor.cc:193:10 (libkrpc.so+0x18c03e)
    #4 kudu::rpc::Reactor::Init() ../src/kudu/rpc/reactor.cc:773:18 (libkrpc.so+0x1907c0)
    #5 kudu::rpc::Messenger::Init() ../src/kudu/rpc/messenger.cc:360:5 (libkrpc.so+0x160d6d)
    #6 kudu::rpc::MessengerBuilder::Build(std::__1::shared_ptr<kudu::rpc::Messenger>*) ../src/kudu/rpc/messenger.cc:107:3 (libkrpc.so+0x16082c)
    #7 kudu::server::ServerBase::Init() ../src/kudu/server/server_base.cc:851:3 (libserver_process.so+0x13ed4a)
    #8 kudu::kserver::KuduServer::Init() ../src/kudu/kserver/kserver.cc:144:3 (libkserver.so+0x12eb1)
    #9 kudu::master::Master::Init() ../src/kudu/master/master.cc:291:3 (libmaster.so+0x3f3b40)
    #10 kudu::master::MiniMaster::Start() ../src/kudu/master/mini_master.cc:95:3 (libmaster.so+0x4469b0)
    #11 kudu::cluster::InternalMiniCluster::StartMasters() ../src/kudu/mini-cluster/internal_mini_cluster.cc:176:5 (libmini_cluster.so+0xd18ef)
    #12 kudu::cluster::InternalMiniCluster::Start() ../src/kudu/mini-cluster/internal_mini_cluster.cc:107:3 (libmini_cluster.so+0xd111b)
    #13 kudu::tools::ToolTest::StartMiniCluster(kudu::cluster::InternalMiniClusterOptions) ../src/kudu/tools/kudu-tool-test.cc:1280:3 (kudu-tool-test+0x522eed)
    #14 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9375:3 (kudu-tool-test+0x5db096)
    #15 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #16 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #17 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #18 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #19 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #20 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #21 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #22 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #23 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #24 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #25 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

SUMMARY: ThreadSanitizer: data race /apache/dev/git/kudu/thirdparty/build/llvm-11.0.0.libcxx.tsan/include/c++/v1/__string:386:56 in copy
==================
==================
WARNING: ThreadSanitizer: data race (pid=66319)
  Read of size 8 at 0x7b3400026c88 by main thread:
    #0 memcpy sanitizer_common/sanitizer_common_interceptors.inc:808 (kudu-tool-test+0x4a916c)
    #1 copy /apache/dev/git/kudu/thirdparty/build/llvm-11.0.0.libcxx.tsan/include/c++/v1/__string:386:56 (libc++.so.1+0xc7ad9)
    #2 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::append(char const*, unsigned long) /apache/dev/git/kudu/thirdparty/build/llvm-11.0.0.libcxx.tsan/include/c++/v1/string:2524:13 (libc++.so.1+0xc7ad9)
    #3 void JoinStringsIterator<std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> >(std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:219:13 (kudu-tool-test+0x6bc5a1)
    #4 void JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:168:3 (kudu-tool-test+0x6bc3f9)
    #5 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&) ../src/kudu/gutil/strings/join.h:175:3 (kudu-tool-test+0x608cf1)
    #6 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9485:5 (kudu-tool-test+0x5dc37d)
    #7 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #8 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #9 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #10 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #11 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #12 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #13 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #14 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #15 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #16 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #17 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

  Previous write of size 1 at 0x7b3400026c8f by thread T11 (mutexes: write M179, read M183):
    #0 std::__1::char_traits<char>::assign(char&, char const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__string:361:73 (kudu-tool-test+0x635997)
    #1 std::__1::_MetaBase<__is_cpp17_forward_iterator<char*>::value>::_EnableIfImpl<void> std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__init<char*>(char*, char*) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2133:9 (kudu-tool-test+0x6569ba)
    #2 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::basic_string<char*, void>(char*, char*, std::__1::allocator<char> const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2156:5 (kudu-tool-test+0x666360)
    #3 std::__1::basic_stringbuf<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:444:16 (kudu-tool-test+0x66628b)
    #4 std::__1::basic_ostringstream<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:852:18 (libglog.so.1+0x1b3e7)
    #5 google::LogSink::ToString(int, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:2135:17 (libglog.so.1+0x1b3e7)
    #6 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:28 (kudu-tool-test+0x69d0d9)
    #7 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #8 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #9 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #10 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #11 kudu::rpc::Connection::ReadHandler(ev::io&, int) ../src/kudu/rpc/connection.cc (libkrpc.so+0x14277c)
    #12 void ev::base<ev_io, ev::io>::method_thunk<kudu::rpc::Connection, &(kudu::rpc::Connection::ReadHandler(ev::io&, int))>(ev_loop*, ev_io*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x14dc6a)
    #13 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #14 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #15 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #16 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #17 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #18 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #19 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #20 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #21 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #22 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #23 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #24 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #25 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Location is heap block of size 208 at 0x7b3400026bf0 allocated by thread T11:
    #0 operator new(unsigned long) /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cpp:64 (kudu-tool-test+0x520ca7)
    #1 std::__1::__libcpp_allocate(unsigned long, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/new:253:10 (kudu-tool-test+0x627ce6)
    #2 std::__1::allocator<char>::allocate(unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1789:34 (kudu-tool-test+0x635b6e)
    #3 std::__1::allocator_traits<std::__1::allocator<char> >::allocate(std::__1::allocator<char>&, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1525:21 (kudu-tool-test+0x6357c0)
    #4 std::__1::_MetaBase<__is_cpp17_forward_iterator<char*>::value>::_EnableIfImpl<void> std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__init<char*>(char*, char*) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2127:15 (kudu-tool-test+0x656a1c)
    #5 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::basic_string<char*, void>(char*, char*, std::__1::allocator<char> const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2156:5 (kudu-tool-test+0x666360)
    #6 std::__1::basic_stringbuf<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:444:16 (kudu-tool-test+0x66628b)
    #7 std::__1::basic_ostringstream<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:852:18 (libglog.so.1+0x1b3e7)
    #8 google::LogSink::ToString(int, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:2135:17 (libglog.so.1+0x1b3e7)
    #9 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:28 (kudu-tool-test+0x69d0d9)
    #10 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #11 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #12 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #13 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #14 kudu::rpc::Connection::ReadHandler(ev::io&, int) ../src/kudu/rpc/connection.cc (libkrpc.so+0x14277c)
    #15 void ev::base<ev_io, ev::io>::method_thunk<kudu::rpc::Connection, &(kudu::rpc::Connection::ReadHandler(ev::io&, int))>(ev_loop*, ev_io*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x14dc6a)
    #16 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #17 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #18 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #19 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #20 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #21 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #22 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #23 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #24 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #25 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #26 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #27 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #28 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Mutex M179 (0x7ff8f97c3968) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xdde9)
    #2 __cxx_global_var_init.152 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:396:14 (libglog.so.1+0xdde9)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xdde9)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Mutex M183 (0x7ff8f97c3a08) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xded2)
    #2 __cxx_global_var_init.160 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:623:23 (libglog.so.1+0xded2)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xded2)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Thread T11 'rpc reactor-663' (tid=66354, running) created by main thread at:
    #0 pthread_create /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:966 (kudu-tool-test+0x4a52b5)
    #1 kudu::Thread::StartThread(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, unsigned long, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.cc:635:15 (libkudu_util.so+0x42d70a)
    #2 kudu::Thread::Create(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.h:146:12 (libmaster.so+0x2cf9b9)
    #3 kudu::rpc::ReactorThread::Init() ../src/kudu/rpc/reactor.cc:193:10 (libkrpc.so+0x18c03e)
    #4 kudu::rpc::Reactor::Init() ../src/kudu/rpc/reactor.cc:773:18 (libkrpc.so+0x1907c0)
    #5 kudu::rpc::Messenger::Init() ../src/kudu/rpc/messenger.cc:360:5 (libkrpc.so+0x160d6d)
    #6 kudu::rpc::MessengerBuilder::Build(std::__1::shared_ptr<kudu::rpc::Messenger>*) ../src/kudu/rpc/messenger.cc:107:3 (libkrpc.so+0x16082c)
    #7 kudu::server::ServerBase::Init() ../src/kudu/server/server_base.cc:851:3 (libserver_process.so+0x13ed4a)
    #8 kudu::kserver::KuduServer::Init() ../src/kudu/kserver/kserver.cc:144:3 (libkserver.so+0x12eb1)
    #9 kudu::master::Master::Init() ../src/kudu/master/master.cc:291:3 (libmaster.so+0x3f3b40)
    #10 kudu::master::MiniMaster::Start() ../src/kudu/master/mini_master.cc:95:3 (libmaster.so+0x4469b0)
    #11 kudu::cluster::InternalMiniCluster::StartMasters() ../src/kudu/mini-cluster/internal_mini_cluster.cc:176:5 (libmini_cluster.so+0xd18ef)
    #12 kudu::cluster::InternalMiniCluster::Start() ../src/kudu/mini-cluster/internal_mini_cluster.cc:107:3 (libmini_cluster.so+0xd111b)
    #13 kudu::tools::ToolTest::StartMiniCluster(kudu::cluster::InternalMiniClusterOptions) ../src/kudu/tools/kudu-tool-test.cc:1280:3 (kudu-tool-test+0x522eed)
    #14 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9375:3 (kudu-tool-test+0x5db096)
    #15 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #16 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #17 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #18 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #19 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #20 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #21 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #22 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #23 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #24 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #25 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

SUMMARY: ThreadSanitizer: data race /apache/dev/git/kudu/thirdparty/build/llvm-11.0.0.libcxx.tsan/include/c++/v1/__string:386:56 in copy
==================
==================
WARNING: ThreadSanitizer: data race (pid=66319)
  Read of size 8 at 0x7b440011a800 by main thread:
    #0 memcpy sanitizer_common/sanitizer_common_interceptors.inc:808 (kudu-tool-test+0x4a916c)
    #1 copy /apache/dev/git/kudu/thirdparty/build/llvm-11.0.0.libcxx.tsan/include/c++/v1/__string:386:56 (libc++.so.1+0xc7ad9)
    #2 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::append(char const*, unsigned long) /apache/dev/git/kudu/thirdparty/build/llvm-11.0.0.libcxx.tsan/include/c++/v1/string:2524:13 (libc++.so.1+0xc7ad9)
    #3 void JoinStringsIterator<std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> >(std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:219:13 (kudu-tool-test+0x6bc5a1)
    #4 void JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:168:3 (kudu-tool-test+0x6bc3f9)
    #5 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&) ../src/kudu/gutil/strings/join.h:175:3 (kudu-tool-test+0x608cf1)
    #6 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9485:5 (kudu-tool-test+0x5dc37d)
    #7 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #8 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #9 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #10 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #11 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #12 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #13 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #14 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #15 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #16 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #17 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

  Previous write of size 1 at 0x7b440011a807 by thread T150 (mutexes: write M179, read M183):
    #0 std::__1::char_traits<char>::assign(char&, char const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__string:361:73 (kudu-tool-test+0x635997)
    #1 std::__1::_MetaBase<__is_cpp17_forward_iterator<char*>::value>::_EnableIfImpl<void> std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__init<char*>(char*, char*) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2133:9 (kudu-tool-test+0x6569ba)
    #2 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::basic_string<char*, void>(char*, char*, std::__1::allocator<char> const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2156:5 (kudu-tool-test+0x666360)
    #3 std::__1::basic_stringbuf<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:444:16 (kudu-tool-test+0x66628b)
    #4 std::__1::basic_ostringstream<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:852:18 (libglog.so.1+0x1b3e7)
    #5 google::LogSink::ToString(int, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:2135:17 (libglog.so.1+0x1b3e7)
    #6 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:28 (kudu-tool-test+0x69d0d9)
    #7 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #8 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #9 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #10 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #11 kudu::rpc::Connection::Shutdown(kudu::Status const&, std::__1::unique_ptr<kudu::rpc::ErrorStatusPB, std::__1::default_delete<kudu::rpc::ErrorStatusPB> >) ../src/kudu/rpc/connection.cc:295:5 (libkrpc.so+0x1403c2)
    #12 kudu::rpc::ReactorThread::DestroyConnection(kudu::rpc::Connection*, kudu::Status const&, std::__1::unique_ptr<kudu::rpc::ErrorStatusPB, std::__1::default_delete<kudu::rpc::ErrorStatusPB> >) ../src/kudu/rpc/reactor.cc:694:9 (libkrpc.so+0x18dacb)
    #13 kudu::rpc::Connection::ReadHandler(ev::io&, int) ../src/kudu/rpc/connection.cc:672:24 (libkrpc.so+0x1427aa)
    #14 void ev::base<ev_io, ev::io>::method_thunk<kudu::rpc::Connection, &(kudu::rpc::Connection::ReadHandler(ev::io&, int))>(ev_loop*, ev_io*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x14dc6a)
    #15 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #16 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #17 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #18 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #19 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #20 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #21 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #22 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #23 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #24 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #25 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #26 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #27 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Location is heap block of size 288 at 0x7b440011a800 allocated by thread T150:
    #0 operator new(unsigned long) /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cpp:64 (kudu-tool-test+0x520ca7)
    #1 std::__1::__libcpp_allocate(unsigned long, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/new:253:10 (kudu-tool-test+0x627ce6)
    #2 std::__1::allocator<char>::allocate(unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1789:34 (kudu-tool-test+0x635b6e)
    #3 std::__1::allocator_traits<std::__1::allocator<char> >::allocate(std::__1::allocator<char>&, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1525:21 (kudu-tool-test+0x6357c0)
    #4 std::__1::_MetaBase<__is_cpp17_forward_iterator<char*>::value>::_EnableIfImpl<void> std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__init<char*>(char*, char*) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2127:15 (kudu-tool-test+0x656a1c)
    #5 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::basic_string<char*, void>(char*, char*, std::__1::allocator<char> const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2156:5 (kudu-tool-test+0x666360)
    #6 std::__1::basic_stringbuf<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:444:16 (kudu-tool-test+0x66628b)
    #7 std::__1::basic_ostringstream<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:852:18 (libglog.so.1+0x1b3e7)
    #8 google::LogSink::ToString(int, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:2135:17 (libglog.so.1+0x1b3e7)
    #9 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:28 (kudu-tool-test+0x69d0d9)
    #10 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #11 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #12 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #13 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #14 kudu::rpc::Connection::Shutdown(kudu::Status const&, std::__1::unique_ptr<kudu::rpc::ErrorStatusPB, std::__1::default_delete<kudu::rpc::ErrorStatusPB> >) ../src/kudu/rpc/connection.cc:295:5 (libkrpc.so+0x1403c2)
    #15 kudu::rpc::ReactorThread::DestroyConnection(kudu::rpc::Connection*, kudu::Status const&, std::__1::unique_ptr<kudu::rpc::ErrorStatusPB, std::__1::default_delete<kudu::rpc::ErrorStatusPB> >) ../src/kudu/rpc/reactor.cc:694:9 (libkrpc.so+0x18dacb)
    #16 kudu::rpc::Connection::ReadHandler(ev::io&, int) ../src/kudu/rpc/connection.cc:672:24 (libkrpc.so+0x1427aa)
    #17 void ev::base<ev_io, ev::io>::method_thunk<kudu::rpc::Connection, &(kudu::rpc::Connection::ReadHandler(ev::io&, int))>(ev_loop*, ev_io*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x14dc6a)
    #18 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #19 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #20 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #21 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #22 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #23 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #24 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #25 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #26 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #27 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #28 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #29 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #30 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Mutex M179 (0x7ff8f97c3968) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xdde9)
    #2 __cxx_global_var_init.152 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:396:14 (libglog.so.1+0xdde9)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xdde9)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Mutex M183 (0x7ff8f97c3a08) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xded2)
    #2 __cxx_global_var_init.160 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:623:23 (libglog.so.1+0xded2)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xded2)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Thread T150 'rpc reactor-666' (tid=66679, running) created by main thread at:
    #0 pthread_create /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:966 (kudu-tool-test+0x4a52b5)
    #1 kudu::Thread::StartThread(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, unsigned long, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.cc:635:15 (libkudu_util.so+0x42d70a)
    #2 kudu::Thread::Create(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.h:146:12 (libmaster.so+0x2cf9b9)
    #3 kudu::rpc::ReactorThread::Init() ../src/kudu/rpc/reactor.cc:193:10 (libkrpc.so+0x18c03e)
    #4 kudu::rpc::Reactor::Init() ../src/kudu/rpc/reactor.cc:773:18 (libkrpc.so+0x1907c0)
    #5 kudu::rpc::Messenger::Init() ../src/kudu/rpc/messenger.cc:360:5 (libkrpc.so+0x160d6d)
    #6 kudu::rpc::MessengerBuilder::Build(std::__1::shared_ptr<kudu::rpc::Messenger>*) ../src/kudu/rpc/messenger.cc:107:3 (libkrpc.so+0x16082c)
    #7 kudu::server::ServerBase::Init() ../src/kudu/server/server_base.cc:851:3 (libserver_process.so+0x13ed4a)
    #8 kudu::kserver::KuduServer::Init() ../src/kudu/kserver/kserver.cc:144:3 (libkserver.so+0x12eb1)
    #9 kudu::tserver::TabletServer::Init() ../src/kudu/tserver/tablet_server.cc:106:3 (libtserver.so+0x25d062)
    #10 kudu::tserver::MiniTabletServer::Start() ../src/kudu/tserver/mini_tablet_server.cc:106:3 (libtserver.so+0x1e886b)
    #11 kudu::tserver::MiniTabletServer::Restart() ../src/kudu/tserver/mini_tablet_server.cc:131:10 (libtserver.so+0x1e8b08)
    #12 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9441:3 (kudu-tool-test+0x5dbe5b)
    #13 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #14 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #15 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #16 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #17 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #18 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #19 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #20 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #21 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #22 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #23 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

SUMMARY: ThreadSanitizer: data race /apache/dev/git/kudu/thirdparty/build/llvm-11.0.0.libcxx.tsan/include/c++/v1/__string:386:56 in copy
==================
==================
WARNING: ThreadSanitizer: data race (pid=66319)
  Read of size 8 at 0x7b440011a8e8 by main thread:
    #0 memcpy sanitizer_common/sanitizer_common_interceptors.inc:808 (kudu-tool-test+0x4a916c)
    #1 copy /apache/dev/git/kudu/thirdparty/build/llvm-11.0.0.libcxx.tsan/include/c++/v1/__string:386:56 (libc++.so.1+0xc7ad9)
    #2 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::append(char const*, unsigned long) /apache/dev/git/kudu/thirdparty/build/llvm-11.0.0.libcxx.tsan/include/c++/v1/string:2524:13 (libc++.so.1+0xc7ad9)
    #3 void JoinStringsIterator<std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> >(std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:219:13 (kudu-tool-test+0x6bc5a1)
    #4 void JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:168:3 (kudu-tool-test+0x6bc3f9)
    #5 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&) ../src/kudu/gutil/strings/join.h:175:3 (kudu-tool-test+0x608cf1)
    #6 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9485:5 (kudu-tool-test+0x5dc37d)
    #7 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #8 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #9 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #10 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #11 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #12 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #13 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #14 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #15 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #16 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #17 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

  Previous write of size 8 at 0x7b440011a8e8 by thread T150 (mutexes: write M179, read M183):
    #0 operator new(unsigned long) /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cpp:64 (kudu-tool-test+0x520ca7)
    #1 std::__1::__libcpp_allocate(unsigned long, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/new:253:10 (kudu-tool-test+0x627ce6)
    #2 std::__1::allocator<char>::allocate(unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1789:34 (kudu-tool-test+0x635b6e)
    #3 std::__1::allocator_traits<std::__1::allocator<char> >::allocate(std::__1::allocator<char>&, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1525:21 (kudu-tool-test+0x6357c0)
    #4 std::__1::_MetaBase<__is_cpp17_forward_iterator<char*>::value>::_EnableIfImpl<void> std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__init<char*>(char*, char*) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2127:15 (kudu-tool-test+0x656a1c)
    #5 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::basic_string<char*, void>(char*, char*, std::__1::allocator<char> const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2156:5 (kudu-tool-test+0x666360)
    #6 std::__1::basic_stringbuf<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:444:16 (kudu-tool-test+0x66628b)
    #7 std::__1::basic_ostringstream<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:852:18 (libglog.so.1+0x1b3e7)
    #8 google::LogSink::ToString(int, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:2135:17 (libglog.so.1+0x1b3e7)
    #9 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:28 (kudu-tool-test+0x69d0d9)
    #10 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #11 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #12 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #13 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #14 kudu::rpc::Connection::Shutdown(kudu::Status const&, std::__1::unique_ptr<kudu::rpc::ErrorStatusPB, std::__1::default_delete<kudu::rpc::ErrorStatusPB> >) ../src/kudu/rpc/connection.cc:295:5 (libkrpc.so+0x1403c2)
    #15 kudu::rpc::ReactorThread::DestroyConnection(kudu::rpc::Connection*, kudu::Status const&, std::__1::unique_ptr<kudu::rpc::ErrorStatusPB, std::__1::default_delete<kudu::rpc::ErrorStatusPB> >) ../src/kudu/rpc/reactor.cc:694:9 (libkrpc.so+0x18dacb)
    #16 kudu::rpc::Connection::ReadHandler(ev::io&, int) ../src/kudu/rpc/connection.cc:672:24 (libkrpc.so+0x1427aa)
    #17 void ev::base<ev_io, ev::io>::method_thunk<kudu::rpc::Connection, &(kudu::rpc::Connection::ReadHandler(ev::io&, int))>(ev_loop*, ev_io*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x14dc6a)
    #18 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #19 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #20 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #21 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #22 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #23 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #24 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #25 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #26 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #27 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #28 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #29 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #30 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Location is heap block of size 288 at 0x7b440011a800 allocated by thread T150:
    #0 operator new(unsigned long) /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cpp:64 (kudu-tool-test+0x520ca7)
    #1 std::__1::__libcpp_allocate(unsigned long, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/new:253:10 (kudu-tool-test+0x627ce6)
    #2 std::__1::allocator<char>::allocate(unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1789:34 (kudu-tool-test+0x635b6e)
    #3 std::__1::allocator_traits<std::__1::allocator<char> >::allocate(std::__1::allocator<char>&, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1525:21 (kudu-tool-test+0x6357c0)
    #4 std::__1::_MetaBase<__is_cpp17_forward_iterator<char*>::value>::_EnableIfImpl<void> std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__init<char*>(char*, char*) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2127:15 (kudu-tool-test+0x656a1c)
    #5 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::basic_string<char*, void>(char*, char*, std::__1::allocator<char> const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2156:5 (kudu-tool-test+0x666360)
    #6 std::__1::basic_stringbuf<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:444:16 (kudu-tool-test+0x66628b)
    #7 std::__1::basic_ostringstream<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:852:18 (libglog.so.1+0x1b3e7)
    #8 google::LogSink::ToString(int, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:2135:17 (libglog.so.1+0x1b3e7)
    #9 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:28 (kudu-tool-test+0x69d0d9)
    #10 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #11 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #12 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #13 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #14 kudu::rpc::Connection::Shutdown(kudu::Status const&, std::__1::unique_ptr<kudu::rpc::ErrorStatusPB, std::__1::default_delete<kudu::rpc::ErrorStatusPB> >) ../src/kudu/rpc/connection.cc:295:5 (libkrpc.so+0x1403c2)
    #15 kudu::rpc::ReactorThread::DestroyConnection(kudu::rpc::Connection*, kudu::Status const&, std::__1::unique_ptr<kudu::rpc::ErrorStatusPB, std::__1::default_delete<kudu::rpc::ErrorStatusPB> >) ../src/kudu/rpc/reactor.cc:694:9 (libkrpc.so+0x18dacb)
    #16 kudu::rpc::Connection::ReadHandler(ev::io&, int) ../src/kudu/rpc/connection.cc:672:24 (libkrpc.so+0x1427aa)
    #17 void ev::base<ev_io, ev::io>::method_thunk<kudu::rpc::Connection, &(kudu::rpc::Connection::ReadHandler(ev::io&, int))>(ev_loop*, ev_io*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x14dc6a)
    #18 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #19 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #20 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #21 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #22 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #23 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #24 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #25 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #26 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #27 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #28 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #29 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #30 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Mutex M179 (0x7ff8f97c3968) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xdde9)
    #2 __cxx_global_var_init.152 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:396:14 (libglog.so.1+0xdde9)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xdde9)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Mutex M183 (0x7ff8f97c3a08) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xded2)
    #2 __cxx_global_var_init.160 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:623:23 (libglog.so.1+0xded2)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xded2)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Thread T150 'rpc reactor-666' (tid=66679, running) created by main thread at:
    #0 pthread_create /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:966 (kudu-tool-test+0x4a52b5)
    #1 kudu::Thread::StartThread(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, unsigned long, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.cc:635:15 (libkudu_util.so+0x42d70a)
    #2 kudu::Thread::Create(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.h:146:12 (libmaster.so+0x2cf9b9)
    #3 kudu::rpc::ReactorThread::Init() ../src/kudu/rpc/reactor.cc:193:10 (libkrpc.so+0x18c03e)
    #4 kudu::rpc::Reactor::Init() ../src/kudu/rpc/reactor.cc:773:18 (libkrpc.so+0x1907c0)
    #5 kudu::rpc::Messenger::Init() ../src/kudu/rpc/messenger.cc:360:5 (libkrpc.so+0x160d6d)
    #6 kudu::rpc::MessengerBuilder::Build(std::__1::shared_ptr<kudu::rpc::Messenger>*) ../src/kudu/rpc/messenger.cc:107:3 (libkrpc.so+0x16082c)
    #7 kudu::server::ServerBase::Init() ../src/kudu/server/server_base.cc:851:3 (libserver_process.so+0x13ed4a)
    #8 kudu::kserver::KuduServer::Init() ../src/kudu/kserver/kserver.cc:144:3 (libkserver.so+0x12eb1)
    #9 kudu::tserver::TabletServer::Init() ../src/kudu/tserver/tablet_server.cc:106:3 (libtserver.so+0x25d062)
    #10 kudu::tserver::MiniTabletServer::Start() ../src/kudu/tserver/mini_tablet_server.cc:106:3 (libtserver.so+0x1e886b)
    #11 kudu::tserver::MiniTabletServer::Restart() ../src/kudu/tserver/mini_tablet_server.cc:131:10 (libtserver.so+0x1e8b08)
    #12 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9441:3 (kudu-tool-test+0x5dbe5b)
    #13 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #14 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #15 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #16 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #17 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #18 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #19 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #20 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #21 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #22 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #23 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

SUMMARY: ThreadSanitizer: data race /apache/dev/git/kudu/thirdparty/build/llvm-11.0.0.libcxx.tsan/include/c++/v1/__string:386:56 in copy
==================
==================
WARNING: ThreadSanitizer: data race (pid=66319)
  Read of size 8 at 0x7b4400132040 by main thread:
    #0 memcpy sanitizer_common/sanitizer_common_interceptors.inc:808 (kudu-tool-test+0x4a916c)
    #1 copy /apache/dev/git/kudu/thirdparty/build/llvm-11.0.0.libcxx.tsan/include/c++/v1/__string:386:56 (libc++.so.1+0xc7ad9)
    #2 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::append(char const*, unsigned long) /apache/dev/git/kudu/thirdparty/build/llvm-11.0.0.libcxx.tsan/include/c++/v1/string:2524:13 (libc++.so.1+0xc7ad9)
    #3 void JoinStringsIterator<std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> >(std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:219:13 (kudu-tool-test+0x6bc5a1)
    #4 void JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:168:3 (kudu-tool-test+0x6bc3f9)
    #5 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&) ../src/kudu/gutil/strings/join.h:175:3 (kudu-tool-test+0x608cf1)
    #6 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9485:5 (kudu-tool-test+0x5dc37d)
    #7 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #8 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #9 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #10 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #11 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #12 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #13 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #14 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #15 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #16 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #17 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

  Previous write of size 1 at 0x7b4400132047 by thread T11 (mutexes: write M179, read M183):
    #0 std::__1::char_traits<char>::assign(char&, char const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__string:361:73 (kudu-tool-test+0x635997)
    #1 std::__1::_MetaBase<__is_cpp17_forward_iterator<char*>::value>::_EnableIfImpl<void> std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__init<char*>(char*, char*) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2133:9 (kudu-tool-test+0x6569ba)
    #2 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::basic_string<char*, void>(char*, char*, std::__1::allocator<char> const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2156:5 (kudu-tool-test+0x666360)
    #3 std::__1::basic_stringbuf<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:444:16 (kudu-tool-test+0x66628b)
    #4 std::__1::basic_ostringstream<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:852:18 (libglog.so.1+0x1b3e7)
    #5 google::LogSink::ToString(int, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:2135:17 (libglog.so.1+0x1b3e7)
    #6 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:28 (kudu-tool-test+0x69d0d9)
    #7 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #8 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #9 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #10 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #11 kudu::master::RetryingTSRpcTask::RpcCallback() ../src/kudu/master/catalog_manager.cc:4567:5 (libmaster.so+0x32a1bc)
    #12 kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()::operator()() const ../src/kudu/master/catalog_manager.cc:4937:50 (libmaster.so+0x3874d1)
    #13 decltype(std::__1::forward<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()&>(fp)()) std::__1::__invoke<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()&>(kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libmaster.so+0x387461)
    #14 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()&>(kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libmaster.so+0x3873f1)
    #15 std::__1::__function::__alloc_func<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'(), std::__1::allocator<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libmaster.so+0x3873b1)
    #16 std::__1::__function::__func<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'(), std::__1::allocator<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libmaster.so+0x38604d)
    #17 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #18 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #19 kudu::rpc::OutboundCall::CallCallback() ../src/kudu/rpc/outbound_call.cc:309:5 (libkrpc.so+0x17a2d4)
    #20 kudu::rpc::OutboundCall::SetFailed(kudu::Status, kudu::rpc::OutboundCall::Phase, std::__1::unique_ptr<kudu::rpc::ErrorStatusPB, std::__1::default_delete<kudu::rpc::ErrorStatusPB> >) ../src/kudu/rpc/outbound_call.cc:400:3 (libkrpc.so+0x17a889)
    #21 kudu::rpc::Connection::Shutdown(kudu::Status const&, std::__1::unique_ptr<kudu::rpc::ErrorStatusPB, std::__1::default_delete<kudu::rpc::ErrorStatusPB> >) ../src/kudu/rpc/connection.cc:311:16 (libkrpc.so+0x140516)
    #22 kudu::rpc::ReactorThread::DestroyConnection(kudu::rpc::Connection*, kudu::Status const&, std::__1::unique_ptr<kudu::rpc::ErrorStatusPB, std::__1::default_delete<kudu::rpc::ErrorStatusPB> >) ../src/kudu/rpc/reactor.cc:694:9 (libkrpc.so+0x18dacb)
    #23 kudu::rpc::Connection::ReadHandler(ev::io&, int) ../src/kudu/rpc/connection.cc:672:24 (libkrpc.so+0x1427aa)
    #24 void ev::base<ev_io, ev::io>::method_thunk<kudu::rpc::Connection, &(kudu::rpc::Connection::ReadHandler(ev::io&, int))>(ev_loop*, ev_io*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x14dc6a)
    #25 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #26 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #27 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #28 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #29 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #30 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #31 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #32 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #33 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #34 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #35 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #36 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #37 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Location is heap block of size 288 at 0x7b4400132040 allocated by thread T11:
    #0 operator new(unsigned long) /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cpp:64 (kudu-tool-test+0x520ca7)
    #1 std::__1::__libcpp_allocate(unsigned long, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/new:253:10 (kudu-tool-test+0x627ce6)
    #2 std::__1::allocator<char>::allocate(unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1789:34 (kudu-tool-test+0x635b6e)
    #3 std::__1::allocator_traits<std::__1::allocator<char> >::allocate(std::__1::allocator<char>&, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1525:21 (kudu-tool-test+0x6357c0)
    #4 std::__1::_MetaBase<__is_cpp17_forward_iterator<char*>::value>::_EnableIfImpl<void> std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__init<char*>(char*, char*) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2127:15 (kudu-tool-test+0x656a1c)
    #5 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::basic_string<char*, void>(char*, char*, std::__1::allocator<char> const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2156:5 (kudu-tool-test+0x666360)
    #6 std::__1::basic_stringbuf<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:444:16 (kudu-tool-test+0x66628b)
    #7 std::__1::basic_ostringstream<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:852:18 (libglog.so.1+0x1b3e7)
    #8 google::LogSink::ToString(int, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:2135:17 (libglog.so.1+0x1b3e7)
    #9 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:28 (kudu-tool-test+0x69d0d9)
    #10 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #11 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #12 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #13 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #14 kudu::master::RetryingTSRpcTask::RpcCallback() ../src/kudu/master/catalog_manager.cc:4567:5 (libmaster.so+0x32a1bc)
    #15 kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()::operator()() const ../src/kudu/master/catalog_manager.cc:4937:50 (libmaster.so+0x3874d1)
    #16 decltype(std::__1::forward<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()&>(fp)()) std::__1::__invoke<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()&>(kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libmaster.so+0x387461)
    #17 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()&>(kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libmaster.so+0x3873f1)
    #18 std::__1::__function::__alloc_func<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'(), std::__1::allocator<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libmaster.so+0x3873b1)
    #19 std::__1::__function::__func<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'(), std::__1::allocator<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libmaster.so+0x38604d)
    #20 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #21 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #22 kudu::rpc::OutboundCall::CallCallback() ../src/kudu/rpc/outbound_call.cc:309:5 (libkrpc.so+0x17a2d4)
    #23 kudu::rpc::OutboundCall::SetFailed(kudu::Status, kudu::rpc::OutboundCall::Phase, std::__1::unique_ptr<kudu::rpc::ErrorStatusPB, std::__1::default_delete<kudu::rpc::ErrorStatusPB> >) ../src/kudu/rpc/outbound_call.cc:400:3 (libkrpc.so+0x17a889)
    #24 kudu::rpc::Connection::Shutdown(kudu::Status const&, std::__1::unique_ptr<kudu::rpc::ErrorStatusPB, std::__1::default_delete<kudu::rpc::ErrorStatusPB> >) ../src/kudu/rpc/connection.cc:311:16 (libkrpc.so+0x140516)
    #25 kudu::rpc::ReactorThread::DestroyConnection(kudu::rpc::Connection*, kudu::Status const&, std::__1::unique_ptr<kudu::rpc::ErrorStatusPB, std::__1::default_delete<kudu::rpc::ErrorStatusPB> >) ../src/kudu/rpc/reactor.cc:694:9 (libkrpc.so+0x18dacb)
    #26 kudu::rpc::Connection::ReadHandler(ev::io&, int) ../src/kudu/rpc/connection.cc:672:24 (libkrpc.so+0x1427aa)
    #27 void ev::base<ev_io, ev::io>::method_thunk<kudu::rpc::Connection, &(kudu::rpc::Connection::ReadHandler(ev::io&, int))>(ev_loop*, ev_io*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x14dc6a)
    #28 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #29 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #30 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #31 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #32 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #33 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #34 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #35 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #36 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #37 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #38 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #39 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #40 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Mutex M179 (0x7ff8f97c3968) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xdde9)
    #2 __cxx_global_var_init.152 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:396:14 (libglog.so.1+0xdde9)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xdde9)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Mutex M183 (0x7ff8f97c3a08) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xded2)
    #2 __cxx_global_var_init.160 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:623:23 (libglog.so.1+0xded2)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xded2)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Thread T11 'rpc reactor-663' (tid=66354, running) created by main thread at:
    #0 pthread_create /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:966 (kudu-tool-test+0x4a52b5)
    #1 kudu::Thread::StartThread(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, unsigned long, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.cc:635:15 (libkudu_util.so+0x42d70a)
    #2 kudu::Thread::Create(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.h:146:12 (libmaster.so+0x2cf9b9)
    #3 kudu::rpc::ReactorThread::Init() ../src/kudu/rpc/reactor.cc:193:10 (libkrpc.so+0x18c03e)
    #4 kudu::rpc::Reactor::Init() ../src/kudu/rpc/reactor.cc:773:18 (libkrpc.so+0x1907c0)
    #5 kudu::rpc::Messenger::Init() ../src/kudu/rpc/messenger.cc:360:5 (libkrpc.so+0x160d6d)
    #6 kudu::rpc::MessengerBuilder::Build(std::__1::shared_ptr<kudu::rpc::Messenger>*) ../src/kudu/rpc/messenger.cc:107:3 (libkrpc.so+0x16082c)
    #7 kudu::server::ServerBase::Init() ../src/kudu/server/server_base.cc:851:3 (libserver_process.so+0x13ed4a)
    #8 kudu::kserver::KuduServer::Init() ../src/kudu/kserver/kserver.cc:144:3 (libkserver.so+0x12eb1)
    #9 kudu::master::Master::Init() ../src/kudu/master/master.cc:291:3 (libmaster.so+0x3f3b40)
    #10 kudu::master::MiniMaster::Start() ../src/kudu/master/mini_master.cc:95:3 (libmaster.so+0x4469b0)
    #11 kudu::cluster::InternalMiniCluster::StartMasters() ../src/kudu/mini-cluster/internal_mini_cluster.cc:176:5 (libmini_cluster.so+0xd18ef)
    #12 kudu::cluster::InternalMiniCluster::Start() ../src/kudu/mini-cluster/internal_mini_cluster.cc:107:3 (libmini_cluster.so+0xd111b)
    #13 kudu::tools::ToolTest::StartMiniCluster(kudu::cluster::InternalMiniClusterOptions) ../src/kudu/tools/kudu-tool-test.cc:1280:3 (kudu-tool-test+0x522eed)
    #14 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9375:3 (kudu-tool-test+0x5db096)
    #15 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #16 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #17 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #18 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #19 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #20 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #21 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #22 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #23 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #24 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #25 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

SUMMARY: ThreadSanitizer: data race /apache/dev/git/kudu/thirdparty/build/llvm-11.0.0.libcxx.tsan/include/c++/v1/__string:386:56 in copy
==================
==================
WARNING: ThreadSanitizer: data race (pid=66319)
  Read of size 8 at 0x7b4400132118 by main thread:
    #0 memcpy sanitizer_common/sanitizer_common_interceptors.inc:808 (kudu-tool-test+0x4a916c)
    #1 copy /apache/dev/git/kudu/thirdparty/build/llvm-11.0.0.libcxx.tsan/include/c++/v1/__string:386:56 (libc++.so.1+0xc7ad9)
    #2 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::append(char const*, unsigned long) /apache/dev/git/kudu/thirdparty/build/llvm-11.0.0.libcxx.tsan/include/c++/v1/string:2524:13 (libc++.so.1+0xc7ad9)
    #3 void JoinStringsIterator<std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> >(std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:219:13 (kudu-tool-test+0x6bc5a1)
    #4 void JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:168:3 (kudu-tool-test+0x6bc3f9)
    #5 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&) ../src/kudu/gutil/strings/join.h:175:3 (kudu-tool-test+0x608cf1)
    #6 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9485:5 (kudu-tool-test+0x5dc37d)
    #7 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #8 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #9 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #10 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #11 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #12 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #13 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #14 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #15 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #16 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #17 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

  Previous write of size 8 at 0x7b4400132118 by thread T11 (mutexes: write M179, read M183):
    #0 operator new(unsigned long) /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cpp:64 (kudu-tool-test+0x520ca7)
    #1 std::__1::__libcpp_allocate(unsigned long, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/new:253:10 (kudu-tool-test+0x627ce6)
    #2 std::__1::allocator<char>::allocate(unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1789:34 (kudu-tool-test+0x635b6e)
    #3 std::__1::allocator_traits<std::__1::allocator<char> >::allocate(std::__1::allocator<char>&, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1525:21 (kudu-tool-test+0x6357c0)
    #4 std::__1::_MetaBase<__is_cpp17_forward_iterator<char*>::value>::_EnableIfImpl<void> std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__init<char*>(char*, char*) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2127:15 (kudu-tool-test+0x656a1c)
    #5 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::basic_string<char*, void>(char*, char*, std::__1::allocator<char> const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2156:5 (kudu-tool-test+0x666360)
    #6 std::__1::basic_stringbuf<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:444:16 (kudu-tool-test+0x66628b)
    #7 std::__1::basic_ostringstream<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:852:18 (libglog.so.1+0x1b3e7)
    #8 google::LogSink::ToString(int, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:2135:17 (libglog.so.1+0x1b3e7)
    #9 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:28 (kudu-tool-test+0x69d0d9)
    #10 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #11 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #12 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #13 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #14 kudu::master::RetryingTSRpcTask::RpcCallback() ../src/kudu/master/catalog_manager.cc:4567:5 (libmaster.so+0x32a1bc)
    #15 kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()::operator()() const ../src/kudu/master/catalog_manager.cc:4937:50 (libmaster.so+0x3874d1)
    #16 decltype(std::__1::forward<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()&>(fp)()) std::__1::__invoke<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()&>(kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libmaster.so+0x387461)
    #17 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()&>(kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libmaster.so+0x3873f1)
    #18 std::__1::__function::__alloc_func<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'(), std::__1::allocator<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libmaster.so+0x3873b1)
    #19 std::__1::__function::__func<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'(), std::__1::allocator<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libmaster.so+0x38604d)
    #20 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #21 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #22 kudu::rpc::OutboundCall::CallCallback() ../src/kudu/rpc/outbound_call.cc:309:5 (libkrpc.so+0x17a2d4)
    #23 kudu::rpc::OutboundCall::SetFailed(kudu::Status, kudu::rpc::OutboundCall::Phase, std::__1::unique_ptr<kudu::rpc::ErrorStatusPB, std::__1::default_delete<kudu::rpc::ErrorStatusPB> >) ../src/kudu/rpc/outbound_call.cc:400:3 (libkrpc.so+0x17a889)
    #24 kudu::rpc::Connection::Shutdown(kudu::Status const&, std::__1::unique_ptr<kudu::rpc::ErrorStatusPB, std::__1::default_delete<kudu::rpc::ErrorStatusPB> >) ../src/kudu/rpc/connection.cc:311:16 (libkrpc.so+0x140516)
    #25 kudu::rpc::ReactorThread::DestroyConnection(kudu::rpc::Connection*, kudu::Status const&, std::__1::unique_ptr<kudu::rpc::ErrorStatusPB, std::__1::default_delete<kudu::rpc::ErrorStatusPB> >) ../src/kudu/rpc/reactor.cc:694:9 (libkrpc.so+0x18dacb)
    #26 kudu::rpc::Connection::ReadHandler(ev::io&, int) ../src/kudu/rpc/connection.cc:672:24 (libkrpc.so+0x1427aa)
    #27 void ev::base<ev_io, ev::io>::method_thunk<kudu::rpc::Connection, &(kudu::rpc::Connection::ReadHandler(ev::io&, int))>(ev_loop*, ev_io*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x14dc6a)
    #28 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #29 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #30 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #31 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #32 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #33 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #34 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #35 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #36 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #37 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #38 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #39 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #40 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Location is heap block of size 288 at 0x7b4400132040 allocated by thread T11:
    #0 operator new(unsigned long) /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cpp:64 (kudu-tool-test+0x520ca7)
    #1 std::__1::__libcpp_allocate(unsigned long, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/new:253:10 (kudu-tool-test+0x627ce6)
    #2 std::__1::allocator<char>::allocate(unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1789:34 (kudu-tool-test+0x635b6e)
    #3 std::__1::allocator_traits<std::__1::allocator<char> >::allocate(std::__1::allocator<char>&, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1525:21 (kudu-tool-test+0x6357c0)
    #4 std::__1::_MetaBase<__is_cpp17_forward_iterator<char*>::value>::_EnableIfImpl<void> std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__init<char*>(char*, char*) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2127:15 (kudu-tool-test+0x656a1c)
    #5 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::basic_string<char*, void>(char*, char*, std::__1::allocator<char> const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2156:5 (kudu-tool-test+0x666360)
    #6 std::__1::basic_stringbuf<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:444:16 (kudu-tool-test+0x66628b)
    #7 std::__1::basic_ostringstream<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:852:18 (libglog.so.1+0x1b3e7)
    #8 google::LogSink::ToString(int, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:2135:17 (libglog.so.1+0x1b3e7)
    #9 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:28 (kudu-tool-test+0x69d0d9)
    #10 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #11 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #12 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #13 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #14 kudu::master::RetryingTSRpcTask::RpcCallback() ../src/kudu/master/catalog_manager.cc:4567:5 (libmaster.so+0x32a1bc)
    #15 kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()::operator()() const ../src/kudu/master/catalog_manager.cc:4937:50 (libmaster.so+0x3874d1)
    #16 decltype(std::__1::forward<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()&>(fp)()) std::__1::__invoke<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()&>(kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libmaster.so+0x387461)
    #17 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()&>(kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libmaster.so+0x3873f1)
    #18 std::__1::__function::__alloc_func<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'(), std::__1::allocator<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libmaster.so+0x3873b1)
    #19 std::__1::__function::__func<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'(), std::__1::allocator<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libmaster.so+0x38604d)
    #20 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #21 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #22 kudu::rpc::OutboundCall::CallCallback() ../src/kudu/rpc/outbound_call.cc:309:5 (libkrpc.so+0x17a2d4)
    #23 kudu::rpc::OutboundCall::SetFailed(kudu::Status, kudu::rpc::OutboundCall::Phase, std::__1::unique_ptr<kudu::rpc::ErrorStatusPB, std::__1::default_delete<kudu::rpc::ErrorStatusPB> >) ../src/kudu/rpc/outbound_call.cc:400:3 (libkrpc.so+0x17a889)
    #24 kudu::rpc::Connection::Shutdown(kudu::Status const&, std::__1::unique_ptr<kudu::rpc::ErrorStatusPB, std::__1::default_delete<kudu::rpc::ErrorStatusPB> >) ../src/kudu/rpc/connection.cc:311:16 (libkrpc.so+0x140516)
    #25 kudu::rpc::ReactorThread::DestroyConnection(kudu::rpc::Connection*, kudu::Status const&, std::__1::unique_ptr<kudu::rpc::ErrorStatusPB, std::__1::default_delete<kudu::rpc::ErrorStatusPB> >) ../src/kudu/rpc/reactor.cc:694:9 (libkrpc.so+0x18dacb)
    #26 kudu::rpc::Connection::ReadHandler(ev::io&, int) ../src/kudu/rpc/connection.cc:672:24 (libkrpc.so+0x1427aa)
    #27 void ev::base<ev_io, ev::io>::method_thunk<kudu::rpc::Connection, &(kudu::rpc::Connection::ReadHandler(ev::io&, int))>(ev_loop*, ev_io*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x14dc6a)
    #28 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #29 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #30 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #31 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #32 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #33 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #34 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #35 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #36 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #37 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #38 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #39 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #40 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Mutex M179 (0x7ff8f97c3968) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xdde9)
    #2 __cxx_global_var_init.152 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:396:14 (libglog.so.1+0xdde9)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xdde9)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Mutex M183 (0x7ff8f97c3a08) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xded2)
    #2 __cxx_global_var_init.160 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:623:23 (libglog.so.1+0xded2)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xded2)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Thread T11 'rpc reactor-663' (tid=66354, running) created by main thread at:
    #0 pthread_create /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:966 (kudu-tool-test+0x4a52b5)
    #1 kudu::Thread::StartThread(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, unsigned long, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.cc:635:15 (libkudu_util.so+0x42d70a)
    #2 kudu::Thread::Create(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.h:146:12 (libmaster.so+0x2cf9b9)
    #3 kudu::rpc::ReactorThread::Init() ../src/kudu/rpc/reactor.cc:193:10 (libkrpc.so+0x18c03e)
    #4 kudu::rpc::Reactor::Init() ../src/kudu/rpc/reactor.cc:773:18 (libkrpc.so+0x1907c0)
    #5 kudu::rpc::Messenger::Init() ../src/kudu/rpc/messenger.cc:360:5 (libkrpc.so+0x160d6d)
    #6 kudu::rpc::MessengerBuilder::Build(std::__1::shared_ptr<kudu::rpc::Messenger>*) ../src/kudu/rpc/messenger.cc:107:3 (libkrpc.so+0x16082c)
    #7 kudu::server::ServerBase::Init() ../src/kudu/server/server_base.cc:851:3 (libserver_process.so+0x13ed4a)
    #8 kudu::kserver::KuduServer::Init() ../src/kudu/kserver/kserver.cc:144:3 (libkserver.so+0x12eb1)
    #9 kudu::master::Master::Init() ../src/kudu/master/master.cc:291:3 (libmaster.so+0x3f3b40)
    #10 kudu::master::MiniMaster::Start() ../src/kudu/master/mini_master.cc:95:3 (libmaster.so+0x4469b0)
    #11 kudu::cluster::InternalMiniCluster::StartMasters() ../src/kudu/mini-cluster/internal_mini_cluster.cc:176:5 (libmini_cluster.so+0xd18ef)
    #12 kudu::cluster::InternalMiniCluster::Start() ../src/kudu/mini-cluster/internal_mini_cluster.cc:107:3 (libmini_cluster.so+0xd111b)
    #13 kudu::tools::ToolTest::StartMiniCluster(kudu::cluster::InternalMiniClusterOptions) ../src/kudu/tools/kudu-tool-test.cc:1280:3 (kudu-tool-test+0x522eed)
    #14 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9375:3 (kudu-tool-test+0x5db096)
    #15 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #16 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #17 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #18 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #19 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #20 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #21 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #22 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #23 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #24 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #25 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

SUMMARY: ThreadSanitizer: data race /apache/dev/git/kudu/thirdparty/build/llvm-11.0.0.libcxx.tsan/include/c++/v1/__string:386:56 in copy
==================
==================
WARNING: ThreadSanitizer: data race (pid=66319)
  Read of size 8 at 0x7b400007a300 by main thread:
    #0 memcpy sanitizer_common/sanitizer_common_interceptors.inc:808 (kudu-tool-test+0x4a916c)
    #1 copy /apache/dev/git/kudu/thirdparty/build/llvm-11.0.0.libcxx.tsan/include/c++/v1/__string:386:56 (libc++.so.1+0xc7ad9)
    #2 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::append(char const*, unsigned long) /apache/dev/git/kudu/thirdparty/build/llvm-11.0.0.libcxx.tsan/include/c++/v1/string:2524:13 (libc++.so.1+0xc7ad9)
    #3 void JoinStringsIterator<std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> >(std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:219:13 (kudu-tool-test+0x6bc5a1)
    #4 void JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:168:3 (kudu-tool-test+0x6bc3f9)
    #5 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&) ../src/kudu/gutil/strings/join.h:175:3 (kudu-tool-test+0x608cf1)
    #6 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9485:5 (kudu-tool-test+0x5dc37d)
    #7 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #8 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #9 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #10 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #11 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #12 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #13 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #14 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #15 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #16 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #17 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

  Previous write of size 8 at 0x7b400007a300 by thread T181 (mutexes: write M868485852320247120, write M179, read M183):
    #0 operator new(unsigned long) /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cpp:64 (kudu-tool-test+0x520ca7)
    #1 std::__1::__libcpp_allocate(unsigned long, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/new:253:10 (kudu-tool-test+0x627ce6)
    #2 std::__1::allocator<char>::allocate(unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1789:34 (kudu-tool-test+0x635b6e)
    #3 std::__1::allocator_traits<std::__1::allocator<char> >::allocate(std::__1::allocator<char>&, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1525:21 (kudu-tool-test+0x6357c0)
    #4 std::__1::_MetaBase<__is_cpp17_forward_iterator<char*>::value>::_EnableIfImpl<void> std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__init<char*>(char*, char*) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2127:15 (kudu-tool-test+0x656a1c)
    #5 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::basic_string<char*, void>(char*, char*, std::__1::allocator<char> const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2156:5 (kudu-tool-test+0x666360)
    #6 std::__1::basic_stringbuf<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:444:16 (kudu-tool-test+0x66628b)
    #7 std::__1::basic_ostringstream<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:852:18 (libglog.so.1+0x1b3e7)
    #8 google::LogSink::ToString(int, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:2135:17 (libglog.so.1+0x1b3e7)
    #9 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:28 (kudu-tool-test+0x69d0d9)
    #10 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #11 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #12 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #13 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #14 kudu::tserver::TabletCopyServiceImpl::EndTabletCopySession(kudu::tserver::EndTabletCopySessionRequestPB const*, kudu::tserver::EndTabletCopySessionResponsePB*, kudu::rpc::RpcContext*) ../src/kudu/tserver/tablet_copy_service.cc:342:5 (libtserver.so+0x243b54)
    #15 kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7::operator()(google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*) const /apache/dev/git/kudu/build/tsan/src/kudu/tserver/tablet_copy.service.cc:187:13 (libtablet_copy_proto.so+0x570d4)
    #16 decltype(std::__1::forward<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7&>(fp)(std::__1::forward<google::protobuf::Message const*>(fp0), std::__1::forward<google::protobuf::Message*>(fp0), std::__1::forward<kudu::rpc::RpcContext*>(fp0))) std::__1::__invoke<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7&, google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*>(kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7&, google::protobuf::Message const*&&, google::protobuf::Message*&&, kudu::rpc::RpcContext*&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libtablet_copy_proto.so+0x57062)
    #17 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7&, google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*>(kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7&, google::protobuf::Message const*&&, google::protobuf::Message*&&, kudu::rpc::RpcContext*&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libtablet_copy_proto.so+0x56f91)
    #18 std::__1::__function::__alloc_func<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7, std::__1::allocator<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7>, void (google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*)>::operator()(google::protobuf::Message const*&&, google::protobuf::Message*&&, kudu::rpc::RpcContext*&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libtablet_copy_proto.so+0x56f0c)
    #19 std::__1::__function::__func<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7, std::__1::allocator<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7>, void (google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*)>::operator()(google::protobuf::Message const*&&, google::protobuf::Message*&&, kudu::rpc::RpcContext*&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libtablet_copy_proto.so+0x561c2)
    #20 std::__1::__function::__value_func<void (google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*)>::operator()(google::protobuf::Message const*&&, google::protobuf::Message*&&, kudu::rpc::RpcContext*&&) const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (libkrpc.so+0x1e9a2c)
    #21 std::__1::function<void (google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*)>::operator()(google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*) const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (libkrpc.so+0x1e8e66)
    #22 kudu::rpc::GeneratedServiceIf::Handle(kudu::rpc::InboundCall*) ../src/kudu/rpc/service_if.cc:137:3 (libkrpc.so+0x1e880f)
    #23 kudu::rpc::ServicePool::RunThread() ../src/kudu/rpc/service_pool.cc:232:15 (libkrpc.so+0x1ebbf3)
    #24 kudu::rpc::ServicePool::Init(int)::$_0::operator()() const ../src/kudu/rpc/service_pool.cc:93:5 (libkrpc.so+0x1ecf31)
    #25 decltype(std::__1::forward<kudu::rpc::ServicePool::Init(int)::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ServicePool::Init(int)::$_0&>(kudu::rpc::ServicePool::Init(int)::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1ecee9)
    #26 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ServicePool::Init(int)::$_0&>(kudu::rpc::ServicePool::Init(int)::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x1ece79)
    #27 std::__1::__function::__alloc_func<kudu::rpc::ServicePool::Init(int)::$_0, std::__1::allocator<kudu::rpc::ServicePool::Init(int)::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x1ece41)
    #28 std::__1::__function::__func<kudu::rpc::ServicePool::Init(int)::$_0, std::__1::allocator<kudu::rpc::ServicePool::Init(int)::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x1ec13d)
    #29 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #30 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #31 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Location is heap block of size 256 at 0x7b400007a300 allocated by thread T181:
    #0 operator new(unsigned long) /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cpp:64 (kudu-tool-test+0x520ca7)
    #1 std::__1::__libcpp_allocate(unsigned long, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/new:253:10 (kudu-tool-test+0x627ce6)
    #2 std::__1::allocator<char>::allocate(unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1789:34 (kudu-tool-test+0x635b6e)
    #3 std::__1::allocator_traits<std::__1::allocator<char> >::allocate(std::__1::allocator<char>&, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1525:21 (kudu-tool-test+0x6357c0)
    #4 std::__1::_MetaBase<__is_cpp17_forward_iterator<char*>::value>::_EnableIfImpl<void> std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__init<char*>(char*, char*) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2127:15 (kudu-tool-test+0x656a1c)
    #5 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::basic_string<char*, void>(char*, char*, std::__1::allocator<char> const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2156:5 (kudu-tool-test+0x666360)
    #6 std::__1::basic_stringbuf<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:444:16 (kudu-tool-test+0x66628b)
    #7 std::__1::basic_ostringstream<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:852:18 (libglog.so.1+0x1b3e7)
    #8 google::LogSink::ToString(int, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:2135:17 (libglog.so.1+0x1b3e7)
    #9 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:28 (kudu-tool-test+0x69d0d9)
    #10 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #11 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #12 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #13 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #14 kudu::tserver::TabletCopyServiceImpl::EndTabletCopySession(kudu::tserver::EndTabletCopySessionRequestPB const*, kudu::tserver::EndTabletCopySessionResponsePB*, kudu::rpc::RpcContext*) ../src/kudu/tserver/tablet_copy_service.cc:342:5 (libtserver.so+0x243b54)
    #15 kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7::operator()(google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*) const /apache/dev/git/kudu/build/tsan/src/kudu/tserver/tablet_copy.service.cc:187:13 (libtablet_copy_proto.so+0x570d4)
    #16 decltype(std::__1::forward<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7&>(fp)(std::__1::forward<google::protobuf::Message const*>(fp0), std::__1::forward<google::protobuf::Message*>(fp0), std::__1::forward<kudu::rpc::RpcContext*>(fp0))) std::__1::__invoke<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7&, google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*>(kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7&, google::protobuf::Message const*&&, google::protobuf::Message*&&, kudu::rpc::RpcContext*&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libtablet_copy_proto.so+0x57062)
    #17 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7&, google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*>(kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7&, google::protobuf::Message const*&&, google::protobuf::Message*&&, kudu::rpc::RpcContext*&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libtablet_copy_proto.so+0x56f91)
    #18 std::__1::__function::__alloc_func<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7, std::__1::allocator<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7>, void (google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*)>::operator()(google::protobuf::Message const*&&, google::protobuf::Message*&&, kudu::rpc::RpcContext*&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libtablet_copy_proto.so+0x56f0c)
    #19 std::__1::__function::__func<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7, std::__1::allocator<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7>, void (google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*)>::operator()(google::protobuf::Message const*&&, google::protobuf::Message*&&, kudu::rpc::RpcContext*&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libtablet_copy_proto.so+0x561c2)
    #20 std::__1::__function::__value_func<void (google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*)>::operator()(google::protobuf::Message const*&&, google::protobuf::Message*&&, kudu::rpc::RpcContext*&&) const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (libkrpc.so+0x1e9a2c)
    #21 std::__1::function<void (google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*)>::operator()(google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*) const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (libkrpc.so+0x1e8e66)
    #22 kudu::rpc::GeneratedServiceIf::Handle(kudu::rpc::InboundCall*) ../src/kudu/rpc/service_if.cc:137:3 (libkrpc.so+0x1e880f)
    #23 kudu::rpc::ServicePool::RunThread() ../src/kudu/rpc/service_pool.cc:232:15 (libkrpc.so+0x1ebbf3)
    #24 kudu::rpc::ServicePool::Init(int)::$_0::operator()() const ../src/kudu/rpc/service_pool.cc:93:5 (libkrpc.so+0x1ecf31)
    #25 decltype(std::__1::forward<kudu::rpc::ServicePool::Init(int)::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ServicePool::Init(int)::$_0&>(kudu::rpc::ServicePool::Init(int)::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1ecee9)
    #26 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ServicePool::Init(int)::$_0&>(kudu::rpc::ServicePool::Init(int)::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x1ece79)
    #27 std::__1::__function::__alloc_func<kudu::rpc::ServicePool::Init(int)::$_0, std::__1::allocator<kudu::rpc::ServicePool::Init(int)::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x1ece41)
    #28 std::__1::__function::__func<kudu::rpc::ServicePool::Init(int)::$_0, std::__1::allocator<kudu::rpc::ServicePool::Init(int)::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x1ec13d)
    #29 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #30 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #31 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Mutex M868485852320247120 is already destroyed.

  Mutex M179 (0x7ff8f97c3968) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xdde9)
    #2 __cxx_global_var_init.152 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:396:14 (libglog.so.1+0xdde9)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xdde9)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Mutex M183 (0x7ff8f97c3a08) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xded2)
    #2 __cxx_global_var_init.160 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:623:23 (libglog.so.1+0xded2)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xded2)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Thread T181 'rpc worker-6672' (tid=66729, running) created by main thread at:
    #0 pthread_create /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:966 (kudu-tool-test+0x4a52b5)
    #1 kudu::Thread::StartThread(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, unsigned long, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.cc:635:15 (libkudu_util.so+0x42d70a)
    #2 kudu::Thread::Create(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.h:146:12 (libmaster.so+0x2cf9b9)
    #3 kudu::rpc::ServicePool::Init(int) ../src/kudu/rpc/service_pool.cc:93:5 (libkrpc.so+0x1eab8f)
    #4 kudu::RpcServer::RegisterService(std::__1::unique_ptr<kudu::rpc::ServiceIf, std::__1::default_delete<kudu::rpc::ServiceIf> >) ../src/kudu/server/rpc_server.cc:233:3 (libserver_process.so+0x12f23f)
    #5 kudu::server::ServerBase::RegisterService(std::__1::unique_ptr<kudu::rpc::ServiceIf, std::__1::default_delete<kudu::rpc::ServiceIf> >) ../src/kudu/server/server_base.cc:1041:23 (libserver_process.so+0x140aec)
    #6 kudu::tserver::TabletServer::Start() ../src/kudu/tserver/tablet_server.cc:157:3 (libtserver.so+0x25d878)
    #7 kudu::tserver::MiniTabletServer::Start() ../src/kudu/tserver/mini_tablet_server.cc:107:3 (libtserver.so+0x1e88a9)
    #8 kudu::tserver::MiniTabletServer::Restart() ../src/kudu/tserver/mini_tablet_server.cc:131:10 (libtserver.so+0x1e8b08)
    #9 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9441:3 (kudu-tool-test+0x5dbe5b)
    #10 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #11 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #12 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #13 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #14 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #15 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #16 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #17 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #18 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #19 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #20 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

SUMMARY: ThreadSanitizer: data race /apache/dev/git/kudu/thirdparty/build/llvm-11.0.0.libcxx.tsan/include/c++/v1/__string:386:56 in copy
==================
==================
WARNING: ThreadSanitizer: data race (pid=66319)
  Read of size 8 at 0x7b400007a3b8 by main thread:
    #0 memcpy sanitizer_common/sanitizer_common_interceptors.inc:808 (kudu-tool-test+0x4a916c)
    #1 copy /apache/dev/git/kudu/thirdparty/build/llvm-11.0.0.libcxx.tsan/include/c++/v1/__string:386:56 (libc++.so.1+0xc7ad9)
    #2 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::append(char const*, unsigned long) /apache/dev/git/kudu/thirdparty/build/llvm-11.0.0.libcxx.tsan/include/c++/v1/string:2524:13 (libc++.so.1+0xc7ad9)
    #3 void JoinStringsIterator<std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> >(std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:219:13 (kudu-tool-test+0x6bc5a1)
    #4 void JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:168:3 (kudu-tool-test+0x6bc3f9)
    #5 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&) ../src/kudu/gutil/strings/join.h:175:3 (kudu-tool-test+0x608cf1)
    #6 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9485:5 (kudu-tool-test+0x5dc37d)
    #7 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #8 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #9 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #10 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #11 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #12 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #13 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #14 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #15 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #16 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #17 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

  Previous write of size 1 at 0x7b400007a3bd by thread T181 (mutexes: write M868485852320247120, write M179, read M183):
    #0 std::__1::char_traits<char>::assign(char&, char const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__string:361:73 (kudu-tool-test+0x635997)
    #1 std::__1::_MetaBase<__is_cpp17_forward_iterator<char*>::value>::_EnableIfImpl<void> std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__init<char*>(char*, char*) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2133:9 (kudu-tool-test+0x6569ba)
    #2 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::basic_string<char*, void>(char*, char*, std::__1::allocator<char> const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2156:5 (kudu-tool-test+0x666360)
    #3 std::__1::basic_stringbuf<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:444:16 (kudu-tool-test+0x66628b)
    #4 std::__1::basic_ostringstream<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:852:18 (libglog.so.1+0x1b3e7)
    #5 google::LogSink::ToString(int, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:2135:17 (libglog.so.1+0x1b3e7)
    #6 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:28 (kudu-tool-test+0x69d0d9)
    #7 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #8 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #9 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #10 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #11 kudu::tserver::TabletCopyServiceImpl::EndTabletCopySession(kudu::tserver::EndTabletCopySessionRequestPB const*, kudu::tserver::EndTabletCopySessionResponsePB*, kudu::rpc::RpcContext*) ../src/kudu/tserver/tablet_copy_service.cc:342:5 (libtserver.so+0x243b54)
    #12 kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7::operator()(google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*) const /apache/dev/git/kudu/build/tsan/src/kudu/tserver/tablet_copy.service.cc:187:13 (libtablet_copy_proto.so+0x570d4)
    #13 decltype(std::__1::forward<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7&>(fp)(std::__1::forward<google::protobuf::Message const*>(fp0), std::__1::forward<google::protobuf::Message*>(fp0), std::__1::forward<kudu::rpc::RpcContext*>(fp0))) std::__1::__invoke<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7&, google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*>(kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7&, google::protobuf::Message const*&&, google::protobuf::Message*&&, kudu::rpc::RpcContext*&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libtablet_copy_proto.so+0x57062)
    #14 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7&, google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*>(kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7&, google::protobuf::Message const*&&, google::protobuf::Message*&&, kudu::rpc::RpcContext*&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libtablet_copy_proto.so+0x56f91)
    #15 std::__1::__function::__alloc_func<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7, std::__1::allocator<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7>, void (google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*)>::operator()(google::protobuf::Message const*&&, google::protobuf::Message*&&, kudu::rpc::RpcContext*&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libtablet_copy_proto.so+0x56f0c)
    #16 std::__1::__function::__func<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7, std::__1::allocator<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7>, void (google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*)>::operator()(google::protobuf::Message const*&&, google::protobuf::Message*&&, kudu::rpc::RpcContext*&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libtablet_copy_proto.so+0x561c2)
    #17 std::__1::__function::__value_func<void (google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*)>::operator()(google::protobuf::Message const*&&, google::protobuf::Message*&&, kudu::rpc::RpcContext*&&) const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (libkrpc.so+0x1e9a2c)
    #18 std::__1::function<void (google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*)>::operator()(google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*) const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (libkrpc.so+0x1e8e66)
    #19 kudu::rpc::GeneratedServiceIf::Handle(kudu::rpc::InboundCall*) ../src/kudu/rpc/service_if.cc:137:3 (libkrpc.so+0x1e880f)
    #20 kudu::rpc::ServicePool::RunThread() ../src/kudu/rpc/service_pool.cc:232:15 (libkrpc.so+0x1ebbf3)
    #21 kudu::rpc::ServicePool::Init(int)::$_0::operator()() const ../src/kudu/rpc/service_pool.cc:93:5 (libkrpc.so+0x1ecf31)
    #22 decltype(std::__1::forward<kudu::rpc::ServicePool::Init(int)::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ServicePool::Init(int)::$_0&>(kudu::rpc::ServicePool::Init(int)::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1ecee9)
    #23 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ServicePool::Init(int)::$_0&>(kudu::rpc::ServicePool::Init(int)::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x1ece79)
    #24 std::__1::__function::__alloc_func<kudu::rpc::ServicePool::Init(int)::$_0, std::__1::allocator<kudu::rpc::ServicePool::Init(int)::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x1ece41)
    #25 std::__1::__function::__func<kudu::rpc::ServicePool::Init(int)::$_0, std::__1::allocator<kudu::rpc::ServicePool::Init(int)::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x1ec13d)
    #26 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #27 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #28 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Location is heap block of size 256 at 0x7b400007a300 allocated by thread T181:
    #0 operator new(unsigned long) /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cpp:64 (kudu-tool-test+0x520ca7)
    #1 std::__1::__libcpp_allocate(unsigned long, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/new:253:10 (kudu-tool-test+0x627ce6)
    #2 std::__1::allocator<char>::allocate(unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1789:34 (kudu-tool-test+0x635b6e)
    #3 std::__1::allocator_traits<std::__1::allocator<char> >::allocate(std::__1::allocator<char>&, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1525:21 (kudu-tool-test+0x6357c0)
    #4 std::__1::_MetaBase<__is_cpp17_forward_iterator<char*>::value>::_EnableIfImpl<void> std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__init<char*>(char*, char*) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2127:15 (kudu-tool-test+0x656a1c)
    #5 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::basic_string<char*, void>(char*, char*, std::__1::allocator<char> const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2156:5 (kudu-tool-test+0x666360)
    #6 std::__1::basic_stringbuf<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:444:16 (kudu-tool-test+0x66628b)
    #7 std::__1::basic_ostringstream<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:852:18 (libglog.so.1+0x1b3e7)
    #8 google::LogSink::ToString(int, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:2135:17 (libglog.so.1+0x1b3e7)
    #9 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:28 (kudu-tool-test+0x69d0d9)
    #10 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #11 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #12 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #13 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #14 kudu::tserver::TabletCopyServiceImpl::EndTabletCopySession(kudu::tserver::EndTabletCopySessionRequestPB const*, kudu::tserver::EndTabletCopySessionResponsePB*, kudu::rpc::RpcContext*) ../src/kudu/tserver/tablet_copy_service.cc:342:5 (libtserver.so+0x243b54)
    #15 kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7::operator()(google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*) const /apache/dev/git/kudu/build/tsan/src/kudu/tserver/tablet_copy.service.cc:187:13 (libtablet_copy_proto.so+0x570d4)
    #16 decltype(std::__1::forward<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7&>(fp)(std::__1::forward<google::protobuf::Message const*>(fp0), std::__1::forward<google::protobuf::Message*>(fp0), std::__1::forward<kudu::rpc::RpcContext*>(fp0))) std::__1::__invoke<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7&, google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*>(kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7&, google::protobuf::Message const*&&, google::protobuf::Message*&&, kudu::rpc::RpcContext*&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libtablet_copy_proto.so+0x57062)
    #17 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7&, google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*>(kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7&, google::protobuf::Message const*&&, google::protobuf::Message*&&, kudu::rpc::RpcContext*&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libtablet_copy_proto.so+0x56f91)
    #18 std::__1::__function::__alloc_func<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7, std::__1::allocator<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7>, void (google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*)>::operator()(google::protobuf::Message const*&&, google::protobuf::Message*&&, kudu::rpc::RpcContext*&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libtablet_copy_proto.so+0x56f0c)
    #19 std::__1::__function::__func<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7, std::__1::allocator<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7>, void (google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*)>::operator()(google::protobuf::Message const*&&, google::protobuf::Message*&&, kudu::rpc::RpcContext*&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libtablet_copy_proto.so+0x561c2)
    #20 std::__1::__function::__value_func<void (google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*)>::operator()(google::protobuf::Message const*&&, google::protobuf::Message*&&, kudu::rpc::RpcContext*&&) const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (libkrpc.so+0x1e9a2c)
    #21 std::__1::function<void (google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*)>::operator()(google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*) const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (libkrpc.so+0x1e8e66)
    #22 kudu::rpc::GeneratedServiceIf::Handle(kudu::rpc::InboundCall*) ../src/kudu/rpc/service_if.cc:137:3 (libkrpc.so+0x1e880f)
    #23 kudu::rpc::ServicePool::RunThread() ../src/kudu/rpc/service_pool.cc:232:15 (libkrpc.so+0x1ebbf3)
    #24 kudu::rpc::ServicePool::Init(int)::$_0::operator()() const ../src/kudu/rpc/service_pool.cc:93:5 (libkrpc.so+0x1ecf31)
    #25 decltype(std::__1::forward<kudu::rpc::ServicePool::Init(int)::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ServicePool::Init(int)::$_0&>(kudu::rpc::ServicePool::Init(int)::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1ecee9)
    #26 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ServicePool::Init(int)::$_0&>(kudu::rpc::ServicePool::Init(int)::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x1ece79)
    #27 std::__1::__function::__alloc_func<kudu::rpc::ServicePool::Init(int)::$_0, std::__1::allocator<kudu::rpc::ServicePool::Init(int)::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x1ece41)
    #28 std::__1::__function::__func<kudu::rpc::ServicePool::Init(int)::$_0, std::__1::allocator<kudu::rpc::ServicePool::Init(int)::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x1ec13d)
    #29 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #30 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #31 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Mutex M868485852320247120 is already destroyed.

  Mutex M179 (0x7ff8f97c3968) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xdde9)
    #2 __cxx_global_var_init.152 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:396:14 (libglog.so.1+0xdde9)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xdde9)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Mutex M183 (0x7ff8f97c3a08) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xded2)
    #2 __cxx_global_var_init.160 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:623:23 (libglog.so.1+0xded2)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xded2)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Thread T181 'rpc worker-6672' (tid=66729, running) created by main thread at:
    #0 pthread_create /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:966 (kudu-tool-test+0x4a52b5)
    #1 kudu::Thread::StartThread(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, unsigned long, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.cc:635:15 (libkudu_util.so+0x42d70a)
    #2 kudu::Thread::Create(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.h:146:12 (libmaster.so+0x2cf9b9)
    #3 kudu::rpc::ServicePool::Init(int) ../src/kudu/rpc/service_pool.cc:93:5 (libkrpc.so+0x1eab8f)
    #4 kudu::RpcServer::RegisterService(std::__1::unique_ptr<kudu::rpc::ServiceIf, std::__1::default_delete<kudu::rpc::ServiceIf> >) ../src/kudu/server/rpc_server.cc:233:3 (libserver_process.so+0x12f23f)
    #5 kudu::server::ServerBase::RegisterService(std::__1::unique_ptr<kudu::rpc::ServiceIf, std::__1::default_delete<kudu::rpc::ServiceIf> >) ../src/kudu/server/server_base.cc:1041:23 (libserver_process.so+0x140aec)
    #6 kudu::tserver::TabletServer::Start() ../src/kudu/tserver/tablet_server.cc:157:3 (libtserver.so+0x25d878)
    #7 kudu::tserver::MiniTabletServer::Start() ../src/kudu/tserver/mini_tablet_server.cc:107:3 (libtserver.so+0x1e88a9)
    #8 kudu::tserver::MiniTabletServer::Restart() ../src/kudu/tserver/mini_tablet_server.cc:131:10 (libtserver.so+0x1e8b08)
    #9 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9441:3 (kudu-tool-test+0x5dbe5b)
    #10 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #11 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #12 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #13 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #14 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #15 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #16 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #17 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #18 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #19 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #20 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

SUMMARY: ThreadSanitizer: data race /apache/dev/git/kudu/thirdparty/build/llvm-11.0.0.libcxx.tsan/include/c++/v1/__string:386:56 in copy
==================
==================
WARNING: ThreadSanitizer: data race (pid=66319)
  Read of size 8 at 0x7b4400060900 by main thread:
    #0 memcpy sanitizer_common/sanitizer_common_interceptors.inc:808 (kudu-tool-test+0x4a916c)
    #1 copy /apache/dev/git/kudu/thirdparty/build/llvm-11.0.0.libcxx.tsan/include/c++/v1/__string:386:56 (libc++.so.1+0xc7ad9)
    #2 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::append(char const*, unsigned long) /apache/dev/git/kudu/thirdparty/build/llvm-11.0.0.libcxx.tsan/include/c++/v1/string:2524:13 (libc++.so.1+0xc7ad9)
    #3 void JoinStringsIterator<std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> >(std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:219:13 (kudu-tool-test+0x6bc5a1)
    #4 void JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:168:3 (kudu-tool-test+0x6bc3f9)
    #5 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&) ../src/kudu/gutil/strings/join.h:175:3 (kudu-tool-test+0x608cf1)
    #6 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9485:5 (kudu-tool-test+0x5dc37d)
    #7 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #8 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #9 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #10 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #11 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #12 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #13 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #14 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #15 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #16 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #17 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

  Previous write of size 1 at 0x7b4400060907 by thread T181 (mutexes: write M868485852320247120, write M179, read M183):
    #0 std::__1::char_traits<char>::assign(char&, char const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__string:361:73 (kudu-tool-test+0x635997)
    #1 std::__1::_MetaBase<__is_cpp17_forward_iterator<char*>::value>::_EnableIfImpl<void> std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__init<char*>(char*, char*) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2133:9 (kudu-tool-test+0x6569ba)
    #2 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::basic_string<char*, void>(char*, char*, std::__1::allocator<char> const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2156:5 (kudu-tool-test+0x666360)
    #3 std::__1::basic_stringbuf<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:444:16 (kudu-tool-test+0x66628b)
    #4 std::__1::basic_ostringstream<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:852:18 (libglog.so.1+0x1b3e7)
    #5 google::LogSink::ToString(int, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:2135:17 (libglog.so.1+0x1b3e7)
    #6 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:28 (kudu-tool-test+0x69d0d9)
    #7 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #8 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #9 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #10 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #11 kudu::tserver::TabletCopyServiceImpl::DoEndTabletCopySessionUnlocked(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, kudu::tserver::TabletCopyErrorPB_Code*) ../src/kudu/tserver/tablet_copy_service.cc:433:3 (libtserver.so+0x242d30)
    #12 kudu::tserver::TabletCopyServiceImpl::EndTabletCopySession(kudu::tserver::EndTabletCopySessionRequestPB const*, kudu::tserver::EndTabletCopySessionResponsePB*, kudu::rpc::RpcContext*) ../src/kudu/tserver/tablet_copy_service.cc:344:5 (libtserver.so+0x243b6f)
    #13 kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7::operator()(google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*) const /apache/dev/git/kudu/build/tsan/src/kudu/tserver/tablet_copy.service.cc:187:13 (libtablet_copy_proto.so+0x570d4)
    #14 decltype(std::__1::forward<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7&>(fp)(std::__1::forward<google::protobuf::Message const*>(fp0), std::__1::forward<google::protobuf::Message*>(fp0), std::__1::forward<kudu::rpc::RpcContext*>(fp0))) std::__1::__invoke<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7&, google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*>(kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7&, google::protobuf::Message const*&&, google::protobuf::Message*&&, kudu::rpc::RpcContext*&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libtablet_copy_proto.so+0x57062)
    #15 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7&, google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*>(kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7&, google::protobuf::Message const*&&, google::protobuf::Message*&&, kudu::rpc::RpcContext*&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libtablet_copy_proto.so+0x56f91)
    #16 std::__1::__function::__alloc_func<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7, std::__1::allocator<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7>, void (google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*)>::operator()(google::protobuf::Message const*&&, google::protobuf::Message*&&, kudu::rpc::RpcContext*&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libtablet_copy_proto.so+0x56f0c)
    #17 std::__1::__function::__func<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7, std::__1::allocator<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7>, void (google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*)>::operator()(google::protobuf::Message const*&&, google::protobuf::Message*&&, kudu::rpc::RpcContext*&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libtablet_copy_proto.so+0x561c2)
    #18 std::__1::__function::__value_func<void (google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*)>::operator()(google::protobuf::Message const*&&, google::protobuf::Message*&&, kudu::rpc::RpcContext*&&) const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (libkrpc.so+0x1e9a2c)
    #19 std::__1::function<void (google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*)>::operator()(google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*) const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (libkrpc.so+0x1e8e66)
    #20 kudu::rpc::GeneratedServiceIf::Handle(kudu::rpc::InboundCall*) ../src/kudu/rpc/service_if.cc:137:3 (libkrpc.so+0x1e880f)
    #21 kudu::rpc::ServicePool::RunThread() ../src/kudu/rpc/service_pool.cc:232:15 (libkrpc.so+0x1ebbf3)
    #22 kudu::rpc::ServicePool::Init(int)::$_0::operator()() const ../src/kudu/rpc/service_pool.cc:93:5 (libkrpc.so+0x1ecf31)
    #23 decltype(std::__1::forward<kudu::rpc::ServicePool::Init(int)::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ServicePool::Init(int)::$_0&>(kudu::rpc::ServicePool::Init(int)::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1ecee9)
    #24 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ServicePool::Init(int)::$_0&>(kudu::rpc::ServicePool::Init(int)::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x1ece79)
    #25 std::__1::__function::__alloc_func<kudu::rpc::ServicePool::Init(int)::$_0, std::__1::allocator<kudu::rpc::ServicePool::Init(int)::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x1ece41)
    #26 std::__1::__function::__func<kudu::rpc::ServicePool::Init(int)::$_0, std::__1::allocator<kudu::rpc::ServicePool::Init(int)::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x1ec13d)
    #27 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #28 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #29 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Location is heap block of size 288 at 0x7b4400060900 allocated by thread T181:
    #0 operator new(unsigned long) /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cpp:64 (kudu-tool-test+0x520ca7)
    #1 std::__1::__libcpp_allocate(unsigned long, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/new:253:10 (kudu-tool-test+0x627ce6)
    #2 std::__1::allocator<char>::allocate(unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1789:34 (kudu-tool-test+0x635b6e)
    #3 std::__1::allocator_traits<std::__1::allocator<char> >::allocate(std::__1::allocator<char>&, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1525:21 (kudu-tool-test+0x6357c0)
    #4 std::__1::_MetaBase<__is_cpp17_forward_iterator<char*>::value>::_EnableIfImpl<void> std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__init<char*>(char*, char*) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2127:15 (kudu-tool-test+0x656a1c)
    #5 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::basic_string<char*, void>(char*, char*, std::__1::allocator<char> const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2156:5 (kudu-tool-test+0x666360)
    #6 std::__1::basic_stringbuf<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:444:16 (kudu-tool-test+0x66628b)
    #7 std::__1::basic_ostringstream<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:852:18 (libglog.so.1+0x1b3e7)
    #8 google::LogSink::ToString(int, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:2135:17 (libglog.so.1+0x1b3e7)
    #9 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:28 (kudu-tool-test+0x69d0d9)
    #10 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #11 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #12 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #13 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #14 kudu::tserver::TabletCopyServiceImpl::DoEndTabletCopySessionUnlocked(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, kudu::tserver::TabletCopyErrorPB_Code*) ../src/kudu/tserver/tablet_copy_service.cc:433:3 (libtserver.so+0x242d30)
    #15 kudu::tserver::TabletCopyServiceImpl::EndTabletCopySession(kudu::tserver::EndTabletCopySessionRequestPB const*, kudu::tserver::EndTabletCopySessionResponsePB*, kudu::rpc::RpcContext*) ../src/kudu/tserver/tablet_copy_service.cc:344:5 (libtserver.so+0x243b6f)
    #16 kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7::operator()(google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*) const /apache/dev/git/kudu/build/tsan/src/kudu/tserver/tablet_copy.service.cc:187:13 (libtablet_copy_proto.so+0x570d4)
    #17 decltype(std::__1::forward<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7&>(fp)(std::__1::forward<google::protobuf::Message const*>(fp0), std::__1::forward<google::protobuf::Message*>(fp0), std::__1::forward<kudu::rpc::RpcContext*>(fp0))) std::__1::__invoke<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7&, google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*>(kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7&, google::protobuf::Message const*&&, google::protobuf::Message*&&, kudu::rpc::RpcContext*&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libtablet_copy_proto.so+0x57062)
    #18 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7&, google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*>(kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7&, google::protobuf::Message const*&&, google::protobuf::Message*&&, kudu::rpc::RpcContext*&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libtablet_copy_proto.so+0x56f91)
    #19 std::__1::__function::__alloc_func<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7, std::__1::allocator<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7>, void (google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*)>::operator()(google::protobuf::Message const*&&, google::protobuf::Message*&&, kudu::rpc::RpcContext*&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libtablet_copy_proto.so+0x56f0c)
    #20 std::__1::__function::__func<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7, std::__1::allocator<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7>, void (google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*)>::operator()(google::protobuf::Message const*&&, google::protobuf::Message*&&, kudu::rpc::RpcContext*&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libtablet_copy_proto.so+0x561c2)
    #21 std::__1::__function::__value_func<void (google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*)>::operator()(google::protobuf::Message const*&&, google::protobuf::Message*&&, kudu::rpc::RpcContext*&&) const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (libkrpc.so+0x1e9a2c)
    #22 std::__1::function<void (google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*)>::operator()(google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*) const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (libkrpc.so+0x1e8e66)
    #23 kudu::rpc::GeneratedServiceIf::Handle(kudu::rpc::InboundCall*) ../src/kudu/rpc/service_if.cc:137:3 (libkrpc.so+0x1e880f)
    #24 kudu::rpc::ServicePool::RunThread() ../src/kudu/rpc/service_pool.cc:232:15 (libkrpc.so+0x1ebbf3)
    #25 kudu::rpc::ServicePool::Init(int)::$_0::operator()() const ../src/kudu/rpc/service_pool.cc:93:5 (libkrpc.so+0x1ecf31)
    #26 decltype(std::__1::forward<kudu::rpc::ServicePool::Init(int)::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ServicePool::Init(int)::$_0&>(kudu::rpc::ServicePool::Init(int)::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1ecee9)
    #27 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ServicePool::Init(int)::$_0&>(kudu::rpc::ServicePool::Init(int)::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x1ece79)
    #28 std::__1::__function::__alloc_func<kudu::rpc::ServicePool::Init(int)::$_0, std::__1::allocator<kudu::rpc::ServicePool::Init(int)::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x1ece41)
    #29 std::__1::__function::__func<kudu::rpc::ServicePool::Init(int)::$_0, std::__1::allocator<kudu::rpc::ServicePool::Init(int)::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x1ec13d)
    #30 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #31 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #32 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Mutex M868485852320247120 is already destroyed.

  Mutex M179 (0x7ff8f97c3968) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xdde9)
    #2 __cxx_global_var_init.152 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:396:14 (libglog.so.1+0xdde9)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xdde9)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Mutex M183 (0x7ff8f97c3a08) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xded2)
    #2 __cxx_global_var_init.160 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:623:23 (libglog.so.1+0xded2)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xded2)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Thread T181 'rpc worker-6672' (tid=66729, running) created by main thread at:
    #0 pthread_create /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:966 (kudu-tool-test+0x4a52b5)
    #1 kudu::Thread::StartThread(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, unsigned long, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.cc:635:15 (libkudu_util.so+0x42d70a)
    #2 kudu::Thread::Create(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.h:146:12 (libmaster.so+0x2cf9b9)
    #3 kudu::rpc::ServicePool::Init(int) ../src/kudu/rpc/service_pool.cc:93:5 (libkrpc.so+0x1eab8f)
    #4 kudu::RpcServer::RegisterService(std::__1::unique_ptr<kudu::rpc::ServiceIf, std::__1::default_delete<kudu::rpc::ServiceIf> >) ../src/kudu/server/rpc_server.cc:233:3 (libserver_process.so+0x12f23f)
    #5 kudu::server::ServerBase::RegisterService(std::__1::unique_ptr<kudu::rpc::ServiceIf, std::__1::default_delete<kudu::rpc::ServiceIf> >) ../src/kudu/server/server_base.cc:1041:23 (libserver_process.so+0x140aec)
    #6 kudu::tserver::TabletServer::Start() ../src/kudu/tserver/tablet_server.cc:157:3 (libtserver.so+0x25d878)
    #7 kudu::tserver::MiniTabletServer::Start() ../src/kudu/tserver/mini_tablet_server.cc:107:3 (libtserver.so+0x1e88a9)
    #8 kudu::tserver::MiniTabletServer::Restart() ../src/kudu/tserver/mini_tablet_server.cc:131:10 (libtserver.so+0x1e8b08)
    #9 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9441:3 (kudu-tool-test+0x5dbe5b)
    #10 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #11 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #12 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #13 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #14 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #15 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #16 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #17 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #18 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #19 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #20 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

SUMMARY: ThreadSanitizer: data race /apache/dev/git/kudu/thirdparty/build/llvm-11.0.0.libcxx.tsan/include/c++/v1/__string:386:56 in copy
==================
==================
WARNING: ThreadSanitizer: data race (pid=66319)
  Read of size 8 at 0x7b44000609d8 by main thread:
    #0 memcpy sanitizer_common/sanitizer_common_interceptors.inc:808 (kudu-tool-test+0x4a916c)
    #1 copy /apache/dev/git/kudu/thirdparty/build/llvm-11.0.0.libcxx.tsan/include/c++/v1/__string:386:56 (libc++.so.1+0xc7ad9)
    #2 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::append(char const*, unsigned long) /apache/dev/git/kudu/thirdparty/build/llvm-11.0.0.libcxx.tsan/include/c++/v1/string:2524:13 (libc++.so.1+0xc7ad9)
    #3 void JoinStringsIterator<std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> >(std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:219:13 (kudu-tool-test+0x6bc5a1)
    #4 void JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:168:3 (kudu-tool-test+0x6bc3f9)
    #5 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&) ../src/kudu/gutil/strings/join.h:175:3 (kudu-tool-test+0x608cf1)
    #6 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9485:5 (kudu-tool-test+0x5dc37d)
    #7 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #8 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #9 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #10 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #11 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #12 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #13 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #14 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #15 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #16 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #17 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

  Previous write of size 8 at 0x7b44000609d8 by thread T181 (mutexes: write M868485852320247120, write M179, read M183):
    #0 operator new(unsigned long) /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cpp:64 (kudu-tool-test+0x520ca7)
    #1 std::__1::__libcpp_allocate(unsigned long, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/new:253:10 (kudu-tool-test+0x627ce6)
    #2 std::__1::allocator<char>::allocate(unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1789:34 (kudu-tool-test+0x635b6e)
    #3 std::__1::allocator_traits<std::__1::allocator<char> >::allocate(std::__1::allocator<char>&, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1525:21 (kudu-tool-test+0x6357c0)
    #4 std::__1::_MetaBase<__is_cpp17_forward_iterator<char*>::value>::_EnableIfImpl<void> std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__init<char*>(char*, char*) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2127:15 (kudu-tool-test+0x656a1c)
    #5 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::basic_string<char*, void>(char*, char*, std::__1::allocator<char> const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2156:5 (kudu-tool-test+0x666360)
    #6 std::__1::basic_stringbuf<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:444:16 (kudu-tool-test+0x66628b)
    #7 std::__1::basic_ostringstream<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:852:18 (libglog.so.1+0x1b3e7)
    #8 google::LogSink::ToString(int, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:2135:17 (libglog.so.1+0x1b3e7)
    #9 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:28 (kudu-tool-test+0x69d0d9)
    #10 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #11 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #12 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #13 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #14 kudu::tserver::TabletCopyServiceImpl::DoEndTabletCopySessionUnlocked(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, kudu::tserver::TabletCopyErrorPB_Code*) ../src/kudu/tserver/tablet_copy_service.cc:433:3 (libtserver.so+0x242d30)
    #15 kudu::tserver::TabletCopyServiceImpl::EndTabletCopySession(kudu::tserver::EndTabletCopySessionRequestPB const*, kudu::tserver::EndTabletCopySessionResponsePB*, kudu::rpc::RpcContext*) ../src/kudu/tserver/tablet_copy_service.cc:344:5 (libtserver.so+0x243b6f)
    #16 kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7::operator()(google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*) const /apache/dev/git/kudu/build/tsan/src/kudu/tserver/tablet_copy.service.cc:187:13 (libtablet_copy_proto.so+0x570d4)
    #17 decltype(std::__1::forward<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7&>(fp)(std::__1::forward<google::protobuf::Message const*>(fp0), std::__1::forward<google::protobuf::Message*>(fp0), std::__1::forward<kudu::rpc::RpcContext*>(fp0))) std::__1::__invoke<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7&, google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*>(kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7&, google::protobuf::Message const*&&, google::protobuf::Message*&&, kudu::rpc::RpcContext*&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libtablet_copy_proto.so+0x57062)
    #18 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7&, google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*>(kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7&, google::protobuf::Message const*&&, google::protobuf::Message*&&, kudu::rpc::RpcContext*&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libtablet_copy_proto.so+0x56f91)
    #19 std::__1::__function::__alloc_func<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7, std::__1::allocator<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7>, void (google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*)>::operator()(google::protobuf::Message const*&&, google::protobuf::Message*&&, kudu::rpc::RpcContext*&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libtablet_copy_proto.so+0x56f0c)
    #20 std::__1::__function::__func<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7, std::__1::allocator<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7>, void (google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*)>::operator()(google::protobuf::Message const*&&, google::protobuf::Message*&&, kudu::rpc::RpcContext*&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libtablet_copy_proto.so+0x561c2)
    #21 std::__1::__function::__value_func<void (google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*)>::operator()(google::protobuf::Message const*&&, google::protobuf::Message*&&, kudu::rpc::RpcContext*&&) const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (libkrpc.so+0x1e9a2c)
    #22 std::__1::function<void (google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*)>::operator()(google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*) const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (libkrpc.so+0x1e8e66)
    #23 kudu::rpc::GeneratedServiceIf::Handle(kudu::rpc::InboundCall*) ../src/kudu/rpc/service_if.cc:137:3 (libkrpc.so+0x1e880f)
    #24 kudu::rpc::ServicePool::RunThread() ../src/kudu/rpc/service_pool.cc:232:15 (libkrpc.so+0x1ebbf3)
    #25 kudu::rpc::ServicePool::Init(int)::$_0::operator()() const ../src/kudu/rpc/service_pool.cc:93:5 (libkrpc.so+0x1ecf31)
    #26 decltype(std::__1::forward<kudu::rpc::ServicePool::Init(int)::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ServicePool::Init(int)::$_0&>(kudu::rpc::ServicePool::Init(int)::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1ecee9)
    #27 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ServicePool::Init(int)::$_0&>(kudu::rpc::ServicePool::Init(int)::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x1ece79)
    #28 std::__1::__function::__alloc_func<kudu::rpc::ServicePool::Init(int)::$_0, std::__1::allocator<kudu::rpc::ServicePool::Init(int)::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x1ece41)
    #29 std::__1::__function::__func<kudu::rpc::ServicePool::Init(int)::$_0, std::__1::allocator<kudu::rpc::ServicePool::Init(int)::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x1ec13d)
    #30 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #31 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #32 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Location is heap block of size 288 at 0x7b4400060900 allocated by thread T181:
    #0 operator new(unsigned long) /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cpp:64 (kudu-tool-test+0x520ca7)
    #1 std::__1::__libcpp_allocate(unsigned long, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/new:253:10 (kudu-tool-test+0x627ce6)
    #2 std::__1::allocator<char>::allocate(unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1789:34 (kudu-tool-test+0x635b6e)
    #3 std::__1::allocator_traits<std::__1::allocator<char> >::allocate(std::__1::allocator<char>&, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1525:21 (kudu-tool-test+0x6357c0)
    #4 std::__1::_MetaBase<__is_cpp17_forward_iterator<char*>::value>::_EnableIfImpl<void> std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__init<char*>(char*, char*) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2127:15 (kudu-tool-test+0x656a1c)
    #5 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::basic_string<char*, void>(char*, char*, std::__1::allocator<char> const&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:2156:5 (kudu-tool-test+0x666360)
    #6 std::__1::basic_stringbuf<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:444:16 (kudu-tool-test+0x66628b)
    #7 std::__1::basic_ostringstream<char, std::__1::char_traits<char>, std::__1::allocator<char> >::str() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/sstream:852:18 (libglog.so.1+0x1b3e7)
    #8 google::LogSink::ToString(int, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:2135:17 (libglog.so.1+0x1b3e7)
    #9 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:28 (kudu-tool-test+0x69d0d9)
    #10 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #11 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #12 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #13 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #14 kudu::tserver::TabletCopyServiceImpl::DoEndTabletCopySessionUnlocked(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, kudu::tserver::TabletCopyErrorPB_Code*) ../src/kudu/tserver/tablet_copy_service.cc:433:3 (libtserver.so+0x242d30)
    #15 kudu::tserver::TabletCopyServiceImpl::EndTabletCopySession(kudu::tserver::EndTabletCopySessionRequestPB const*, kudu::tserver::EndTabletCopySessionResponsePB*, kudu::rpc::RpcContext*) ../src/kudu/tserver/tablet_copy_service.cc:344:5 (libtserver.so+0x243b6f)
    #16 kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7::operator()(google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*) const /apache/dev/git/kudu/build/tsan/src/kudu/tserver/tablet_copy.service.cc:187:13 (libtablet_copy_proto.so+0x570d4)
    #17 decltype(std::__1::forward<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7&>(fp)(std::__1::forward<google::protobuf::Message const*>(fp0), std::__1::forward<google::protobuf::Message*>(fp0), std::__1::forward<kudu::rpc::RpcContext*>(fp0))) std::__1::__invoke<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7&, google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*>(kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7&, google::protobuf::Message const*&&, google::protobuf::Message*&&, kudu::rpc::RpcContext*&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libtablet_copy_proto.so+0x57062)
    #18 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7&, google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*>(kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7&, google::protobuf::Message const*&&, google::protobuf::Message*&&, kudu::rpc::RpcContext*&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libtablet_copy_proto.so+0x56f91)
    #19 std::__1::__function::__alloc_func<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7, std::__1::allocator<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7>, void (google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*)>::operator()(google::protobuf::Message const*&&, google::protobuf::Message*&&, kudu::rpc::RpcContext*&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libtablet_copy_proto.so+0x56f0c)
    #20 std::__1::__function::__func<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7, std::__1::allocator<kudu::tserver::TabletCopyServiceIf::TabletCopyServiceIf(scoped_refptr<kudu::MetricEntity> const&, scoped_refptr<kudu::rpc::ResultTracker> const&)::$_7>, void (google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*)>::operator()(google::protobuf::Message const*&&, google::protobuf::Message*&&, kudu::rpc::RpcContext*&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libtablet_copy_proto.so+0x561c2)
    #21 std::__1::__function::__value_func<void (google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*)>::operator()(google::protobuf::Message const*&&, google::protobuf::Message*&&, kudu::rpc::RpcContext*&&) const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (libkrpc.so+0x1e9a2c)
    #22 std::__1::function<void (google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*)>::operator()(google::protobuf::Message const*, google::protobuf::Message*, kudu::rpc::RpcContext*) const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (libkrpc.so+0x1e8e66)
    #23 kudu::rpc::GeneratedServiceIf::Handle(kudu::rpc::InboundCall*) ../src/kudu/rpc/service_if.cc:137:3 (libkrpc.so+0x1e880f)
    #24 kudu::rpc::ServicePool::RunThread() ../src/kudu/rpc/service_pool.cc:232:15 (libkrpc.so+0x1ebbf3)
    #25 kudu::rpc::ServicePool::Init(int)::$_0::operator()() const ../src/kudu/rpc/service_pool.cc:93:5 (libkrpc.so+0x1ecf31)
    #26 decltype(std::__1::forward<kudu::rpc::ServicePool::Init(int)::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ServicePool::Init(int)::$_0&>(kudu::rpc::ServicePool::Init(int)::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1ecee9)
    #27 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ServicePool::Init(int)::$_0&>(kudu::rpc::ServicePool::Init(int)::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x1ece79)
    #28 std::__1::__function::__alloc_func<kudu::rpc::ServicePool::Init(int)::$_0, std::__1::allocator<kudu::rpc::ServicePool::Init(int)::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x1ece41)
    #29 std::__1::__function::__func<kudu::rpc::ServicePool::Init(int)::$_0, std::__1::allocator<kudu::rpc::ServicePool::Init(int)::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x1ec13d)
    #30 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #31 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #32 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Mutex M868485852320247120 is already destroyed.

  Mutex M179 (0x7ff8f97c3968) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xdde9)
    #2 __cxx_global_var_init.152 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:396:14 (libglog.so.1+0xdde9)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xdde9)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Mutex M183 (0x7ff8f97c3a08) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xded2)
    #2 __cxx_global_var_init.160 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:623:23 (libglog.so.1+0xded2)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xded2)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Thread T181 'rpc worker-6672' (tid=66729, running) created by main thread at:
    #0 pthread_create /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:966 (kudu-tool-test+0x4a52b5)
    #1 kudu::Thread::StartThread(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, unsigned long, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.cc:635:15 (libkudu_util.so+0x42d70a)
    #2 kudu::Thread::Create(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.h:146:12 (libmaster.so+0x2cf9b9)
    #3 kudu::rpc::ServicePool::Init(int) ../src/kudu/rpc/service_pool.cc:93:5 (libkrpc.so+0x1eab8f)
    #4 kudu::RpcServer::RegisterService(std::__1::unique_ptr<kudu::rpc::ServiceIf, std::__1::default_delete<kudu::rpc::ServiceIf> >) ../src/kudu/server/rpc_server.cc:233:3 (libserver_process.so+0x12f23f)
    #5 kudu::server::ServerBase::RegisterService(std::__1::unique_ptr<kudu::rpc::ServiceIf, std::__1::default_delete<kudu::rpc::ServiceIf> >) ../src/kudu/server/server_base.cc:1041:23 (libserver_process.so+0x140aec)
    #6 kudu::tserver::TabletServer::Start() ../src/kudu/tserver/tablet_server.cc:157:3 (libtserver.so+0x25d878)
    #7 kudu::tserver::MiniTabletServer::Start() ../src/kudu/tserver/mini_tablet_server.cc:107:3 (libtserver.so+0x1e88a9)
    #8 kudu::tserver::MiniTabletServer::Restart() ../src/kudu/tserver/mini_tablet_server.cc:131:10 (libtserver.so+0x1e8b08)
    #9 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9441:3 (kudu-tool-test+0x5dbe5b)
    #10 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #11 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #12 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #13 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #14 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #15 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #16 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #17 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #18 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #19 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #20 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

SUMMARY: ThreadSanitizer: data race /apache/dev/git/kudu/thirdparty/build/llvm-11.0.0.libcxx.tsan/include/c++/v1/__string:386:56 in copy
==================
==================
WARNING: ThreadSanitizer: data race (pid=66319)
  Read of size 8 at 0x7b6800026d28 by main thread:
    #0 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__get_long_pointer() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:1505:34 (kudu-tool-test+0x633ae5)
    #1 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__get_pointer() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:1517:31 (kudu-tool-test+0x633a65)
    #2 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::data() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:1245:75 (kudu-tool-test+0x6339a9)
    #3 void JoinStringsIterator<std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> >(std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:219:26 (kudu-tool-test+0x6bc580)
    #4 void JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:168:3 (kudu-tool-test+0x6bc3f9)
    #5 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&) ../src/kudu/gutil/strings/join.h:175:3 (kudu-tool-test+0x608cf1)
    #6 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9485:5 (kudu-tool-test+0x5dc37d)
    #7 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #8 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #9 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #10 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #11 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #12 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #13 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #14 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #15 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #16 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #17 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

  Previous write of size 8 at 0x7b6800026d28 by thread T152 (mutexes: write M179, read M183):
    #0 memcpy sanitizer_common/sanitizer_common_interceptors.inc:808 (kudu-tool-test+0x4a916c)
    #1 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::basic_string(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:1936:7 (kudu-tool-test+0x62ea0d)
    #2 void std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >::construct<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1809:31 (kudu-tool-test+0x648498)
    #3 void std::__1::allocator_traits<std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::__construct<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::integral_constant<bool, true>, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1687:21 (kudu-tool-test+0x648451)
    #4 void std::__1::allocator_traits<std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::construct<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1538:14 (kudu-tool-test+0x6483c1)
    #5 void std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::__construct_one_at_end<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:926:5 (kudu-tool-test+0x6b4fe9)
    #6 std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::push_back(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1656:9 (kudu-tool-test+0x60ad34)
    #7 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:18 (kudu-tool-test+0x69d0e9)
    #8 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #9 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #10 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #11 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #12 kudu::rpc::Connection::Shutdown(kudu::Status const&, std::__1::unique_ptr<kudu::rpc::ErrorStatusPB, std::__1::default_delete<kudu::rpc::ErrorStatusPB> >) ../src/kudu/rpc/connection.cc:295:5 (libkrpc.so+0x1403c2)
    #13 kudu::rpc::ReactorThread::DestroyConnection(kudu::rpc::Connection*, kudu::Status const&, std::__1::unique_ptr<kudu::rpc::ErrorStatusPB, std::__1::default_delete<kudu::rpc::ErrorStatusPB> >) ../src/kudu/rpc/reactor.cc:694:9 (libkrpc.so+0x18dacb)
    #14 kudu::rpc::Connection::ReadHandler(ev::io&, int) ../src/kudu/rpc/connection.cc:672:24 (libkrpc.so+0x1427aa)
    #15 void ev::base<ev_io, ev::io>::method_thunk<kudu::rpc::Connection, &(kudu::rpc::Connection::ReadHandler(ev::io&, int))>(ev_loop*, ev_io*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x14dc6a)
    #16 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #17 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #18 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #19 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #20 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #21 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #22 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #23 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #24 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #25 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #26 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #27 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #28 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Location is heap block of size 1536 at 0x7b6800026a00 allocated by thread T152:
    #0 operator new(unsigned long) /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cpp:64 (kudu-tool-test+0x520ca7)
    #1 std::__1::__libcpp_allocate(unsigned long, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/new:253:10 (kudu-tool-test+0x627ce6)
    #2 std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >::allocate(unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1789:34 (kudu-tool-test+0x6345f2)
    #3 std::__1::allocator_traits<std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::allocate(std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1525:21 (kudu-tool-test+0x6343e0)
    #4 std::__1::__split_buffer<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&>::__split_buffer(unsigned long, unsigned long, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__split_buffer:318:29 (kudu-tool-test+0x647be4)
    #5 void std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::__push_back_slow_path<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1627:49 (kudu-tool-test+0x6b5089)
    #6 std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::push_back(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1659:9 (kudu-tool-test+0x60ad41)
    #7 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:18 (kudu-tool-test+0x69d0e9)
    #8 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #9 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #10 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #11 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #12 kudu::rpc::Connection::ReadHandler(ev::io&, int) ../src/kudu/rpc/connection.cc (libkrpc.so+0x14277c)
    #13 void ev::base<ev_io, ev::io>::method_thunk<kudu::rpc::Connection, &(kudu::rpc::Connection::ReadHandler(ev::io&, int))>(ev_loop*, ev_io*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x14dc6a)
    #14 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #15 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #16 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #17 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #18 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #19 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #20 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #21 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #22 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #23 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #24 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #25 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #26 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Mutex M179 (0x7ff8f97c3968) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xdde9)
    #2 __cxx_global_var_init.152 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:396:14 (libglog.so.1+0xdde9)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xdde9)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Mutex M183 (0x7ff8f97c3a08) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xded2)
    #2 __cxx_global_var_init.160 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:623:23 (libglog.so.1+0xded2)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xded2)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Thread T152 'rpc reactor-666' (tid=66682, running) created by main thread at:
    #0 pthread_create /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:966 (kudu-tool-test+0x4a52b5)
    #1 kudu::Thread::StartThread(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, unsigned long, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.cc:635:15 (libkudu_util.so+0x42d70a)
    #2 kudu::Thread::Create(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.h:146:12 (libmaster.so+0x2cf9b9)
    #3 kudu::rpc::ReactorThread::Init() ../src/kudu/rpc/reactor.cc:193:10 (libkrpc.so+0x18c03e)
    #4 kudu::rpc::Reactor::Init() ../src/kudu/rpc/reactor.cc:773:18 (libkrpc.so+0x1907c0)
    #5 kudu::rpc::Messenger::Init() ../src/kudu/rpc/messenger.cc:360:5 (libkrpc.so+0x160d6d)
    #6 kudu::rpc::MessengerBuilder::Build(std::__1::shared_ptr<kudu::rpc::Messenger>*) ../src/kudu/rpc/messenger.cc:107:3 (libkrpc.so+0x16082c)
    #7 kudu::server::ServerBase::Init() ../src/kudu/server/server_base.cc:851:3 (libserver_process.so+0x13ed4a)
    #8 kudu::kserver::KuduServer::Init() ../src/kudu/kserver/kserver.cc:144:3 (libkserver.so+0x12eb1)
    #9 kudu::tserver::TabletServer::Init() ../src/kudu/tserver/tablet_server.cc:106:3 (libtserver.so+0x25d062)
    #10 kudu::tserver::MiniTabletServer::Start() ../src/kudu/tserver/mini_tablet_server.cc:106:3 (libtserver.so+0x1e886b)
    #11 kudu::tserver::MiniTabletServer::Restart() ../src/kudu/tserver/mini_tablet_server.cc:131:10 (libtserver.so+0x1e8b08)
    #12 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9441:3 (kudu-tool-test+0x5dbe5b)
    #13 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #14 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #15 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #16 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #17 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #18 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #19 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #20 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #21 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #22 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #23 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

SUMMARY: ThreadSanitizer: data race /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:1505:34 in std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__get_long_pointer() const
==================
==================
WARNING: ThreadSanitizer: data race (pid=66319)
  Read of size 8 at 0x7b6800026d40 by main thread:
    #0 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__get_long_pointer() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:1505:34 (kudu-tool-test+0x633ae5)
    #1 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__get_pointer() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:1517:31 (kudu-tool-test+0x633a65)
    #2 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::data() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:1245:75 (kudu-tool-test+0x6339a9)
    #3 void JoinStringsIterator<std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> >(std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:219:26 (kudu-tool-test+0x6bc580)
    #4 void JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:168:3 (kudu-tool-test+0x6bc3f9)
    #5 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&) ../src/kudu/gutil/strings/join.h:175:3 (kudu-tool-test+0x608cf1)
    #6 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9485:5 (kudu-tool-test+0x5dc37d)
    #7 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #8 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #9 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #10 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #11 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #12 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #13 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #14 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #15 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #16 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #17 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

  Previous write of size 8 at 0x7b6800026d40 by thread T11 (mutexes: write M179, read M183):
    #0 memcpy sanitizer_common/sanitizer_common_interceptors.inc:808 (kudu-tool-test+0x4a916c)
    #1 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::basic_string(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:1936:7 (kudu-tool-test+0x62ea0d)
    #2 void std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >::construct<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1809:31 (kudu-tool-test+0x648498)
    #3 void std::__1::allocator_traits<std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::__construct<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::integral_constant<bool, true>, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1687:21 (kudu-tool-test+0x648451)
    #4 void std::__1::allocator_traits<std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::construct<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1538:14 (kudu-tool-test+0x6483c1)
    #5 void std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::__construct_one_at_end<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:926:5 (kudu-tool-test+0x6b4fe9)
    #6 std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::push_back(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1656:9 (kudu-tool-test+0x60ad34)
    #7 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:18 (kudu-tool-test+0x69d0e9)
    #8 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #9 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #10 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #11 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #12 kudu::rpc::Connection::ReadHandler(ev::io&, int) ../src/kudu/rpc/connection.cc (libkrpc.so+0x14277c)
    #13 void ev::base<ev_io, ev::io>::method_thunk<kudu::rpc::Connection, &(kudu::rpc::Connection::ReadHandler(ev::io&, int))>(ev_loop*, ev_io*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x14dc6a)
    #14 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #15 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #16 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #17 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #18 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #19 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #20 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #21 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #22 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #23 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #24 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #25 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #26 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Location is heap block of size 1536 at 0x7b6800026a00 allocated by thread T152:
    #0 operator new(unsigned long) /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cpp:64 (kudu-tool-test+0x520ca7)
    #1 std::__1::__libcpp_allocate(unsigned long, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/new:253:10 (kudu-tool-test+0x627ce6)
    #2 std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >::allocate(unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1789:34 (kudu-tool-test+0x6345f2)
    #3 std::__1::allocator_traits<std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::allocate(std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1525:21 (kudu-tool-test+0x6343e0)
    #4 std::__1::__split_buffer<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&>::__split_buffer(unsigned long, unsigned long, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__split_buffer:318:29 (kudu-tool-test+0x647be4)
    #5 void std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::__push_back_slow_path<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1627:49 (kudu-tool-test+0x6b5089)
    #6 std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::push_back(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1659:9 (kudu-tool-test+0x60ad41)
    #7 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:18 (kudu-tool-test+0x69d0e9)
    #8 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #9 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #10 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #11 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #12 kudu::rpc::Connection::ReadHandler(ev::io&, int) ../src/kudu/rpc/connection.cc (libkrpc.so+0x14277c)
    #13 void ev::base<ev_io, ev::io>::method_thunk<kudu::rpc::Connection, &(kudu::rpc::Connection::ReadHandler(ev::io&, int))>(ev_loop*, ev_io*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x14dc6a)
    #14 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #15 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #16 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #17 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #18 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #19 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #20 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #21 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #22 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #23 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #24 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #25 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #26 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Mutex M179 (0x7ff8f97c3968) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xdde9)
    #2 __cxx_global_var_init.152 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:396:14 (libglog.so.1+0xdde9)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xdde9)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Mutex M183 (0x7ff8f97c3a08) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xded2)
    #2 __cxx_global_var_init.160 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:623:23 (libglog.so.1+0xded2)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xded2)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Thread T11 'rpc reactor-663' (tid=66354, running) created by main thread at:
    #0 pthread_create /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:966 (kudu-tool-test+0x4a52b5)
    #1 kudu::Thread::StartThread(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, unsigned long, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.cc:635:15 (libkudu_util.so+0x42d70a)
    #2 kudu::Thread::Create(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.h:146:12 (libmaster.so+0x2cf9b9)
    #3 kudu::rpc::ReactorThread::Init() ../src/kudu/rpc/reactor.cc:193:10 (libkrpc.so+0x18c03e)
    #4 kudu::rpc::Reactor::Init() ../src/kudu/rpc/reactor.cc:773:18 (libkrpc.so+0x1907c0)
    #5 kudu::rpc::Messenger::Init() ../src/kudu/rpc/messenger.cc:360:5 (libkrpc.so+0x160d6d)
    #6 kudu::rpc::MessengerBuilder::Build(std::__1::shared_ptr<kudu::rpc::Messenger>*) ../src/kudu/rpc/messenger.cc:107:3 (libkrpc.so+0x16082c)
    #7 kudu::server::ServerBase::Init() ../src/kudu/server/server_base.cc:851:3 (libserver_process.so+0x13ed4a)
    #8 kudu::kserver::KuduServer::Init() ../src/kudu/kserver/kserver.cc:144:3 (libkserver.so+0x12eb1)
    #9 kudu::master::Master::Init() ../src/kudu/master/master.cc:291:3 (libmaster.so+0x3f3b40)
    #10 kudu::master::MiniMaster::Start() ../src/kudu/master/mini_master.cc:95:3 (libmaster.so+0x4469b0)
    #11 kudu::cluster::InternalMiniCluster::StartMasters() ../src/kudu/mini-cluster/internal_mini_cluster.cc:176:5 (libmini_cluster.so+0xd18ef)
    #12 kudu::cluster::InternalMiniCluster::Start() ../src/kudu/mini-cluster/internal_mini_cluster.cc:107:3 (libmini_cluster.so+0xd111b)
    #13 kudu::tools::ToolTest::StartMiniCluster(kudu::cluster::InternalMiniClusterOptions) ../src/kudu/tools/kudu-tool-test.cc:1280:3 (kudu-tool-test+0x522eed)
    #14 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9375:3 (kudu-tool-test+0x5db096)
    #15 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #16 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #17 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #18 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #19 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #20 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #21 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #22 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #23 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #24 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #25 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

  Thread T152 'rpc reactor-666' (tid=66682, running) created by main thread at:
    #0 pthread_create /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:966 (kudu-tool-test+0x4a52b5)
    #1 kudu::Thread::StartThread(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, unsigned long, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.cc:635:15 (libkudu_util.so+0x42d70a)
    #2 kudu::Thread::Create(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.h:146:12 (libmaster.so+0x2cf9b9)
    #3 kudu::rpc::ReactorThread::Init() ../src/kudu/rpc/reactor.cc:193:10 (libkrpc.so+0x18c03e)
    #4 kudu::rpc::Reactor::Init() ../src/kudu/rpc/reactor.cc:773:18 (libkrpc.so+0x1907c0)
    #5 kudu::rpc::Messenger::Init() ../src/kudu/rpc/messenger.cc:360:5 (libkrpc.so+0x160d6d)
    #6 kudu::rpc::MessengerBuilder::Build(std::__1::shared_ptr<kudu::rpc::Messenger>*) ../src/kudu/rpc/messenger.cc:107:3 (libkrpc.so+0x16082c)
    #7 kudu::server::ServerBase::Init() ../src/kudu/server/server_base.cc:851:3 (libserver_process.so+0x13ed4a)
    #8 kudu::kserver::KuduServer::Init() ../src/kudu/kserver/kserver.cc:144:3 (libkserver.so+0x12eb1)
    #9 kudu::tserver::TabletServer::Init() ../src/kudu/tserver/tablet_server.cc:106:3 (libtserver.so+0x25d062)
    #10 kudu::tserver::MiniTabletServer::Start() ../src/kudu/tserver/mini_tablet_server.cc:106:3 (libtserver.so+0x1e886b)
    #11 kudu::tserver::MiniTabletServer::Restart() ../src/kudu/tserver/mini_tablet_server.cc:131:10 (libtserver.so+0x1e8b08)
    #12 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9441:3 (kudu-tool-test+0x5dbe5b)
    #13 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #14 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #15 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #16 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #17 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #18 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #19 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #20 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #21 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #22 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #23 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

SUMMARY: ThreadSanitizer: data race /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:1505:34 in std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__get_long_pointer() const
==================
==================
WARNING: ThreadSanitizer: data race (pid=66319)
  Read of size 8 at 0x7b6800026d58 by main thread:
    #0 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__get_long_pointer() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:1505:34 (kudu-tool-test+0x633ae5)
    #1 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__get_pointer() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:1517:31 (kudu-tool-test+0x633a65)
    #2 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::data() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:1245:75 (kudu-tool-test+0x6339a9)
    #3 void JoinStringsIterator<std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> >(std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, std::__1::__wrap_iter<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const*> const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:219:26 (kudu-tool-test+0x6bc580)
    #4 void JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*) ../src/kudu/gutil/strings/join.h:168:3 (kudu-tool-test+0x6bc3f9)
    #5 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > JoinStrings<std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > >(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, StringPiece const&) ../src/kudu/gutil/strings/join.h:175:3 (kudu-tool-test+0x608cf1)
    #6 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9485:5 (kudu-tool-test+0x5dc37d)
    #7 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #8 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #9 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #10 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #11 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #12 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #13 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #14 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #15 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #16 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #17 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

  Previous write of size 8 at 0x7b6800026d58 by thread T11 (mutexes: write M179, read M183):
    #0 memcpy sanitizer_common/sanitizer_common_interceptors.inc:808 (kudu-tool-test+0x4a916c)
    #1 std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::basic_string(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:1936:7 (kudu-tool-test+0x62ea0d)
    #2 void std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >::construct<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1809:31 (kudu-tool-test+0x648498)
    #3 void std::__1::allocator_traits<std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::__construct<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::integral_constant<bool, true>, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1687:21 (kudu-tool-test+0x648451)
    #4 void std::__1::allocator_traits<std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::construct<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1538:14 (kudu-tool-test+0x6483c1)
    #5 void std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::__construct_one_at_end<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:926:5 (kudu-tool-test+0x6b4fe9)
    #6 std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::push_back(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1656:9 (kudu-tool-test+0x60ad34)
    #7 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:18 (kudu-tool-test+0x69d0e9)
    #8 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #9 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #10 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #11 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #12 kudu::master::RetryingTSRpcTask::RpcCallback() ../src/kudu/master/catalog_manager.cc:4567:5 (libmaster.so+0x32a1bc)
    #13 kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()::operator()() const ../src/kudu/master/catalog_manager.cc:4937:50 (libmaster.so+0x3874d1)
    #14 decltype(std::__1::forward<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()&>(fp)()) std::__1::__invoke<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()&>(kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libmaster.so+0x387461)
    #15 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()&>(kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libmaster.so+0x3873f1)
    #16 std::__1::__function::__alloc_func<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'(), std::__1::allocator<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libmaster.so+0x3873b1)
    #17 std::__1::__function::__func<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'(), std::__1::allocator<kudu::master::AsyncAlterTable::SendRequest(int)::'lambda'()>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libmaster.so+0x38604d)
    #18 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #19 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #20 kudu::rpc::OutboundCall::CallCallback() ../src/kudu/rpc/outbound_call.cc:309:5 (libkrpc.so+0x17a2d4)
    #21 kudu::rpc::OutboundCall::SetFailed(kudu::Status, kudu::rpc::OutboundCall::Phase, std::__1::unique_ptr<kudu::rpc::ErrorStatusPB, std::__1::default_delete<kudu::rpc::ErrorStatusPB> >) ../src/kudu/rpc/outbound_call.cc:400:3 (libkrpc.so+0x17a889)
    #22 kudu::rpc::Connection::Shutdown(kudu::Status const&, std::__1::unique_ptr<kudu::rpc::ErrorStatusPB, std::__1::default_delete<kudu::rpc::ErrorStatusPB> >) ../src/kudu/rpc/connection.cc:311:16 (libkrpc.so+0x140516)
    #23 kudu::rpc::ReactorThread::DestroyConnection(kudu::rpc::Connection*, kudu::Status const&, std::__1::unique_ptr<kudu::rpc::ErrorStatusPB, std::__1::default_delete<kudu::rpc::ErrorStatusPB> >) ../src/kudu/rpc/reactor.cc:694:9 (libkrpc.so+0x18dacb)
    #24 kudu::rpc::Connection::ReadHandler(ev::io&, int) ../src/kudu/rpc/connection.cc:672:24 (libkrpc.so+0x1427aa)
    #25 void ev::base<ev_io, ev::io>::method_thunk<kudu::rpc::Connection, &(kudu::rpc::Connection::ReadHandler(ev::io&, int))>(ev_loop*, ev_io*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x14dc6a)
    #26 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #27 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #28 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #29 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #30 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #31 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #32 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #33 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #34 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #35 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #36 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #37 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #38 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Location is heap block of size 1536 at 0x7b6800026a00 allocated by thread T152:
    #0 operator new(unsigned long) /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_new_delete.cpp:64 (kudu-tool-test+0x520ca7)
    #1 std::__1::__libcpp_allocate(unsigned long, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/new:253:10 (kudu-tool-test+0x627ce6)
    #2 std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >::allocate(unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1789:34 (kudu-tool-test+0x6345f2)
    #3 std::__1::allocator_traits<std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::allocate(std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&, unsigned long) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/memory:1525:21 (kudu-tool-test+0x6343e0)
    #4 std::__1::__split_buffer<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&>::__split_buffer(unsigned long, unsigned long, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__split_buffer:318:29 (kudu-tool-test+0x647be4)
    #5 void std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::__push_back_slow_path<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1627:49 (kudu-tool-test+0x6b5089)
    #6 std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >::push_back(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/vector:1659:9 (kudu-tool-test+0x60ad41)
    #7 kudu::StringVectorSink::send(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) ../src/kudu/util/logging_test_util.h:34:18 (kudu-tool-test+0x69d0e9)
    #8 google::LogDestination::LogToSinks(int, char const*, char const*, int, google::LogMessageTime const&, char const*, unsigned long) /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:894:21 (libglog.so.1+0x2394a)
    #9 google::LogMessage::SendToLog() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1850:5 (libglog.so.1+0x18716)
    #10 google::LogMessage::Flush() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1777:5 (libglog.so.1+0x1992f)
    #11 google::LogMessage::~LogMessage() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:1724:3 (libglog.so.1+0x1969e)
    #12 kudu::rpc::Connection::ReadHandler(ev::io&, int) ../src/kudu/rpc/connection.cc (libkrpc.so+0x14277c)
    #13 void ev::base<ev_io, ev::io>::method_thunk<kudu::rpc::Connection, &(kudu::rpc::Connection::ReadHandler(ev::io&, int))>(ev_loop*, ev_io*, int) ../thirdparty/installed/tsan/include/ev++.h:479:7 (libkrpc.so+0x14dc6a)
    #14 ev_invoke_pending /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3155:11 (libev.so.4+0x9982)
    #15 kudu::rpc::ReactorThread::InvokePendingCb(ev_loop*) ../src/kudu/rpc/reactor.cc:202:3 (libkrpc.so+0x18c305)
    #16 ev_run /apache/dev/git/kudu/thirdparty/src/libev-4.20/ev.c:3555:7 (libev.so.4+0xab2c)
    #17 ev::loop_ref::run(int) ../thirdparty/installed/tsan/include/ev++.h:211:7 (libkrpc.so+0x197508)
    #18 kudu::rpc::ReactorThread::RunThread() ../src/kudu/rpc/reactor.cc:503:9 (libkrpc.so+0x18f665)
    #19 kudu::rpc::ReactorThread::Init()::$_0::operator()() const ../src/kudu/rpc/reactor.cc:194:48 (libkrpc.so+0x192411)
    #20 decltype(std::__1::forward<kudu::rpc::ReactorThread::Init()::$_0&>(fp)()) std::__1::__invoke<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/type_traits:3899:1 (libkrpc.so+0x1923c9)
    #21 void std::__1::__invoke_void_return_wrapper<void>::__call<kudu::rpc::ReactorThread::Init()::$_0&>(kudu::rpc::ReactorThread::Init()::$_0&) /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/__functional_base:348:9 (libkrpc.so+0x192359)
    #22 std::__1::__function::__alloc_func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1557:16 (libkrpc.so+0x192321)
    #23 std::__1::__function::__func<kudu::rpc::ReactorThread::Init()::$_0, std::__1::allocator<kudu::rpc::ReactorThread::Init()::$_0>, void ()>::operator()() /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1731:12 (libkrpc.so+0x19161d)
    #24 std::__1::__function::__value_func<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:1884:16 (kudu-tool-test+0x6ae764)
    #25 std::__1::function<void ()>::operator()() const /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/functional:2556:12 (kudu-tool-test+0x6ae599)
    #26 kudu::Thread::SuperviseThread(void*) ../src/kudu/util/thread.cc:691:3 (libkudu_util.so+0x42dea6)

  Mutex M179 (0x7ff8f97c3968) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xdde9)
    #2 __cxx_global_var_init.152 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:396:14 (libglog.so.1+0xdde9)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xdde9)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Mutex M183 (0x7ff8f97c3a08) created at:
    #0 pthread_rwlock_init /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:1317 (kudu-tool-test+0x4d5a9b)
    #1 glog_internal_namespace_::Mutex::Mutex() /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/base/mutex.h:247:19 (libglog.so.1+0xded2)
    #2 __cxx_global_var_init.160 /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc:623:23 (libglog.so.1+0xded2)
    #3 _GLOBAL__sub_I_logging.cc /apache/dev/git/kudu/thirdparty/src/glog-0.6.0/src/logging.cc (libglog.so.1+0xded2)
    #4 <null> <null> (ld-linux-x86-64.so.2+0x108d2)

  Thread T11 'rpc reactor-663' (tid=66354, running) created by main thread at:
    #0 pthread_create /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:966 (kudu-tool-test+0x4a52b5)
    #1 kudu::Thread::StartThread(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, unsigned long, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.cc:635:15 (libkudu_util.so+0x42d70a)
    #2 kudu::Thread::Create(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.h:146:12 (libmaster.so+0x2cf9b9)
    #3 kudu::rpc::ReactorThread::Init() ../src/kudu/rpc/reactor.cc:193:10 (libkrpc.so+0x18c03e)
    #4 kudu::rpc::Reactor::Init() ../src/kudu/rpc/reactor.cc:773:18 (libkrpc.so+0x1907c0)
    #5 kudu::rpc::Messenger::Init() ../src/kudu/rpc/messenger.cc:360:5 (libkrpc.so+0x160d6d)
    #6 kudu::rpc::MessengerBuilder::Build(std::__1::shared_ptr<kudu::rpc::Messenger>*) ../src/kudu/rpc/messenger.cc:107:3 (libkrpc.so+0x16082c)
    #7 kudu::server::ServerBase::Init() ../src/kudu/server/server_base.cc:851:3 (libserver_process.so+0x13ed4a)
    #8 kudu::kserver::KuduServer::Init() ../src/kudu/kserver/kserver.cc:144:3 (libkserver.so+0x12eb1)
    #9 kudu::master::Master::Init() ../src/kudu/master/master.cc:291:3 (libmaster.so+0x3f3b40)
    #10 kudu::master::MiniMaster::Start() ../src/kudu/master/mini_master.cc:95:3 (libmaster.so+0x4469b0)
    #11 kudu::cluster::InternalMiniCluster::StartMasters() ../src/kudu/mini-cluster/internal_mini_cluster.cc:176:5 (libmini_cluster.so+0xd18ef)
    #12 kudu::cluster::InternalMiniCluster::Start() ../src/kudu/mini-cluster/internal_mini_cluster.cc:107:3 (libmini_cluster.so+0xd111b)
    #13 kudu::tools::ToolTest::StartMiniCluster(kudu::cluster::InternalMiniClusterOptions) ../src/kudu/tools/kudu-tool-test.cc:1280:3 (kudu-tool-test+0x522eed)
    #14 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9375:3 (kudu-tool-test+0x5db096)
    #15 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #16 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #17 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #18 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #19 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #20 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #21 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #22 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #23 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #24 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #25 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

  Thread T152 'rpc reactor-666' (tid=66682, running) created by main thread at:
    #0 pthread_create /apache/dev/git/kudu/thirdparty/src/llvm-11.0.0.src/projects/compiler-rt/lib/tsan/rtl/tsan_interceptors_posix.cpp:966 (kudu-tool-test+0x4a52b5)
    #1 kudu::Thread::StartThread(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, unsigned long, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.cc:635:15 (libkudu_util.so+0x42d70a)
    #2 kudu::Thread::Create(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::function<void ()>, scoped_refptr<kudu::Thread>*) ../src/kudu/util/thread.h:146:12 (libmaster.so+0x2cf9b9)
    #3 kudu::rpc::ReactorThread::Init() ../src/kudu/rpc/reactor.cc:193:10 (libkrpc.so+0x18c03e)
    #4 kudu::rpc::Reactor::Init() ../src/kudu/rpc/reactor.cc:773:18 (libkrpc.so+0x1907c0)
    #5 kudu::rpc::Messenger::Init() ../src/kudu/rpc/messenger.cc:360:5 (libkrpc.so+0x160d6d)
    #6 kudu::rpc::MessengerBuilder::Build(std::__1::shared_ptr<kudu::rpc::Messenger>*) ../src/kudu/rpc/messenger.cc:107:3 (libkrpc.so+0x16082c)
    #7 kudu::server::ServerBase::Init() ../src/kudu/server/server_base.cc:851:3 (libserver_process.so+0x13ed4a)
    #8 kudu::kserver::KuduServer::Init() ../src/kudu/kserver/kserver.cc:144:3 (libkserver.so+0x12eb1)
    #9 kudu::tserver::TabletServer::Init() ../src/kudu/tserver/tablet_server.cc:106:3 (libtserver.so+0x25d062)
    #10 kudu::tserver::MiniTabletServer::Start() ../src/kudu/tserver/mini_tablet_server.cc:106:3 (libtserver.so+0x1e886b)
    #11 kudu::tserver::MiniTabletServer::Restart() ../src/kudu/tserver/mini_tablet_server.cc:131:10 (libtserver.so+0x1e8b08)
    #12 kudu::tools::DownloadSuperblockInBatchTest_TestDownloadSuperblockInBatch_Test::TestBody() ../src/kudu/tools/kudu-tool-test.cc:9441:3 (kudu-tool-test+0x5dbe5b)
    #13 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x64e0f)
    #14 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x64e0f)
    #15 testing::Test::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2674:5 (libgtest.so.1.12.1+0x42a11)
    #16 testing::TestInfo::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2853:11 (libgtest.so.1.12.1+0x43d28)
    #17 testing::TestSuite::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:3012:30 (libgtest.so.1.12.1+0x44d04)
    #18 testing::internal::UnitTestImpl::RunAllTests() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5870:44 (libgtest.so.1.12.1+0x597f4)
    #19 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2599:10 (libgtest.so.1.12.1+0x65ccf)
    #20 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:2635:14 (libgtest.so.1.12.1+0x65ccf)
    #21 testing::UnitTest::Run() /apache/dev/git/kudu/thirdparty/src/googletest-release-1.12.1/googletest/src/gtest.cc:5444:10 (libgtest.so.1.12.1+0x58dac)
    #22 RUN_ALL_TESTS() ../thirdparty/installed/tsan/include/gtest/gtest.h:2293:73 (libkudu_test_main.so+0x8bcb)
    #23 main ../src/kudu/util/test_main.cc:109:10 (libkudu_test_main.so+0x796c)

SUMMARY: ThreadSanitizer: data race /apache/dev/git/kudu/thirdparty/installed/tsan/include/c++/v1/string:1505:34 in std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__get_long_pointer() const
==================




